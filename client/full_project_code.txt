

// ==========================================
// FILE: eslint.config.js
// ==========================================

import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{js,jsx}'],
    extends: [
      js.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
      parserOptions: {
        ecmaVersion: 'latest',
        ecmaFeatures: { jsx: true },
        sourceType: 'module',
      },
    },
    rules: {
      'no-unused-vars': ['error', { varsIgnorePattern: '^[A-Z_]' }],
    },
  },
])


// ==========================================
// FILE: index.html
// ==========================================

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>client</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>


// ==========================================
// FILE: package.json
// ==========================================

{
  "name": "client",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "axios": "^1.13.2",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-icons": "^5.5.0",
    "react-router-dom": "^7.10.1",
    "recharts": "^3.6.0"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/react": "^19.2.5",
    "@types/react-dom": "^19.2.3",
    "@vitejs/plugin-react": "^5.1.1",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "vite": "^7.2.4"
  }
}


// ==========================================
// FILE: README.md
// ==========================================

# React + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend using TypeScript with type-aware lint rules enabled. Check out the [TS template](https://github.com/vitejs/vite/tree/main/packages/create-vite/template-react-ts) for information on how to integrate TypeScript and [`typescript-eslint`](https://typescript-eslint.io) in your project.


// ==========================================
// FILE: src\App.css
// ==========================================

/* =========================
   Global Resets
   ========================= */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  background-color: #fcfcfc; /* Very light grey background to reduce eye strain */
  color: #333;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* =========================
   App Layout (Sticky Footer)
   ========================= */
/* This ensures the Footer always stays at the bottom, even on short pages */
.App {
  display: flex;
  flex-direction: column;
  min-height: 100vh; /* Forces the app to take full screen height */
}

/* Make these pages expand to fill empty space */
.home-container,
.about-container,
.products-page,
.login-container {
  flex: 1; /* Pushes the footer down */
}

/* =========================
   Common Utility Classes
   ========================= */
a {
  text-decoration: none;
  color: inherit;
}

ul {
  list-style: none;
}

/* =========================
   MOBILE RESPONSIVENESS
   ========================= */

@media (max-width: 900px) {
  /* 1. Global Layout: Stack Sidebar and Content */
  .admin-layout,
  .customer-layout,
  .supplier-layout {
    flex-direction: column;
    position: relative; /* Needed for absolute positioning of sidebar */
  }

  /* 2. Dashboards: Stack Widgets Vertically */
  .dashboard-grid {
    flex-direction: column !important; /* Force stack */
  }

  .stats-row {
    flex-direction: column !important;
  }

  /* 3. Cards: Remove fixed widths or flex restrictions */
  .card,
  .stat-card {
    width: 100%;
    margin-bottom: 15px;
  }

  /* 4. Tables: Make them scrollable horizontally */
  .card {
    overflow-x: auto; /* Adds scrollbar if table is too wide */
  }

  .admin-table,
  .customer-table,
  .supplier-table {
    min-width: 600px; /* Force table to keep shape, user scrolls */
  }
}


// ==========================================
// FILE: src\App.jsx
// ==========================================

import React from "react";
import {
  BrowserRouter as Router,
  Routes,
  Route,
  Navigate,
} from "react-router-dom";
import Navbar from "./components/Navbar";
import Footer from "./components/Footer";
import Home from "./pages/Home";
import OurProcess from "./pages/OurProcess";
import Contact from "./pages/Contact";
import About from "./pages/About";
import Products from "./pages/Products";
import Login from "./pages/Login";
import Register from "./pages/Register";

// Protection Component
import ProtectedRoute from "./components/ProtectedRoute";

// Portals (Dashboards)
import AdminDashboard from "./pages/AdminDashboard";
import CustomerDashboard from "./pages/CustomerDashboard";
import SupplierDashboard from "./pages/SupplierDashboard";

// Supplier Subpages
import SupplierPayments from "./pages/SupplierPayments";
import SupplierMarketRates from "./pages/SupplierMarketRates";
import SupplierDemand from "./pages/SupplierDemand";
import SupplierAIQuality from "./pages/SupplierAIQuality";
import SupplierProfile from "./pages/SupplierProfile";
import { SupplierSettings } from "./pages/PortalSettings";

// Customer Subpages
import CustomerHistory from "./pages/CustomerHistory";
import CustomerTracking from "./pages/CustomerTracking";
import Traceability from "./pages/Traceability";
import CustomerProfile from "./pages/CustomerProfile";
import { CustomerSettings } from "./pages/PortalSettings";

// Admin Subpages
import AdminInventory from "./pages/AdminInventory";
import AdminSales from "./pages/AdminSales";
import AdminOrders from "./pages/AdminOrders";
import AdminMilling from "./pages/AdminMilling";
import AdminCustomers from "./pages/AdminCustomers";
import AdminSuppliers from "./pages/AdminSuppliers";
import AdminReports from "./pages/AdminReports";
import { AdminSettings } from "./pages/PortalSettings";

// AI Component
import AiChatbot from "./components/AiChatbot";

import "./App.css";

function App() {
  return (
    <Router>
      <div className="App">
        <Navbar />
        <Routes>
          {/* ====================================
               1. PUBLIC ROUTES
               ==================================== */}
          <Route path="/" element={<Home />} />
          <Route path="/about" element={<About />} />
          <Route path="/products" element={<Products />} />
          <Route path="/process" element={<OurProcess />} />
          <Route path="/contact" element={<Contact />} />
          <Route path="/login" element={<Login />} />
          <Route path="/register" element={<Register />} />

          {/* ====================================
               2. ADMIN PORTAL ROUTES (PROTECTED)
               ==================================== */}
          <Route
            path="/admin/dashboard"
            element={
              <ProtectedRoute allowedRoles={["Admin"]}>
                <AdminDashboard />
              </ProtectedRoute>
            }
          />
          <Route
            path="/admin/orders"
            element={
              <ProtectedRoute allowedRoles={["Admin"]}>
                <AdminOrders />
              </ProtectedRoute>
            }
          />
          <Route
            path="/admin/sales"
            element={
              <ProtectedRoute allowedRoles={["Admin"]}>
                <AdminSales />
              </ProtectedRoute>
            }
          />
          <Route
            path="/admin/inventory"
            element={
              <ProtectedRoute allowedRoles={["Admin"]}>
                <AdminInventory />
              </ProtectedRoute>
            }
          />
          <Route
            path="/admin/milling"
            element={
              <ProtectedRoute allowedRoles={["Admin"]}>
                <AdminMilling />
              </ProtectedRoute>
            }
          />
          <Route
            path="/admin/customers"
            element={
              <ProtectedRoute allowedRoles={["Admin"]}>
                <AdminCustomers />
              </ProtectedRoute>
            }
          />
          <Route
            path="/admin/suppliers"
            element={
              <ProtectedRoute allowedRoles={["Admin"]}>
                <AdminSuppliers />
              </ProtectedRoute>
            }
          />
          <Route
            path="/admin/reports"
            element={
              <ProtectedRoute allowedRoles={["Admin"]}>
                <AdminReports />
              </ProtectedRoute>
            }
          />
          <Route
            path="/admin/settings"
            element={
              <ProtectedRoute allowedRoles={["Admin"]}>
                <AdminSettings />
              </ProtectedRoute>
            }
          />

          {/* ====================================
               3. SUPPLIER PORTAL ROUTES (PROTECTED)
               ==================================== */}
          <Route
            path="/supplier/dashboard"
            element={
              <ProtectedRoute allowedRoles={["Supplier"]}>
                <SupplierDashboard />
              </ProtectedRoute>
            }
          />
          <Route
            path="/supplier/demand"
            element={
              <ProtectedRoute allowedRoles={["Supplier"]}>
                <SupplierDemand />
              </ProtectedRoute>
            }
          />
          <Route
            path="/supplier/quality"
            element={
              <ProtectedRoute allowedRoles={["Supplier"]}>
                <SupplierAIQuality />
              </ProtectedRoute>
            }
          />
          <Route
            path="/supplier/payments"
            element={
              <ProtectedRoute allowedRoles={["Supplier"]}>
                <SupplierPayments />
              </ProtectedRoute>
            }
          />
          <Route
            path="/supplier/profile"
            element={
              <ProtectedRoute allowedRoles={["Supplier"]}>
                <SupplierProfile />
              </ProtectedRoute>
            }
          />
          <Route
            path="/supplier/market-rates"
            element={
              <ProtectedRoute allowedRoles={["Supplier"]}>
                <SupplierMarketRates />
              </ProtectedRoute>
            }
          />
          <Route
            path="/supplier/settings"
            element={
              <ProtectedRoute allowedRoles={["Supplier"]}>
                <SupplierSettings />
              </ProtectedRoute>
            }
          />

          {/* ====================================
               4. CUSTOMER PORTAL ROUTES (PROTECTED)
               ==================================== */}
          <Route
            path="/customer/dashboard"
            element={
              <ProtectedRoute allowedRoles={["Customer"]}>
                <CustomerDashboard />
              </ProtectedRoute>
            }
          />
          <Route
            path="/customer/history"
            element={
              <ProtectedRoute allowedRoles={["Customer"]}>
                <CustomerHistory />
              </ProtectedRoute>
            }
          />
          <Route
            path="/customer/tracking"
            element={
              <ProtectedRoute allowedRoles={["Customer"]}>
                <CustomerTracking />
              </ProtectedRoute>
            }
          />
          <Route
            path="/customer/traceability"
            element={
              <ProtectedRoute allowedRoles={["Customer"]}>
                <Traceability />
              </ProtectedRoute>
            }
          />
          <Route
            path="/customer/profile"
            element={
              <ProtectedRoute allowedRoles={["Customer"]}>
                <CustomerProfile />
              </ProtectedRoute>
            }
          />
          <Route
            path="/customer/settings"
            element={
              <ProtectedRoute allowedRoles={["Customer"]}>
                <CustomerSettings />
              </ProtectedRoute>
            }
          />

          {/* Fallback */}
          <Route path="*" element={<Navigate to="/login" replace />} />
        </Routes>
        <Footer />
        <AiChatbot />
      </div>
    </Router>
  );
}

export default App;


// ==========================================
// FILE: src\components\AdminSidebar.css
// ==========================================

/* Sidebar Container */
.admin-sidebar {
  width: 250px;
  background-color: #fff;
  border-right: 1px solid #e0e0e0;
  height: calc(100vh - 80px);
  position: sticky;
  top: 80px;
  display: flex;
  flex-direction: column; /* Allows footer to be pushed to bottom */
  transition: transform 0.3s ease-in-out;
  z-index: 2000;
}

/* Header */
.sidebar-header {
  background-color: #8c734b;
  color: white;
  padding: 15px;
  text-align: center;
  font-weight: bold;
  letter-spacing: 1px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* Menu Styles */
.sidebar-menu {
  list-style: none;
  padding: 0;
  margin: 0;
  flex-grow: 1; /* Occupies available space */
}

.sidebar-menu li a {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 15px 20px;
  color: #333;
  text-decoration: none;
  font-weight: 500;
  transition: all 0.3s ease;
  border-left: 4px solid transparent;
}

.sidebar-menu li a:hover {
  background-color: #f4f4f4;
  color: #3e5235;
}

.sidebar-menu li.active a {
  background-color: #e8f5e9;
  color: #3e5235;
  border-left: 4px solid #3e5235;
}

/* NEW: Sidebar Footer for Logout */
.sidebar-footer {
  border-top: 1px solid #eee;
  padding: 15px;
}

.logout-btn {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 20px;
  background: none;
  border: none;
  color: #d32f2f; /* Red Alert Color */
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
  border-radius: 6px;
}

.logout-btn:hover {
  background-color: #ffebee;
  color: #b71c1c;
}

/* Mobile Toggle Styles */
.mobile-menu-toggle {
  display: none;
}

.close-sidebar-btn {
  display: none;
  background: none;
  border: none;
  color: white;
  font-size: 20px;
  cursor: pointer;
}

.sidebar-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1099;
}

/* =========================
   MOBILE STYLES
   ========================= */
@media (max-width: 900px) {
  .admin-sidebar {
    position: fixed;
    left: 0;
    top: 0;
    height: 100vh;
    transform: translateX(-100%);
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.2);
    z-index: 2001;
  }

  .admin-sidebar.open {
    transform: translateX(0);
  }

  .mobile-menu-toggle {
    display: flex;
    position: fixed;
    top: 90px;
    left: 10px;
    z-index: 2000;
    background-color: #8c734b;
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    align-items: center;
    gap: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  }

  .close-sidebar-btn {
    display: block;
  }
}


// ==========================================
// FILE: src\components\AdminSidebar.jsx
// ==========================================

import React, { useState } from "react";
import { Link, useLocation, useNavigate } from "react-router-dom";
import "./AdminSidebar.css";
import {
  FaThLarge,
  FaShoppingCart,
  FaCogs,
  FaWarehouse,
  FaChartLine,
  FaUsers,
  FaTruck,
  FaFileAlt,
  FaCog,
  FaBars,
  FaTimes,
  FaSignOutAlt,
} from "react-icons/fa";

const AdminSidebar = () => {
  const location = useLocation();
  const navigate = useNavigate();
  const [isOpen, setIsOpen] = useState(false);

  // Exact match helper for active links
  const isLinkActive = (path) => location.pathname === path;

  const handleLinkClick = () => setIsOpen(false);

  const handleLogout = () => {
    localStorage.removeItem("userInfo");
    setIsOpen(false);
    navigate("/login", { replace: true });
    window.location.reload();
  };

  return (
    <>
      <button className="mobile-menu-toggle" onClick={() => setIsOpen(true)}>
        <FaBars /> Menu
      </button>

      <div className={`admin-sidebar ${isOpen ? "open" : ""}`}>
        <div className="sidebar-header">
          <h3>Admin Portal</h3>
          <button
            className="close-sidebar-btn"
            onClick={() => setIsOpen(false)}
          >
            <FaTimes />
          </button>
        </div>

        <ul className="sidebar-menu">
          <li className={isLinkActive("/admin/dashboard") ? "active" : ""}>
            <Link to="/admin/dashboard" onClick={handleLinkClick}>
              <FaThLarge /> Dashboard
            </Link>
          </li>

          <li className={isLinkActive("/admin/orders") ? "active" : ""}>
            <Link to="/admin/orders" onClick={handleLinkClick}>
              <FaShoppingCart /> My Orders
            </Link>
          </li>

          <li className={isLinkActive("/admin/milling") ? "active" : ""}>
            <Link to="/admin/milling" onClick={handleLinkClick}>
              <FaCogs /> Milling System
            </Link>
          </li>

          <li className={isLinkActive("/admin/inventory") ? "active" : ""}>
            <Link to="/admin/inventory" onClick={handleLinkClick}>
              <FaWarehouse /> Inventory
            </Link>
          </li>

          <li className={isLinkActive("/admin/sales") ? "active" : ""}>
            <Link to="/admin/sales" onClick={handleLinkClick}>
              <FaChartLine /> Sales & Orders
            </Link>
          </li>

          <li className={isLinkActive("/admin/customers") ? "active" : ""}>
            <Link to="/admin/customers" onClick={handleLinkClick}>
              <FaUsers /> Customer Accounts
            </Link>
          </li>

          <li className={isLinkActive("/admin/suppliers") ? "active" : ""}>
            <Link to="/admin/suppliers" onClick={handleLinkClick}>
              <FaTruck /> Supplier Mgmt
            </Link>
          </li>

          <li className={isLinkActive("/admin/reports") ? "active" : ""}>
            <Link to="/admin/reports" onClick={handleLinkClick}>
              <FaFileAlt /> BI & Reports
            </Link>
          </li>

          <li className={isLinkActive("/admin/settings") ? "active" : ""}>
            <Link to="/admin/settings" onClick={handleLinkClick}>
              <FaCog /> Settings
            </Link>
          </li>
        </ul>

        <div className="sidebar-footer">
          <button className="logout-btn" onClick={handleLogout}>
            <FaSignOutAlt /> Logout
          </button>
        </div>
      </div>

      {isOpen && (
        <div className="sidebar-overlay" onClick={() => setIsOpen(false)}></div>
      )}
    </>
  );
};

export default AdminSidebar;


// ==========================================
// FILE: src\components\AiChatbot.css
// ==========================================

/* Wrapper to position everything bottom-right */
.chatbot-wrapper {
  position: fixed;
  bottom: 30px;
  right: 30px;
  z-index: 1500; /* Keep it high */
  font-family: "Segoe UI", sans-serif;
  display: flex;
  flex-direction: column;
  align-items: flex-end;

  /* CRITICAL FIX: Allow clicks to pass through the wrapper */
  pointer-events: none;
}

/* Toggle Button */
.chatbot-toggle {
  background: linear-gradient(135deg, #3e5235, #2c3e50);
  color: white;
  border: none;
  border-radius: 50px;
  padding: 15px 25px;
  cursor: pointer; /* Changed from grab to pointer */
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 16px;
  font-weight: bold;
  transition: transform 0.3s, box-shadow 0.3s;
  pointer-events: auto;
}

.chatbot-toggle:hover {
  transform: translateY(-3px); /* Retaining hover animation */
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
}

.chatbot-toggle.hide {
  display: none;
}

.toggle-icon {
  font-size: 20px;
}

/* Chat Window */
/* Chat Window */
.chatbot-window {
  width: 350px;
  height: 400px; /* REDUCED HEIGHT for better screen fit */
  background: #fff;
  border-radius: 15px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transform: scale(0);
  transform-origin: bottom right;
  transition: transform 0.3s ease;
  border: 1px solid #e0e0e0;
  margin-bottom: 10px;
  pointer-events: auto;
}

.chatbot-window.open {
  transform: scale(1);
}

/* Header */
.chatbot-header {
  background: #3e5235;
  color: white;
  padding: 15px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: default;
}

.header-info {
  display: flex;
  align-items: center;
  gap: 10px;
}
.header-info h3 {
  margin: 0;
  font-size: 16px;
}
.close-btn {
  background: none;
  border: none;
  color: white;
  font-size: 16px;
  cursor: pointer;
}

/* Messages Area */
.chatbot-messages {
  flex: 1;
  padding: 15px;
  overflow-y: auto;
  background-color: #f9f9f9;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.message {
  display: flex;
}
.message.user {
  justify-content: flex-end;
}
.message.bot {
  justify-content: flex-start;
}
.message-bubble {
  max-width: 80%;
  padding: 10px 15px;
  border-radius: 15px;
  font-size: 14px;
  line-height: 1.4;
}
.message.user .message-bubble {
  background: #3e5235;
  color: white;
  border-bottom-right-radius: 2px;
}
.message.bot .message-bubble {
  background: #e0e0e0;
  color: #333;
  border-bottom-left-radius: 2px;
}

/* Typing Animation */
.typing {
  display: flex;
  gap: 5px;
  padding: 12px 15px;
}
.typing span {
  width: 6px;
  height: 6px;
  background: #888;
  border-radius: 50%;
  animation: typing 1s infinite;
}
.typing span:nth-child(2) {
  animation-delay: 0.2s;
}
.typing span:nth-child(3) {
  animation-delay: 0.4s;
}
@keyframes typing {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-5px);
  }
}

/* Input Area */
.chatbot-input {
  padding: 10px;
  border-top: 1px solid #eee;
  display: flex;
  gap: 10px;
  background: white;
}
.chatbot-input input {
  flex: 1;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 20px;
  outline: none;
}
.chatbot-input input:focus {
  border-color: #3e5235;
}
.send-btn,
.voice-btn {
  background: none;
  border: none;
  cursor: pointer;
  color: #3e5235;
  font-size: 18px;
  transition: color 0.2s;
}
.send-btn:hover {
  color: #8c734b;
}
.voice-btn {
  color: #888;
}


// ==========================================
// FILE: src\components\AiChatbot.jsx
// ==========================================

import React, { useState, useRef, useEffect } from "react";
import "./AiChatbot.css";
import { FaRobot, FaPaperPlane, FaTimes, FaMicrophone } from "react-icons/fa";

const AiChatbot = () => {
  const [isOpen, setIsOpen] = useState(false);

  // Chat Data
  const [messages, setMessages] = useState([
    {
      id: 1,
      text: "Hello! I am GrainBot. How can I help you today? Ask about prices or tracking.",
      sender: "bot",
    },
  ]);
  const [inputText, setInputText] = useState("");
  const [isTyping, setIsTyping] = useState(false);
  const messagesEndRef = useRef(null);

  // Auto-scroll
  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [messages]);

  // Toggle Chat function
  const toggleChat = () => setIsOpen(!isOpen);

  // ================= SEND LOGIC =================
  const handleSend = () => {
    if (!inputText.trim()) return;

    const userMsg = { id: Date.now(), text: inputText, sender: "user" };
    setMessages((prev) => [...prev, userMsg]);
    setInputText("");
    setIsTyping(true);

    setTimeout(() => {
      let botResponse =
        "I am currently in simulation mode. Connect me to OpenAI to make me smart!";
      const lowerInput = userMsg.text.toLowerCase();

      if (lowerInput.includes("price") || lowerInput.includes("rate")) {
        botResponse =
          "Today's rate for Super Kernel Basmati is Rs. 11,800/40kg.";
      } else if (lowerInput.includes("track") || lowerInput.includes("order")) {
        botResponse = "Please provide your Order ID to track your shipment.";
      } else if (lowerInput.includes("hello") || lowerInput.includes("hi")) {
        botResponse =
          "Salam! Welcome to GrainBridge. Are you a Farmer or a Customer?";
      }

      const botMsg = { id: Date.now() + 1, text: botResponse, sender: "bot" };
      setMessages((prev) => [...prev, botMsg]);
      setIsTyping(false);
    }, 1500);
  };

  const handleKeyPress = (e) => {
    if (e.key === "Enter") handleSend();
  };

  return (
    <div className="chatbot-wrapper">
      {/* Chat Window */}
      <div className={`chatbot-window ${isOpen ? "open" : ""}`}>
        <div className="chatbot-header">
          <div className="header-info">
            <FaRobot />
            <h3>GrainBot AI</h3>
          </div>
          <button onClick={toggleChat} className="close-btn">
            <FaTimes />
          </button>
        </div>

        <div className="chatbot-messages">
          {messages.map((msg) => (
            <div key={msg.id} className={`message ${msg.sender}`}>
              <div className="message-bubble">{msg.text}</div>
            </div>
          ))}
          {isTyping && (
            <div className="message bot">
              <div className="message-bubble typing">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>
          )}
          <div ref={messagesEndRef} />
        </div>

        <div className="chatbot-input">
          <input
            type="text"
            placeholder="Type a message..."
            value={inputText}
            onChange={(e) => setInputText(e.target.value)}
            onKeyPress={handleKeyPress}
          />
          <button className="voice-btn">
            <FaMicrophone />
          </button>
          <button className="send-btn" onClick={handleSend}>
            <FaPaperPlane />
          </button>
        </div>
      </div>

      {/* Floating Toggle Button */}
      <button
        className={`chatbot-toggle ${isOpen ? "hide" : ""}`}
        onClick={toggleChat}
      >
        <FaRobot className="toggle-icon" />
        <span className="toggle-text">Ask AI</span>
      </button>
    </div>
  );
};

export default AiChatbot;


// ==========================================
// FILE: src\components\CustomerSidebar.css
// ==========================================

/* Sidebar Container */
.customer-sidebar {
  width: 250px;
  background-color: #fff;
  border-right: 1px solid #e0e0e0;
  height: calc(100vh - 80px);
  position: sticky;
  top: 80px;
  display: flex;
  flex-direction: column; /* Allows content to stack and push footer down */
  transition: transform 0.3s ease-in-out;
  z-index: 2000;
}

/* Header */
.sidebar-header {
  background-color: #3e5235; /* Olive Green */
  color: white;
  padding: 15px;
  text-align: center;
  font-weight: bold;
  letter-spacing: 1px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* Menu Links */
.sidebar-menu {
  list-style: none;
  padding: 0;
  margin: 0;
  flex-grow: 1; /* Occupies available space */
}

.sidebar-menu li a {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 15px 20px;
  color: #333;
  text-decoration: none;
  font-weight: 500;
  transition: all 0.3s ease;
  border-left: 4px solid transparent;
}

.sidebar-menu li a:hover {
  background-color: #f4f4f4;
  color: #8c734b; /* Gold on hover */
}

.sidebar-menu li.active a {
  background-color: #fff8e1; /* Light Gold background */
  color: #8c734b;
  border-left: 4px solid #8c734b;
}

/* NEW: Sidebar Footer for Logout */
.sidebar-footer {
  border-top: 1px solid #eee;
  padding: 15px;
}

.logout-btn {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 20px;
  background: none;
  border: none;
  color: #d32f2f; /* Consistent red color */
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
  border-radius: 6px;
  font-size: 16px;
}

.logout-btn:hover {
  background-color: #ffebee;
  color: #b71c1c;
}

/* Mobile UI Elements */
.mobile-menu-toggle {
  display: none;
}

.close-sidebar-btn {
  display: none;
  background: none;
  border: none;
  color: white;
  font-size: 20px;
  cursor: pointer;
}

.sidebar-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1099;
}

/* =========================
   MOBILE RESPONSIVENESS
   ========================= */
@media (max-width: 900px) {
  .customer-sidebar {
    position: fixed;
    left: 0;
    top: 0;
    height: 100vh;
    transform: translateX(-100%);
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.2);
    width: 260px;
    z-index: 2001;
  }

  .customer-sidebar.open {
    transform: translateX(0);
  }

  .mobile-menu-toggle {
    display: flex;
    position: fixed;
    top: 90px;
    left: 10px;
    z-index: 2000;
    background-color: #3e5235;
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    align-items: center;
    gap: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  }

  .close-sidebar-btn {
    display: block;
  }
}


// ==========================================
// FILE: src\components\CustomerSidebar.jsx
// ==========================================

import React, { useState, useEffect } from "react";
import { Link, useLocation, useNavigate } from "react-router-dom";
import "./CustomerSidebar.css";
import {
  FaThLarge,
  FaShoppingCart,
  FaHistory,
  FaTruck,
  FaMapMarkerAlt,
  FaUserCircle,
  FaCog,
  FaBars,
  FaTimes,
  FaSignOutAlt,
} from "react-icons/fa";

const CustomerSidebar = () => {
  const location = useLocation();
  const navigate = useNavigate();
  const [isOpen, setIsOpen] = useState(false);

  const isLinkActive = (path) => location.pathname === path;

  // Automatically close sidebar on route change (for mobile)
  useEffect(() => {
    setIsOpen(false);
  }, [location]);

  const handleLogout = () => {
    localStorage.removeItem("userInfo");
    navigate("/login", { replace: true });
    window.location.reload();
  };

  return (
    <>
      {/* Mobile Toggle Button */}
      <button className="mobile-menu-toggle" onClick={() => setIsOpen(true)}>
        <FaBars /> Menu
      </button>

      {/* Sidebar Container */}
      <div className={`customer-sidebar ${isOpen ? "open" : ""}`}>
        <div className="sidebar-header">
          <div className="sidebar-logo">
            <h3>Customer Portal</h3>
          </div>
          <button
            className="close-sidebar-btn"
            onClick={() => setIsOpen(false)}
          >
            <FaTimes />
          </button>
        </div>

        <ul className="sidebar-menu">
          <li className={isLinkActive("/customer/dashboard") ? "active" : ""}>
            <Link to="/customer/dashboard">
              <FaThLarge /> Dashboard
            </Link>
          </li>

          <li className={isLinkActive("/products") ? "active" : ""}>
            <Link to="/products">
              <FaShoppingCart /> Place New Order
            </Link>
          </li>

          <li className={isLinkActive("/customer/history") ? "active" : ""}>
            <Link to="/customer/history">
              <FaHistory /> Order History
            </Link>
          </li>

          <li className={isLinkActive("/customer/tracking") ? "active" : ""}>
            <Link to="/customer/tracking">
              <FaTruck /> Track Shipments
            </Link>
          </li>

          <li
            className={isLinkActive("/customer/traceability") ? "active" : ""}
          >
            <Link to="/customer/traceability">
              <FaMapMarkerAlt /> Traceability Check
            </Link>
          </li>

          <li className={isLinkActive("/customer/profile") ? "active" : ""}>
            <Link to="/customer/profile">
              <FaUserCircle /> My Profile
            </Link>
          </li>

          <li className={isLinkActive("/customer/settings") ? "active" : ""}>
            <Link to="/customer/settings">
              <FaCog /> Settings
            </Link>
          </li>
        </ul>

        {/* LOGOUT BUTTON */}
        <div className="sidebar-footer">
          <button className="logout-btn" onClick={handleLogout}>
            <FaSignOutAlt /> Logout
          </button>
        </div>
      </div>

      {/* Overlay for mobile */}
      {isOpen && (
        <div className="sidebar-overlay" onClick={() => setIsOpen(false)}></div>
      )}
    </>
  );
};

export default CustomerSidebar;


// ==========================================
// FILE: src\components\Footer.css
// ==========================================

.footer {
  background-color: #2c3e50; /* Deep Navy Blue (Matches brand better than brown) */
  color: white;
  display: flex;
  justify-content: space-between;
  padding: 60px 10%; /* More breathing room */
  border-top: 5px solid #d4af37; /* Gold top border */
  flex-wrap: wrap; /* Makes it responsive */
  gap: 30px;
}

.footer-column {
  flex: 1;
  min-width: 250px; /* Prevents squishing on small screens */
}

.footer-column h3 {
  margin-bottom: 20px;
  color: #d4af37; /* Gold headings */
  font-size: 20px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.footer-column p {
  margin-bottom: 12px;
  display: flex;
  align-items: flex-start; /* Aligns icon with top line of text */
  gap: 12px;
  font-size: 15px;
  line-height: 1.6;
  color: #e0e0e0;
}

.footer-icon {
  color: #d4af37; /* Gold icons */
  font-size: 18px;
  margin-top: 3px; /* Visual alignment fix */
}

.social-icons {
  display: flex;
  gap: 20px;
}

.social-icon {
  font-size: 24px;
  cursor: pointer;
  transition: transform 0.3s ease, color 0.3s ease;
  color: white;
}

.social-icon:hover {
  color: #d4af37;
  transform: translateY(-3px);
}

/* Responsive Design for Mobile */
@media (max-width: 768px) {
  .footer {
    flex-direction: column;
    padding: 40px 20px;
    text-align: center;
  }

  .footer-column p {
    justify-content: center; /* Centers text and icons on mobile */
  }
}


// ==========================================
// FILE: src\components\Footer.jsx
// ==========================================

import React from "react";
import "./Footer.css";
import {
  FaFacebook,
  FaTwitter,
  FaInstagram,
  FaYoutube,
  FaMapMarkerAlt,
  FaPhone,
  FaEnvelope,
  FaWhatsapp,
} from "react-icons/fa";

const Footer = () => {
  return (
    <footer className="footer">
      {/* Column 1: Physical Address */}
      <div className="footer-column">
        <h3>Head Office</h3>
        <p>
          <FaMapMarkerAlt className="footer-icon" />
          Plot #45, New Grain Market,
          <br />
          Lahore-Jaranwala Road,
          <br />
          Punjab, Pakistan.
        </p>
      </div>

      {/* Column 2: Contact Info */}
      <div className="footer-column">
        <h3>Contact Us</h3>
        <p>
          <FaPhone className="footer-icon" />
          +92 42 3123 4567 (Landline)
        </p>
        <p>
          <FaWhatsapp className="footer-icon" />
          +92 300 987 6543 (WhatsApp)
        </p>
        <p>
          <FaEnvelope className="footer-icon" />
          info@grainbridge.pk
        </p>
        <p>
          <FaEnvelope className="footer-icon" />
          sales@grainbridge.pk
        </p>
      </div>

      {/* Column 3: Social Media */}
      <div className="footer-column">
        <h3>Follow Us</h3>
        <p style={{ marginBottom: "15px", fontSize: "14px", color: "#ccc" }}>
          Stay updated with our latest harvest news and rates.
        </p>
        <div className="social-icons">
          <FaFacebook className="social-icon" />
          <FaInstagram className="social-icon" />
          <FaTwitter className="social-icon" />
          <FaYoutube className="social-icon" />
        </div>
      </div>
    </footer>
  );
};

export default Footer;


// ==========================================
// FILE: src\components\Navbar.css
// ==========================================

/* =========================
   Navbar Container
   ========================= */
.navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #3e5235; /* Dark Olive Green */
  padding: 10px 50px;
  color: white;
  border-bottom: 4px solid #8c734b; /* Brown accent line at bottom */
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  position: sticky;
  top: 0;
  z-index: 1000;
}

/* =========================
   Brand Section (Logo + Name)
   ========================= */
.navbar-brand {
  display: flex; /* Puts logo and text in a row */
  align-items: center; /* Vertically centers them perfectly */
  gap: 12px;
  text-decoration: none;
}

.logo-img {
  height: 50px; /* Final size for the cropped icon */
  width: auto;
  object-fit: contain;
}

.brand-text {
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  font-size: 34px;
  font-weight: 700;
  line-height: 1;
  letter-spacing: 0.5px;
  display: flex;
}

.text-white {
  color: #ffffff;
}

.text-gold {
  color: #c5a059; /* Muted Gold color */
}

/* =========================
   Navigation Links
   ========================= */
.navbar-links {
  list-style: none;
  display: flex;
  gap: 30px;
  align-items: center;
  margin: 0;
  padding: 0;
}

.navbar-links a {
  text-decoration: none;
  color: #f0f0f0;
  font-size: 16px;
  font-weight: 500;
  transition: color 0.3s ease;
}

.navbar-links a:hover {
  color: #d4af37; /* Gold color on hover */
}

/* =========================
   Login Button (Direct Link)
   ========================= */

/* The link wrapper for the button */
.login-link-btn {
  display: block;
}

/* The actual button styling */
.login-btn {
  background-color: #8c734b; /* Brownish Gold */
  color: white;
  border: none;
  padding: 10px 20px;
  cursor: pointer;
  font-size: 15px;
  border-radius: 4px;
  font-weight: 600;
  transition: transform 0.2s, background-color 0.2s;
}

.login-btn:hover {
  background-color: #7a6340; /* Darker brown on hover */
  transform: translateY(-1px);
}

/* =========================
   Responsive Design
   ========================= */
@media (max-width: 900px) {
  .navbar {
    flex-direction: column;
    align-items: flex-start;
    padding: 15px 20px;
  }

  .navbar-links {
    margin-top: 15px;
    /* You may want to collapse these into a column for mobile */
    /* flex-direction: column; align-items: flex-start; gap: 10px; */
  }

  .navbar-brand {
    margin-bottom: 5px;
  }
}

/* ADMIN SPECIFIC STYLES */
.admin-info {
  color: #c5a059; /* Gold accent for user name */
  font-weight: 600;
  margin-right: 15px;
}

.logout-btn {
  background-color: #d32f2f; /* Red for alert/security */
  color: white;
  border: none;
  padding: 10px 20px;
  cursor: pointer;
  font-size: 15px;
  border-radius: 4px;
  font-weight: 600;
  transition: background-color 0.2s;
  display: flex;
  align-items: center;
  gap: 8px;
}

.logout-btn:hover {
  background-color: #b71c1c;
}

/* Add this at the bottom */

@media (max-width: 900px) {
  .navbar {
    flex-direction: column;
    padding: 15px;
    height: auto; /* Allow it to grow */
  }

  .navbar-links {
    margin-top: 15px;
    flex-wrap: wrap; /* Allow links to wrap to next line */
    justify-content: center;
    gap: 15px;
  }

  .navbar-brand {
    margin-bottom: 5px;
  }
}


// ==========================================
// FILE: src\components\Navbar.jsx
// ==========================================

import React from "react";
import { Link, useLocation } from "react-router-dom"; // <-- Import useLocation
import "./Navbar.css";
import logo from "../assets/logo.png";
import { FaSignOutAlt } from "react-icons/fa"; // For Logout Icon

const Navbar = () => {
  const location = useLocation(); // Get current URL path
  // Check if the current path starts with /admin
  const isAdminRoute = location.pathname.startsWith("/admin");

  // Function to handle logout (simulated for now)
  const handleLogout = () => {
    alert("Logging out...");
    // In a real app: clear user token, then navigate to /login
    // For now, we'll navigate back to the homepage
    // window.location.href = '/login';
  };

  return (
    <nav className="navbar">
      {/* Brand Link always visible */}
      <Link to="/" className="navbar-brand">
        <img src={logo} alt="GrainBridge Logo" className="logo-img" />
        <div className="brand-text">
          <span className="text-white">Grain</span>
          <span className="text-gold">Bridge</span>
        </div>
      </Link>

      <ul className="navbar-links">
        {/* CONDITIONAL RENDERING */}
        {!isAdminRoute ? (
          <>
            {/* PUBLIC LINKS */}
            <li>
              <Link to="/">Home</Link>
            </li>
            <li>
              <Link to="/about">About Us</Link>
            </li>
            <li>
              <Link to="/products">Products</Link>
            </li>
            <li>
              <Link to="/process">Our Process</Link>
            </li>
            <li>
              <Link to="/contact">Contact</Link>
            </li>

            {/* LOGIN BUTTON */}
            <li>
              <Link to="/login" className="login-link-btn">
                <button className="login-btn">Login/Register</button>
              </Link>
            </li>
          </>
        ) : (
          <>
            {/* ADMIN LINKS */}
            <li className="admin-info">Welcome, Admin!</li>
            <li>
              <button onClick={handleLogout} className="logout-btn">
                <FaSignOutAlt /> Logout
              </button>
            </li>
          </>
        )}
      </ul>
    </nav>
  );
};

export default Navbar;


// ==========================================
// FILE: src\components\ProtectedRoute.jsx
// ==========================================

import React from "react";
import { Navigate } from "react-router-dom";

const ProtectedRoute = ({ children, allowedRoles }) => {
  // Retrieve user info from localStorage
  const userInfo = JSON.parse(localStorage.getItem("userInfo"));

  // 1. Check if user is logged in
  if (!userInfo) {
    // Redirect to login if no user info exists
    return <Navigate to="/login" replace />;
  }

  // 2. Check if the user's role is allowed for this specific route
  if (allowedRoles && !allowedRoles.includes(userInfo.role)) {
    // If unauthorized, redirect to their own dashboard or home
    const redirectPath =
      userInfo.role === "Admin"
        ? "/admin/dashboard"
        : userInfo.role === "Customer"
        ? "/customer/dashboard"
        : "/supplier/dashboard";

    return <Navigate to={redirectPath} replace />;
  }

  // 3. If authenticated and authorized, render the component (children)
  return children;
};

export default ProtectedRoute;


// ==========================================
// FILE: src\components\SupplierSidebar.css
// ==========================================

/* Sidebar Container */
.supplier-sidebar {
  width: 250px;
  background-color: #fff;
  border-right: 1px solid #e0e0e0;
  height: calc(100vh - 80px);
  position: sticky;
  top: 80px;
  display: flex;
  flex-direction: column; /* Allows footer to be pushed to bottom */
  transition: transform 0.3s ease-in-out;
  z-index: 2000;
}

/* Header */
.sidebar-header {
  background-color: #3e5235; /* Olive Green Header */
  color: white;
  padding: 15px;
  text-align: center;
  font-weight: bold;
  letter-spacing: 1px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* Menu Styles */
.sidebar-menu {
  list-style: none;
  padding: 0;
  margin: 0;
  flex-grow: 1; /* Occupies available space */
}

.sidebar-menu li a {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 15px 20px;
  color: #333;
  text-decoration: none;
  font-weight: 500;
  transition: all 0.3s ease;
  border-left: 4px solid transparent;
}

.sidebar-menu li a:hover {
  background-color: #f4f4f4;
  color: #3e5235;
}

.sidebar-menu li.active a {
  background-color: #f7fff7;
  color: #3e5235;
  border-left: 4px solid #3e5235;
  font-weight: 600;
}

/* Sidebar Footer for Logout */
.sidebar-footer {
  border-top: 1px solid #eee;
  padding: 15px;
}

.logout-btn {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 20px;
  background: none;
  border: none;
  color: #d32f2f; /* Red for Logout */
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
  border-radius: 6px;
  font-size: 16px;
}

.logout-btn:hover {
  background-color: #ffebee;
  color: #b71c1c;
}

/* Mobile UI Elements */
.mobile-menu-toggle {
  display: none;
}

.close-sidebar-btn {
  display: none;
  background: none;
  border: none;
  color: white;
  font-size: 20px;
  cursor: pointer;
}

.sidebar-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1099;
}

/* =========================
   MOBILE STYLES
   ========================= */
@media (max-width: 900px) {
  .supplier-sidebar {
    position: fixed;
    left: 0;
    top: 0;
    height: 100vh;
    transform: translateX(-100%);
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.2);
    z-index: 2001;
  }

  .supplier-sidebar.open {
    transform: translateX(0);
  }

  .mobile-menu-toggle {
    display: flex;
    position: fixed;
    top: 90px;
    left: 10px;
    z-index: 2000;
    background-color: #8c734b;
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    align-items: center;
    gap: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  }

  .close-sidebar-btn {
    display: block;
  }
}


// ==========================================
// FILE: src\components\SupplierSidebar.jsx
// ==========================================

import React, { useState } from "react";
import { Link, useLocation, useNavigate } from "react-router-dom"; // Added useNavigate
import "./SupplierSidebar.css";
import {
  FaThLarge,
  FaClipboardList,
  FaMoneyBillWave,
  FaSeedling,
  FaChartBar,
  FaUserCircle,
  FaCog,
  FaBars,
  FaTimes,
  FaSignOutAlt, // Added Logout Icon
} from "react-icons/fa";

const SupplierSidebar = () => {
  const location = useLocation();
  const navigate = useNavigate(); // Hook for redirection
  const isLinkActive = (path) => location.pathname.startsWith(path);

  // State for Mobile Toggle
  const [isOpen, setIsOpen] = useState(false);

  // Helper to close sidebar when a link is clicked
  const handleLinkClick = () => {
    setIsOpen(false);
  };

  // Logout Functionality
  const handleLogout = () => {
    // 1. Clear session data
    localStorage.removeItem("userInfo");
    // 2. Close mobile menu if open
    setIsOpen(false);
    // 3. Redirect to login
    navigate("/login", { replace: true });
    // 4. Force reload to reset all states
    window.location.reload();
  };

  return (
    <>
      {/* Mobile Toggle Button */}
      <button className="mobile-menu-toggle" onClick={() => setIsOpen(true)}>
        <FaBars /> Menu
      </button>

      {/* Sidebar Container */}
      <div className={`supplier-sidebar ${isOpen ? "open" : ""}`}>
        <div className="sidebar-header">
          <h3>Supplier Portal</h3>
          <button
            className="close-sidebar-btn"
            onClick={() => setIsOpen(false)}
          >
            <FaTimes />
          </button>
        </div>

        <ul className="sidebar-menu">
          <li className={isLinkActive("/supplier/dashboard") ? "active" : ""}>
            <Link to="/supplier/dashboard" onClick={handleLinkClick}>
              <FaThLarge /> Dashboard
            </Link>
          </li>

          <li className={isLinkActive("/supplier/demand") ? "active" : ""}>
            <Link to="/supplier/demand" onClick={handleLinkClick}>
              <FaClipboardList /> Current Demand
            </Link>
          </li>

          <li className={isLinkActive("/supplier/payments") ? "active" : ""}>
            <Link to="/supplier/payments" onClick={handleLinkClick}>
              <FaMoneyBillWave /> Payment History
            </Link>
          </li>

          <li className={isLinkActive("/supplier/quality") ? "active" : ""}>
            <Link to="/supplier/quality" onClick={handleLinkClick}>
              <FaSeedling /> Quality Scanner (AI)
            </Link>
          </li>

          <li
            className={isLinkActive("/supplier/market-rates") ? "active" : ""}
          >
            <Link to="/supplier/market-rates" onClick={handleLinkClick}>
              <FaChartBar /> Market Trends
            </Link>
          </li>

          <li className={isLinkActive("/supplier/profile") ? "active" : ""}>
            <Link to="/supplier/profile" onClick={handleLinkClick}>
              <FaUserCircle /> My Profile
            </Link>
          </li>

          <li className={isLinkActive("/supplier/settings") ? "active" : ""}>
            <Link to="/supplier/settings" onClick={handleLinkClick}>
              <FaCog /> Settings
            </Link>
          </li>
        </ul>

        {/* LOGOUT BUTTON SECTION */}
        <div className="sidebar-footer">
          <button className="logout-btn" onClick={handleLogout}>
            <FaSignOutAlt /> Logout
          </button>
        </div>
      </div>

      {/* Overlay */}
      {isOpen && (
        <div className="sidebar-overlay" onClick={() => setIsOpen(false)}></div>
      )}
    </>
  );
};

export default SupplierSidebar;


// ==========================================
// FILE: src\main.jsx
// ==========================================

import { StrictMode } from "react";
import { createRoot } from "react-dom/client";
import App from "./App.jsx";

createRoot(document.getElementById("root")).render(
  <StrictMode>
    <App />
  </StrictMode>
);


// ==========================================
// FILE: src\pages\About.css
// ==========================================

.about-container {
  font-family: "Segoe UI", sans-serif;
  color: #333;
}

/* Header Banner */
.about-header {
  height: 300px;
  background-size: cover;
  background-position: center;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.header-overlay {
  background: rgba(44, 62, 80, 0.7); /* Dark Blue overlay */
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: white;
  text-align: center;
}

.header-overlay h1 {
  font-size: 42px;
  margin-bottom: 10px;
  color: #d4af37; /* Gold */
}

/* Content Layout */
.about-content {
  max-width: 1000px;
  margin: 0 auto;
  padding: 50px 20px;
}

.story-section {
  text-align: center;
  margin-bottom: 50px;
}

.story-section h2 {
  font-size: 32px;
  color: #3e5235; /* Olive Green */
  margin-bottom: 20px;
}

.story-section p {
  font-size: 18px;
  line-height: 1.6;
  color: #555;
  margin-bottom: 15px;
}

/* Mission Grid */
.mission-grid {
  display: flex;
  gap: 20px;
  margin-bottom: 60px;
}

.mission-card {
  flex: 1;
  background: #f9f9f9;
  padding: 30px;
  border-radius: 8px;
  border-top: 4px solid #d4af37;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  text-align: center;
}

.mission-card h3 {
  color: #2c3e50;
  margin-bottom: 15px;
}

/* Stats Bar */
.stats-bar {
  display: flex;
  justify-content: space-around;
  background-color: #3e5235;
  padding: 40px;
  border-radius: 12px;
  color: white;
  text-align: center;
}

.stat-item h2 {
  font-size: 48px;
  margin: 0;
  color: #d4af37;
}

.stat-item p {
  margin-top: 5px;
  font-size: 18px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

/* Responsive */
@media (max-width: 768px) {
  .mission-grid,
  .stats-bar {
    flex-direction: column;
    gap: 20px;
  }
}


// ==========================================
// FILE: src\pages\About.jsx
// ==========================================

import React from "react";
import "./About.css";
import hero2 from "../assets/hero2.png"; // Reusing the milling image

const About = () => {
  return (
    <div className="about-container">
      {/* 1. Page Header */}
      <div
        className="about-header"
        style={{ backgroundImage: `url(${hero2})` }}
      >
        <div className="header-overlay">
          <h1>About GrainBridge</h1>
          <p>Connecting Farmers Directly to Your Table since 2001</p>
        </div>
      </div>

      {/* 2. Our Story Section */}
      <div className="about-content">
        <section className="story-section">
          <h2>Our Story</h2>
          <p>
            Located in the heart of <strong>Punjab</strong>known globally as
            the land of premium BasmatiGrainBridge started as a small
            family-owned sheller. Over the last two decades, we have evolved
            into a state-of-the-art rice processing facility.
          </p>
          <p>
            We noticed a gap in the market: Farmers were underpaid, and
            consumers were getting mixed-quality rice.
            <strong>GrainBridge was born to solve this.</strong> By using modern
            digital traceability, we ensure that every grain you buy puts money
            directly in a farmer's pocket and guarantees 100% purity for your
            family.
          </p>
        </section>

        {/* 3. Mission & Vision Cards */}
        <section className="mission-grid">
          <div className="mission-card">
            <h3>Our Mission</h3>
            <p>
              To digitize the rice supply chain, ensuring fair pricing for
              farmers and transparent, high-quality nutrition for consumers.
            </p>
          </div>
          <div className="mission-card">
            <h3>Our Vision</h3>
            <p>
              To become Pakistan's #1 transparent agri-tech brand, setting a
              global standard for food traceability.
            </p>
          </div>
          <div className="mission-card">
            <h3>Our Values</h3>
            <p>
              <strong>Purity:</strong> Zero compromise on quality.
              <br />
              <strong>Transparency:</strong> You know what you eat.
              <br />
              <strong>Community:</strong> Growing together with farmers.
            </p>
          </div>
        </section>

        {/* 4. Stats Section */}
        <section className="stats-bar">
          <div className="stat-item">
            <h2>20+</h2>
            <p>Years Experience</p>
          </div>
          <div className="stat-item">
            <h2>500+</h2>
            <p>Partner Farmers</p>
          </div>
          <div className="stat-item">
            <h2>100%</h2>
            <p>Export Quality</p>
          </div>
        </section>
      </div>
    </div>
  );
};

export default About;


// ==========================================
// FILE: src\pages\AdminCustomers.css
// ==========================================

.admin-header-flex {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 25px;
}

.refresh-btn {
  background: white;
  border: 1px solid #ddd;
  padding: 8px 15px;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
  color: #3e5235;
  transition: 0.3s;
}

.refresh-btn:hover {
  background: #f1f8ef;
  border-color: #3e5235;
}

.search-card {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 25px !important;
  margin-bottom: 25px;
}

.search-wrapper {
  position: relative;
  flex: 1;
  max-width: 500px;
}

.search-icon {
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: #8c734b;
}

.search-wrapper input {
  width: 100%;
  padding: 10px 10px 10px 40px;
  border: 1px solid #eee;
  border-radius: 8px;
  font-size: 14px;
  background: #fafafa;
}

.search-wrapper input:focus {
  outline: none;
  border-color: #8c734b;
  background: white;
}

.customer-count {
  font-size: 14px;
  color: #666;
}

/* Table Enhancements */
.cust-identity {
  display: flex;
  flex-direction: column;
}

.cust-identity span {
  font-size: 11px;
  color: #8c734b;
  font-weight: bold;
  text-transform: uppercase;
}

.contact-info p {
  margin: 0;
  font-size: 13px;
  color: #555;
  display: flex;
  align-items: center;
  gap: 6px;
}

.address-cell {
  max-width: 250px;
  font-size: 12px;
  color: #777;
}

.status-badge.active {
  background: #e8f5e9;
  color: #2e7d32;
  padding: 4px 10px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: bold;
  display: flex;
  align-items: center;
  gap: 5px;
  width: fit-content;
}

.edit-profile-btn {
  background: none;
  border: 1px solid #ddd;
  color: #555;
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 12px;
}

.edit-profile-btn:hover {
  background: #3e5235;
  color: white;
  border-color: #3e5235;
}

.loading-state,
.empty-table {
  text-align: center;
  padding: 40px;
  color: #999;
  font-style: italic;
}


// ==========================================
// FILE: src\pages\AdminCustomers.jsx
// ==========================================

import React, { useState, useEffect } from "react";
import axios from "axios";
import AdminSidebar from "../components/AdminSidebar";
import "./AdminCustomers.css";
import {
  FaUsers,
  FaSearch,
  FaEnvelope,
  FaUserEdit,
  FaSyncAlt,
  FaUserTag,
} from "react-icons/fa";

const AdminCustomers = () => {
  const [customers, setCustomers] = useState([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState("");

  const userInfo = JSON.parse(localStorage.getItem("userInfo"));
  const config = {
    headers: { Authorization: `Bearer ${userInfo?.token}` },
  };

  // 1. Fetch real customers from the database
  const fetchCustomers = async () => {
    try {
      setLoading(true);
      const { data } = await axios.get(
        "http://localhost:5000/api/auth/users",
        config
      );

      // Filter for only Customers
      const onlyCustomers = data.filter((user) => user.role === "Customer");
      setCustomers(onlyCustomers);
      setLoading(false);
    } catch (err) {
      console.error("Error fetching customers", err);
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchCustomers();
  }, []);

  // 2. Search Logic
  const filteredCustomers = customers.filter(
    (cust) =>
      cust.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
      cust.email.toLowerCase().includes(searchTerm.toLowerCase())
  );

  return (
    <div className="admin-layout">
      <AdminSidebar />
      <main className="admin-content">
        <div className="admin-header-flex">
          <h1 className="page-title">
            <FaUsers /> Customer Accounts
          </h1>
          <button className="refresh-btn" onClick={fetchCustomers}>
            <FaSyncAlt /> Sync Database
          </button>
        </div>

        {/* 3. FUNCTIONAL SEARCH BAR */}
        <div className="card search-card">
          <div className="search-wrapper">
            <FaSearch className="search-icon" />
            <input
              type="text"
              placeholder="Search by name, email, or business name..."
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
            />
          </div>
          <div className="customer-count">
            Total Customers: <strong>{customers.length}</strong>
          </div>
        </div>

        <div className="card table-card">
          {loading ? (
            <div className="loading-state">Fetching customer records...</div>
          ) : (
            <table className="admin-table">
              <thead>
                <tr>
                  <th>Customer / Company</th>
                  <th>Contact Details</th>
                  <th>Primary Address</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                {filteredCustomers.length > 0 ? (
                  filteredCustomers.map((cust) => (
                    <tr key={cust._id}>
                      <td>
                        <div className="cust-identity">
                          <strong>{cust.name}</strong>
                          <span>{cust.companyName || "Retail Buyer"}</span>
                        </div>
                      </td>
                      <td>
                        <div className="contact-info">
                          <p>
                            <FaEnvelope /> {cust.email}
                          </p>
                          <p># {cust.phone || "No phone listed"}</p>
                        </div>
                      </td>
                      <td className="address-cell">
                        {cust.address || "No address provided"}
                      </td>
                      <td>
                        <span className="status-badge active">
                          <FaUserTag /> Active
                        </span>
                      </td>
                      <td>
                        <button
                          className="edit-profile-btn"
                          onClick={() => alert(`Editing: ${cust.name}`)}
                        >
                          <FaUserEdit /> Edit
                        </button>
                      </td>
                    </tr>
                  ))
                ) : (
                  <tr>
                    <td colSpan="5" className="empty-table">
                      No customers found matching your search.
                    </td>
                  </tr>
                )}
              </tbody>
            </table>
          )}
        </div>
      </main>
    </div>
  );
};

export default AdminCustomers;


// ==========================================
// FILE: src\pages\AdminDashboard.css
// ==========================================

/* --- MAIN LAYOUT RESET --- */
.admin-layout {
  display: flex;
  flex-direction: row; /* Forces Sidebar and Content side-by-side */
  min-height: 100vh;
  background-color: #f4f6f8;
  font-family: "Inter", sans-serif;
  overflow-x: hidden;
}

/* Sidebar is handled by your component, this handles the right side */
.admin-content {
  flex: 1; /* Takes up remaining space */
  padding: 30px;
  overflow-y: auto;
  /* Removed fixed margin-left to prevent gaps */
}

.page-title {
  color: #2c3e50;
  margin-bottom: 25px;
  font-size: 1.8rem;
  font-weight: 700;
}

/* --- GRID SYSTEM --- */
.dashboard-grid {
  display: flex;
  gap: 20px;
  margin-bottom: 25px;
  flex-wrap: wrap; /* Prevents overflow on smaller screens */
}

/* --- CARDS & CONTAINERS --- */
.card {
  background: white;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  border: 1px solid #eee;
  display: flex;
  flex-direction: column;
}

.full-width {
  width: 100%;
}

/* --- CHART FIX (Critical for Recharts) --- */
/* We give the container a height so the chart knows how big to be */
.chart-box {
  min-height: 400px;
  justify-content: space-between;
}

.chart-box h3 {
  margin-bottom: 20px;
  color: #444;
  font-size: 1.1rem;
}

/* --- METRIC STAT CARDS --- */
.inventory-stats .stat-card {
  flex: 1;
  min-width: 200px; /* Ensures they don't get too squashed */
  background: white;
  padding: 25px;
  border-radius: 10px;
  text-align: center;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  border-bottom: 4px solid #3e5235; /* Nice accent color */
}

.stat-card p {
  color: #666;
  margin-bottom: 10px;
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.stat-card h2 {
  font-size: 2rem;
  color: #2c3e50;
  margin: 0;
}

/* --- ALERTS SECTION --- */
.alert-card-container {
  background-color: #fff5f5;
  border: 1px solid #f5c6cb;
  margin-bottom: 25px;
}

.alert-header {
  display: flex;
  align-items: center;
  gap: 10px;
  color: #721c24;
  margin-bottom: 15px;
}

.alert-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: white;
  padding: 10px 15px;
  border-radius: 6px;
  margin-bottom: 8px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.count-red {
  color: #dc3545;
  font-weight: bold;
  margin-right: 15px;
}

.procure-btn {
  background: #dc3545;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 4px;
  cursor: pointer;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: background 0.2s;
}

.procure-btn:hover {
  background: #c82333;
}

/* --- MODAL --- */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modal-content {
  width: 90%;
  max-width: 500px;
  background: white;
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 20px;
}

.form-group input {
  width: 100%;
  padding: 12px;
  margin: 10px 0 20px;
  border: 1px solid #ddd;
  border-radius: 6px;
  font-size: 16px;
}

.modal-actions {
  display: flex;
  gap: 15px;
}

.confirm-btn {
  flex: 1;
  background: #28a745;
  color: white;
  border: none;
  padding: 12px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
}

.cancel-btn {
  flex: 1;
  background: #6c757d;
  color: white;
  border: none;
  padding: 12px;
  border-radius: 6px;
  cursor: pointer;
}

/* --- TABLE STYLES --- */
.table-responsive {
  overflow-x: auto;
}

.admin-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

.admin-table th {
  text-align: left;
  padding: 15px;
  background-color: #f8f9fa;
  color: #495057;
}

.admin-table td {
  padding: 15px;
  border-bottom: 1px solid #eee;
}

.status {
  padding: 5px 10px;
  border-radius: 15px;
  font-size: 0.85rem;
  font-weight: 500;
}

.status.success {
  background-color: #d4edda;
  color: #155724;
}
.status.pending {
  background-color: #fff3cd;
  color: #856404;
}
.status.error {
  background-color: #f8d7da;
  color: #721c24;
}


// ==========================================
// FILE: src\pages\AdminDashboard.jsx
// ==========================================

import React, { useState, useEffect, useCallback } from "react";
import axios from "axios";
import AdminSidebar from "../components/AdminSidebar";
import "./AdminDashboard.css";
import {
  FaMapMarkerAlt,
  FaChartLine,
  FaTruck,
  FaShoppingCart,
  FaWarehouse,
  FaExclamationTriangle,
  FaBoxOpen,
  FaArrowRight,
  FaTimes,
  FaPlusCircle,
} from "react-icons/fa";

import {
  LineChart,
  Line,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
  ResponsiveContainer,
  BarChart,
  Bar,
} from "recharts";

const AdminDashboard = () => {
  // --- STATE MANAGEMENT ---
  const [stockAlerts, setStockAlerts] = useState([]);
  const [loading, setLoading] = useState(true);

  // Initialize metrics (Make sure salesTrend is here!)
  const [metrics, setMetrics] = useState({
    totalSales: 0,
    activeOrders: 0,
    millingEfficiency: 0,
    totalInventory: 0,
    inventoryDistribution: [],
    salesTrend: [], // <--- THIS IS CRITICAL FOR THE NEW CHART
  });

  // Modal State
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [selectedItem, setSelectedItem] = useState(null);
  const [restockAmount, setRestockAmount] = useState(500);

  // --- DATA FETCHING ---
  const fetchDashboardData = useCallback(async () => {
    try {
      const userInfo = JSON.parse(localStorage.getItem("userInfo"));
      if (!userInfo) return;

      const config = {
        headers: { Authorization: `Bearer ${userInfo?.token}` },
      };

      // Fetch Alerts and Metrics in parallel
      const [alertsRes, metricsRes] = await Promise.all([
        axios.get("http://localhost:5000/api/inventory/alerts", config),
        axios.get("http://localhost:5000/api/analytics/metrics", config),
      ]);

      setStockAlerts(alertsRes.data.alerts || []);
      setMetrics(metricsRes.data);
      setLoading(false);
    } catch (err) {
      console.error("Dashboard Sync Failed:", err);
      setLoading(false);
    }
  }, []);

  useEffect(() => {
    fetchDashboardData();
  }, [fetchDashboardData]);

  // --- HANDLERS ---
  const openRestockModal = (item) => {
    setSelectedItem(item);
    setRestockAmount(500);
    setIsModalOpen(true);
  };

  const closeRestockModal = () => {
    setIsModalOpen(false);
    setSelectedItem(null);
  };

  const handleRestockSubmit = async (e) => {
    e.preventDefault();
    if (!selectedItem) return;

    try {
      const userInfo = JSON.parse(localStorage.getItem("userInfo"));
      const config = {
        headers: { Authorization: `Bearer ${userInfo?.token}` },
      };

      await axios.put(
        `http://localhost:5000/api/inventory/${selectedItem._id}/restock`,
        { amount: parseInt(restockAmount) },
        config,
      );

      alert(`${selectedItem.name} restocked successfully!`);
      closeRestockModal();
      fetchDashboardData(); // Live refresh
    } catch (err) {
      console.error(err);
      alert("Failed to restock item.");
    }
  };

  // Fallback data for Bar Chart if DB is empty
  const inventoryFallback = [{ name: "No Data", quantity: 0 }];

  const recentOrders = [
    {
      id: "#1001",
      customer: "Global Foods Inc.",
      status: "success",
      date: "2025-12-15",
    },
    {
      id: "#1002",
      customer: "Asian Grocers",
      status: "pending",
      date: "2025-12-14",
    },
    {
      id: "#1003",
      customer: "Rice Depot Ltd.",
      status: "success",
      date: "2025-12-13",
    },
    {
      id: "#1004",
      customer: "Local Market Co.",
      status: "error",
      date: "2025-12-12",
    },
  ];

  return (
    <div className="admin-layout">
      <AdminSidebar />
      <main className="admin-content">
        <h1 className="page-title">Admin Dashboard</h1>

        {/* 1. ALERTS SECTION */}
        {!loading && stockAlerts.length > 0 && (
          <div className="card alert-card-container">
            <div className="alert-header">
              <FaExclamationTriangle className="warning-icon" />
              <h3>Critical Stock Alerts ({stockAlerts.length})</h3>
            </div>
            <div className="alert-list">
              {stockAlerts.map((item) => (
                <div key={item._id} className="alert-item">
                  <div className="alert-info">
                    <FaBoxOpen />
                    <span>
                      <strong>{item.name}</strong> is critically low (
                      {item.category})
                    </span>
                  </div>
                  <div className="alert-count">
                    <span className="count-red">{item.quantity} Bags</span>
                    <button
                      className="procure-btn"
                      onClick={() => openRestockModal(item)}
                    >
                      Procure <FaArrowRight />
                    </button>
                  </div>
                </div>
              ))}
            </div>
          </div>
        )}

        {/* 2. MODAL SECTION */}
        {isModalOpen && selectedItem && (
          <div className="modal-overlay">
            <div className="modal-content card">
              <div className="modal-header">
                <h3>
                  <FaPlusCircle /> Restock Inventory
                </h3>
                <button className="close-btn" onClick={closeRestockModal}>
                  <FaTimes />
                </button>
              </div>
              <form onSubmit={handleRestockSubmit}>
                <p>
                  You are restocking: <strong>{selectedItem.name}</strong>
                </p>
                <div className="form-group">
                  <label>Quantity to add (Bags):</label>
                  <input
                    type="number"
                    value={restockAmount}
                    onChange={(e) => setRestockAmount(e.target.value)}
                    min="1"
                    required
                  />
                </div>
                <div className="modal-actions">
                  <button
                    type="button"
                    className="cancel-btn"
                    onClick={closeRestockModal}
                  >
                    Cancel
                  </button>
                  <button type="submit" className="confirm-btn">
                    Confirm Restock
                  </button>
                </div>
              </form>
            </div>
          </div>
        )}

        {/* 3. METRICS CARDS */}
        <div className="dashboard-grid inventory-stats">
          <div className="stat-card">
            <p>Total Sales</p>
            <h2>PKR {((metrics.totalSales || 0) / 1000000).toFixed(1)}M</h2>
          </div>
          <div className="stat-card">
            <p>Active Orders</p>
            <h2>{metrics.activeOrders || 0}</h2>
          </div>
          <div className="stat-card">
            <p>Milling Efficiency</p>
            <h2 className="success">{metrics.millingEfficiency || 0}%</h2>
          </div>
          <div className="stat-card">
            <p>Total Inventory</p>
            <h2>{((metrics.totalInventory || 0) / 1000).toFixed(1)}K Bags</h2>
          </div>
        </div>

        {/* 4. CHARTS SECTION (This is where your code went!) */}
        <div className="dashboard-grid">
          {/* SALES LINE CHART (New Dynamic Version) */}
          <div className="card chart-box" style={{ flex: 2 }}>
            <h3>
              <FaChartLine /> Sales & Profit Trend
            </h3>
            <div style={{ width: "100%", height: 300 }}>
              <ResponsiveContainer width="100%" height="100%">
                <LineChart
                  /* USE LIVE DATA HERE */
                  data={
                    metrics.salesTrend?.length > 0 ? metrics.salesTrend : []
                  }
                  margin={{ top: 5, right: 30, left: 20, bottom: 5 }}
                >
                  <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
                  <XAxis dataKey="name" stroke="#555" />
                  <YAxis
                    yAxisId="left"
                    stroke="#3e5235"
                    tickFormatter={(v) => `${v / 1000}K`}
                  />
                  <YAxis
                    yAxisId="right"
                    orientation="right"
                    stroke="#8c734b"
                    tickFormatter={(v) => `${v / 1000}K`}
                  />
                  <Tooltip />
                  <Legend />
                  <Line
                    yAxisId="left"
                    type="monotone"
                    dataKey="sales"
                    name="Sales"
                    stroke="#3e5235"
                    strokeWidth={2}
                  />
                  <Line
                    yAxisId="right"
                    type="monotone"
                    dataKey="profit"
                    name="Profit (Est)"
                    stroke="#8c734b"
                    strokeWidth={2}
                  />
                </LineChart>
              </ResponsiveContainer>

              {/* Message if no data exists yet */}
              {metrics.salesTrend?.length === 0 && (
                <p
                  style={{
                    textAlign: "center",
                    color: "#999",
                    marginTop: "-150px",
                  }}
                >
                  No sales data recorded yet.
                </p>
              )}
            </div>
          </div>

          {/* MAP PLACEHOLDER */}
          <div className="card chart-box" style={{ flex: 1 }}>
            <h3>
              <FaTruck /> Live Operations Map
            </h3>
            <div className="map-placeholder">
              <FaMapMarkerAlt className="map-icon" />
              <p>GPS Integration Active</p>
            </div>
          </div>
        </div>

        {/* 5. LIVE INVENTORY BAR CHART */}
        <div className="dashboard-grid">
          <div className="card chart-box" style={{ flex: 1 }}>
            <h3>
              <FaWarehouse /> Current Inventory Stock
            </h3>
            <div style={{ width: "100%", height: 300 }}>
              <ResponsiveContainer width="100%" height="100%">
                <BarChart
                  data={
                    metrics.inventoryDistribution?.length > 0
                      ? metrics.inventoryDistribution
                      : inventoryFallback
                  }
                  margin={{ top: 20, right: 30, left: 20, bottom: 5 }}
                >
                  <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
                  <XAxis dataKey="name" stroke="#555" />
                  <YAxis stroke="#555" tickFormatter={(v) => `${v / 1000}K`} />
                  <Tooltip />
                  <Bar
                    dataKey="quantity"
                    fill="#3e5235"
                    radius={[4, 4, 0, 0]}
                  />
                </BarChart>
              </ResponsiveContainer>
            </div>
          </div>

          <div className="card chart-box" style={{ flex: 1 }}>
            <h3>AI Market Insight</h3>
            <div className="ai-content">
              <h4>Prediction Engine</h4>
              <p>
                <strong>Trend:</strong> Basmati prices expected to rise 10% in
                Q2.
              </p>
              <p>
                <strong>Action:</strong> Recommended to secure 5,000 tons from
                Supplier Alpha immediately.
              </p>
            </div>
          </div>
        </div>

        {/* 6. ORDERS TABLE */}
        <div className="card full-width">
          <h3>
            <FaShoppingCart /> Recent Orders
          </h3>
          <div className="table-responsive">
            <table className="admin-table">
              <thead>
                <tr>
                  <th>Order ID</th>
                  <th>Customer</th>
                  <th>Status</th>
                  <th>Date</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                {recentOrders.map((order) => (
                  <tr key={order.id}>
                    <td>{order.id}</td>
                    <td>{order.customer}</td>
                    <td>
                      <span className={`status ${order.status}`}>
                        {order.status}
                      </span>
                    </td>
                    <td>{order.date}</td>
                    <td>
                      <button className="action-btn">View</button>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      </main>
    </div>
  );
};

export default AdminDashboard;


// ==========================================
// FILE: src\pages\AdminInventory.css
// ==========================================

/* Layout Wrapper */
.admin-layout {
  display: flex;
  background-color: #f8f9fa;
  min-height: 100vh;
}

.admin-content {
  flex-grow: 1;
  padding: 30px;
  overflow-x: hidden;
}

.page-title {
  display: flex;
  align-items: center;
  gap: 12px;
  color: #333;
  font-size: 24px;
  margin-bottom: 25px;
}

.page-title svg {
  color: #3e5235; /* Olive Green Brand Color */
}

/* Stats Cards Section */
.inventory-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}

.stat-card {
  padding: 20px;
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
}

.stat-card p {
  color: #666;
  font-size: 14px;
  margin-bottom: 5px;
}

.stat-card h2 {
  font-size: 28px;
  margin: 0;
}

/* Form Card Styling (Add Section) */
.inventory-form-card {
  background: #fff;
  padding: 25px;
  border-radius: 12px;
  margin-bottom: 30px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
}

.inventory-form-card h3 {
  margin-bottom: 20px;
  color: #444;
  display: flex;
  align-items: center;
  gap: 10px;
}

.inventory-form {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 15px;
}

.inventory-form input,
.inventory-form select {
  width: 100%;
  padding: 12px;
  border: 1px solid #ddd;
  border-radius: 6px;
  font-size: 14px;
  outline: none;
  transition: border-color 0.3s;
}

.inventory-form input:focus,
.inventory-form select:focus {
  border-color: #8c734b; /* Gold accent */
}

.add-btn {
  background-color: #3e5235;
  color: white;
  border: none;
  padding: 12px;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.3s, transform 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.add-btn:hover {
  background-color: #2c3e26;
  transform: translateY(-2px);
}

/* Table Card Styling */
.card {
  background: #fff;
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
}

.admin-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
}

.admin-table th {
  text-align: left;
  background-color: #f4f6f8;
  padding: 15px;
  color: #555;
  font-weight: 600;
  border-bottom: 2px solid #eee;
}

.admin-table td {
  padding: 15px;
  border-bottom: 1px solid #f0f0f0;
  color: #333;
  vertical-align: middle;
}

/* Status Badges */
.status {
  padding: 5px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: bold;
  text-transform: uppercase;
}

.status.success {
  background-color: #e8f5e9;
  color: #2e7d32;
}

.status.pending {
  background-color: #fff3e0;
  color: #ef6c00;
}

.status.error {
  background-color: #ffebee;
  color: #d32f2f;
}

/* Action Buttons */
.action-btn {
  background: none;
  border: none;
  font-size: 18px;
  cursor: pointer;
  padding: 5px;
  transition: color 0.2s, transform 0.2s;
}

.action-btn.delete {
  color: #d32f2f;
}

.action-btn.delete:hover {
  color: #b71c1c;
  transform: scale(1.15);
}

.action-btn.edit {
  color: #1976d2;
  margin-right: 12px;
}

.action-btn.edit:hover {
  color: #1565c0;
  transform: scale(1.15);
}

/* ====================================
   MODAL STYLES (NEW)
   ==================================== */

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 3000;
}

.modal-content {
  background: white;
  padding: 30px;
  border-radius: 12px;
  width: 100%;
  max-width: 450px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  animation: modalSlideIn 0.3s ease-out;
}

@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  border-bottom: 1px solid #eee;
  padding-bottom: 15px;
}

.modal-header h3 {
  color: #3e5235;
  margin: 0;
}

.close-modal {
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
  color: #888;
  transition: color 0.2s;
}

.close-modal:hover {
  color: #333;
}

.modal-form {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.modal-form label {
  font-weight: 600;
  font-size: 14px;
  color: #555;
  margin-bottom: -5px;
}

.modal-form input {
  padding: 12px;
  border: 1px solid #ddd;
  border-radius: 6px;
  font-size: 14px;
}

.update-btn {
  background-color: #3e5235;
  color: white;
  border: none;
  padding: 14px;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
  margin-top: 10px;
  transition: background 0.3s;
}

.update-btn:hover {
  background-color: #2c3e26;
}

/* Responsive Table */
@media (max-width: 900px) {
  .admin-content {
    padding: 15px;
    padding-top: 120px; /* More space for the fixed toggle button */
  }

  .admin-table {
    display: block;
    overflow-x: auto;
  }

  .inventory-form {
    grid-template-columns: 1fr;
  }
}


// ==========================================
// FILE: src\pages\AdminInventory.jsx
// ==========================================

import React, { useState, useEffect } from "react";
import axios from "axios";
import AdminSidebar from "../components/AdminSidebar";
import "./AdminInventory.css";
import {
  FaWarehouse,
  FaPlus,
  FaTrash,
  FaEdit,
  FaBox,
  FaTimes,
} from "react-icons/fa";

const AdminInventory = () => {
  const [products, setProducts] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState("");

  // States for Add & Edit
  const [formData, setFormData] = useState({
    name: "",
    sku: "",
    category: "Basmati",
    currentStock: "",
    pricePerBag: "",
  });
  const [isEditModalOpen, setIsEditModalOpen] = useState(false);
  const [editingProduct, setEditingProduct] = useState(null);

  const API_URL = "http://localhost:5000/api/products";
  const userInfo = JSON.parse(localStorage.getItem("userInfo"));
  const config = { headers: { Authorization: `Bearer ${userInfo?.token}` } };

  const fetchProducts = async () => {
    try {
      const { data } = await axios.get(API_URL, config);
      setProducts(data);
      setLoading(false);
    } catch (err) {
      setError("Failed to fetch inventory.");
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchProducts();
  }, []);

  // ADD PRODUCT
  const handleSubmit = async (e) => {
    e.preventDefault();
    try {
      await axios.post(API_URL, formData, config);
      setFormData({
        name: "",
        sku: "",
        category: "Basmati",
        currentStock: "",
        pricePerBag: "",
      });
      fetchProducts();
    } catch (err) {
      alert("Error adding product.");
    }
  };

  // OPEN EDIT MODAL
  const openEditModal = (product) => {
    setEditingProduct(product);
    setIsEditModalOpen(true);
  };

  // UPDATE PRODUCT
  const handleUpdate = async (e) => {
    e.preventDefault();
    try {
      await axios.put(
        `${API_URL}/${editingProduct._id}`,
        editingProduct,
        config
      );
      setIsEditModalOpen(false);
      fetchProducts();
    } catch (err) {
      alert("Update failed.");
    }
  };

  // DELETE PRODUCT
  const handleDelete = async (id) => {
    if (window.confirm("Are you sure?")) {
      await axios.delete(`${API_URL}/${id}`, config);
      fetchProducts();
    }
  };

  const getStockStatus = (stock) => {
    if (stock <= 100) return { label: "Critical", class: "status error" };
    if (stock <= 500) return { label: "Low Stock", class: "status pending" };
    return { label: "Optimal", class: "status success" };
  };

  return (
    <div className="admin-layout">
      <AdminSidebar />
      <main className="admin-content">
        <h1 className="page-title">
          <FaWarehouse /> Inventory Management
        </h1>

        {/* ADD FORM */}
        <div className="card inventory-form-card">
          <h3>
            <FaPlus /> Add New Variety
          </h3>
          <form className="inventory-form" onSubmit={handleSubmit}>
            <input
              name="name"
              placeholder="Name"
              value={formData.name}
              onChange={(e) =>
                setFormData({ ...formData, name: e.target.value })
              }
              required
            />
            <input
              name="sku"
              placeholder="SKU"
              value={formData.sku}
              onChange={(e) =>
                setFormData({ ...formData, sku: e.target.value })
              }
              required
            />
            <select
              name="category"
              value={formData.category}
              onChange={(e) =>
                setFormData({ ...formData, category: e.target.value })
              }
            >
              <option value="Basmati">Basmati</option>
              <option value="Kainat">Kainat</option>
              <option value="Irri-6">Irri-6</option>
            </select>
            <input
              name="currentStock"
              type="number"
              placeholder="Stock"
              value={formData.currentStock}
              onChange={(e) =>
                setFormData({ ...formData, currentStock: e.target.value })
              }
              required
            />
            <input
              name="pricePerBag"
              type="number"
              placeholder="Price"
              value={formData.pricePerBag}
              onChange={(e) =>
                setFormData({ ...formData, pricePerBag: e.target.value })
              }
              required
            />
            <button type="submit" className="add-btn">
              Add Product
            </button>
          </form>
        </div>

        {/* TABLE */}
        <div className="card">
          <table className="admin-table">
            <thead>
              <tr>
                <th>Product</th>
                <th>SKU</th>
                <th>Stock</th>
                <th>Price</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {products.map((p) => (
                <tr key={p._id}>
                  <td>{p.name}</td>
                  <td>{p.sku}</td>
                  <td>{p.currentStock}</td>
                  <td>Rs. {p.pricePerBag}</td>
                  <td>
                    <span className={getStockStatus(p.currentStock).class}>
                      {getStockStatus(p.currentStock).label}
                    </span>
                  </td>
                  <td>
                    <button
                      className="action-btn edit"
                      onClick={() => openEditModal(p)}
                    >
                      <FaEdit />
                    </button>
                    <button
                      className="action-btn delete"
                      onClick={() => handleDelete(p._id)}
                    >
                      <FaTrash />
                    </button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>

        {/* EDIT MODAL */}
        {isEditModalOpen && (
          <div className="modal-overlay">
            <div className="modal-content">
              <div className="modal-header">
                <h3>Edit Product</h3>
                <button
                  className="close-modal"
                  onClick={() => setIsEditModalOpen(false)}
                >
                  <FaTimes />
                </button>
              </div>
              <form onSubmit={handleUpdate} className="modal-form">
                <label>Product Name</label>
                <input
                  type="text"
                  value={editingProduct.name}
                  onChange={(e) =>
                    setEditingProduct({
                      ...editingProduct,
                      name: e.target.value,
                    })
                  }
                />
                <label>Stock (Bags)</label>
                <input
                  type="number"
                  value={editingProduct.currentStock}
                  onChange={(e) =>
                    setEditingProduct({
                      ...editingProduct,
                      currentStock: e.target.value,
                    })
                  }
                />
                <label>Price (PKR)</label>
                <input
                  type="number"
                  value={editingProduct.pricePerBag}
                  onChange={(e) =>
                    setEditingProduct({
                      ...editingProduct,
                      pricePerBag: e.target.value,
                    })
                  }
                />
                <button type="submit" className="update-btn">
                  Save Changes
                </button>
              </form>
            </div>
          </div>
        )}
      </main>
    </div>
  );
};

export default AdminInventory;


// ==========================================
// FILE: src\pages\AdminMilling.css
// ==========================================

/* --- General Layout --- */
.admin-layout {
  display: flex;
  min-height: 100vh;
  background-color: #f4f7f6;
}

.admin-content {
  flex-grow: 1;
  padding: 30px;
  overflow-y: auto;
}

.page-title {
  display: flex;
  align-items: center;
  gap: 15px;
  color: #3e5235;
  margin-bottom: 30px;
  font-size: 28px;
}

/* --- Stats Grid Section --- */
.dashboard-grid.inventory-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 20px;
}

.stat-card {
  padding: 20px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.stat-card p {
  color: #777;
  font-size: 14px;
  margin-bottom: 5px;
  font-weight: 500;
}

.stat-card h2 {
  font-size: 32px;
  margin: 0;
}

/* --- Live Batch Processing Section --- */
.active-milling-card h3 {
  display: flex;
  align-items: center;
  gap: 10px;
  color: #3e5235;
  margin-bottom: 20px;
}

.live-batch-list {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.batch-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px;
  background: #ffffff;
  border-radius: 8px;
  border: 1px solid #eef0f2;
  transition: all 0.3s ease;
}

.batch-row:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  border-color: #8c734b;
}

.unit-label {
  font-size: 11px;
  font-weight: 800;
  color: #8c734b;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.batch-info {
  flex: 1;
}

.batch-info p {
  margin: 4px 0 0 0;
  font-size: 15px;
  color: #333;
}

/* --- Progress Bar Styling --- */
.batch-progress {
  flex: 2;
  padding: 0 40px;
}

.progress-text {
  font-size: 12px;
  text-align: right;
  margin-bottom: 6px;
  font-weight: 700;
  color: #3e5235;
}

.milling-progress-bg {
  height: 10px;
  background: #e9ecef;
  border-radius: 5px;
  overflow: hidden;
}

.milling-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #8c734b 0%, #3e5235 100%);
  border-radius: 5px;
  transition: width 1s ease-in-out;
}

.go-icon {
  color: #3e5235;
  font-size: 22px;
  cursor: pointer;
  opacity: 0.7;
}

.go-icon:hover {
  opacity: 1;
  transform: scale(1.1);
}

/* --- Maintenance Table Section --- */
.card-header-flex {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 25px;
}

.schedule-btn {
  background: #3e5235;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.3s;
}

.schedule-btn:hover {
  background: #2c3a26;
}

.admin-table {
  width: 100%;
  border-collapse: collapse;
}

.admin-table th {
  text-align: left;
  background-color: #f8f9fa;
  color: #555;
  padding: 15px;
  font-size: 13px;
  text-transform: uppercase;
  border-bottom: 2px solid #eee;
}

.admin-table td {
  padding: 15px;
  border-bottom: 1px solid #eee;
  font-size: 14px;
  color: #444;
}

/* --- Status Badges --- */
.status {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 700;
}

.status.success {
  background-color: #e8f5e9;
  color: #2e7d32;
}

.status.pending {
  background-color: #fff3e0;
  color: #e65100;
}

.action-btn.track {
  background: none;
  border: 1px solid #ddd;
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  color: #555;
  font-weight: 500;
  transition: all 0.2s;
}

.action-btn.track:hover {
  background: #f8f9fa;
  border-color: #8c734b;
  color: #8c734b;
}

/* --- Responsive Adjustments --- */
@media (max-width: 992px) {
  .batch-row {
    flex-direction: column;
    align-items: flex-start;
    gap: 15px;
  }

  .batch-progress {
    padding: 0;
    width: 100%;
  }
}

@media (max-width: 600px) {
  .admin-content {
    padding: 15px;
  }

  .stat-card h2 {
    font-size: 24px;
  }
}


// ==========================================
// FILE: src\pages\AdminMilling.jsx
// ==========================================

import React from "react";
import AdminSidebar from "../components/AdminSidebar";
import "./AdminMilling.css";
import {
  FaCogs,
  FaCheckCircle,
  FaTools,
  FaBolt,
  FaIndustry,
  FaArrowCircleRight,
  FaHistory,
} from "react-icons/fa";

const AdminMilling = () => {
  // Mock Data for Live Batches currently in machines
  const activeBatches = [
    {
      unit: "HULLER-A",
      batch: "BATCH-882",
      variety: "Basmati 1121",
      progress: 95,
    },
    {
      unit: "POLISHER-B",
      batch: "BATCH-885",
      variety: "Kainat 1121",
      progress: 40,
    },
  ];

  return (
    <div className="admin-layout">
      <AdminSidebar />
      <main className="admin-content">
        <h1 className="page-title">
          <FaCogs /> Milling Operation System
        </h1>

        {/* 1. REAL-TIME OPERATIONAL STATS */}
        <div
          className="dashboard-grid inventory-stats"
          style={{ marginBottom: "30px" }}
        >
          <div
            className="card stat-card"
            style={{ borderLeft: "4px solid #3e5235" }}
          >
            <div className="stat-content">
              <p>Capacity Utilization</p>
              <h2 style={{ color: "#3e5235" }}>85%</h2>
            </div>
          </div>
          <div
            className="card stat-card"
            style={{ borderLeft: "4px solid #f57c00" }}
          >
            <div className="stat-content">
              <p>Maintenance Alerts</p>
              <h2 style={{ color: "#f57c00" }}>1 Urgent</h2>
            </div>
          </div>
          <div
            className="card stat-card"
            style={{ borderLeft: "4px solid #1976d2" }}
          >
            <div className="stat-content">
              <p>Energy Consumption</p>
              <h2 style={{ color: "#1976d2" }}>450 kWh</h2>
            </div>
          </div>
        </div>

        {/* 2. LIVE PRODUCTION TRACKER */}
        <div
          className="card active-milling-card"
          style={{ marginBottom: "30px" }}
        >
          <h3>
            <FaIndustry /> Live Batch Processing
          </h3>
          <div className="live-batch-list">
            {activeBatches.map((b) => (
              <div key={b.unit} className="batch-row">
                <div className="batch-info">
                  <span className="unit-label">{b.unit}</span>
                  <p>
                    <strong>{b.variety}</strong> ({b.batch})
                  </p>
                </div>
                <div className="batch-progress">
                  <div className="progress-text">{b.progress}% Complete</div>
                  <div className="milling-progress-bg">
                    <div
                      className="milling-progress-fill"
                      style={{ width: `${b.progress}%` }}
                    ></div>
                  </div>
                </div>
                <FaArrowCircleRight className="go-icon" />
              </div>
            ))}
          </div>
        </div>

        {/* 3. UNIT STATUS & MAINTENANCE LOG */}
        <div className="card">
          <div className="card-header-flex">
            <h3>
              <FaHistory /> Unit Maintenance Log
            </h3>
            <button className="schedule-btn">+ New Maintenance Task</button>
          </div>
          <table className="admin-table">
            <thead>
              <tr>
                <th>Unit ID</th>
                <th>Process</th>
                <th>Status</th>
                <th>Efficiency</th>
                <th>Last Service</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>HULLER-A</td>
                <td>Hulling</td>
                <td>
                  <span className="status success">
                    <FaCheckCircle /> Running
                  </span>
                </td>
                <td>98%</td>
                <td>2026-01-01</td>
                <td>
                  <button className="action-btn track">View Log</button>
                </td>
              </tr>
              <tr>
                <td>POLISHER-B</td>
                <td>Polishing</td>
                <td>
                  <span className="status pending">
                    <FaBolt /> Warning
                  </span>
                </td>
                <td>85%</td>
                <td>2026-01-20</td>
                <td>
                  <button
                    className="action-btn track"
                    style={{ color: "#d32f2f", fontWeight: "bold" }}
                  >
                    Schedule Repair
                  </button>
                </td>
              </tr>
              <tr>
                <td>PACKAGING-C</td>
                <td>Packaging</td>
                <td>
                  <span className="status success">Ready</span>
                </td>
                <td>100%</td>
                <td>2025-12-15</td>
                <td>
                  <button className="action-btn track">View Log</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </main>
    </div>
  );
};

export default AdminMilling;


// ==========================================
// FILE: src\pages\AdminOrders.css
// ==========================================

/* Layout is shared with AdminInventory */
.admin-layout {
  display: flex;
  background-color: #f8f9fa;
  min-height: 100vh;
}
.admin-content {
  flex-grow: 1;
  padding: 30px;
}
.orders-stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}
/* Table Specific Styling */
.order-id {
  font-family: "Courier New", Courier, monospace;
  font-weight: bold;
  color: #8c734b;
}
.customer-info {
  display: flex;
  align-items: center;
  gap: 10px;
}
.user-icon {
  color: #777;
}
.order-item-desc {
  font-size: 13px;
  color: #555;
  margin-bottom: 4px;
}
.box-icon {
  font-size: 10px;
  color: #8c734b;
}
.amount-cell {
  font-weight: bold;
  color: #3e5235;
}
/* Status Badge Styling */
.status-badge {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: bold;
  width: fit-content;
}
.status-badge.pending {
  background: #fff3e0;
  color: #ef6c00;
}
.status-badge.shipped {
  background: #e3f2fd;
  color: #1976d2;
}
.status-badge.delivered {
  background: #e8f5e9;
  color: #2e7d32;
}
.status-badge.processing {
  background: #f3e5f5;
  color: #7b1fa2;
}
.status-badge.cancelled {
  background: #ffebee;
  color: #c62828;
}
/* Status Icon Colors */
.status-icon.pending {
  color: #ef6c00;
}
.status-icon.shipped {
  color: #1976d2;
}
.status-icon.delivered {
  color: #2e7d32;
}
/* Select Dropdown */
.status-select {
  padding: 6px 10px;
  border: 1px solid #ddd;
  border-radius: 6px;
  background: white;
  font-size: 13px;
  cursor: pointer;
}
.status-select:focus {
  border-color: #3e5235;
  outline: none;
}
.error-text {
  color: #d32f2f;
  text-align: center;
  padding: 20px;
}


// ==========================================
// FILE: src\pages\AdminOrders.jsx
// ==========================================

import React, { useState, useEffect } from "react";
import axios from "axios";
import AdminSidebar from "../components/AdminSidebar";
import "./AdminOrders.css";
import {
  FaClipboardList,
  FaTruck,
  FaCheckCircle,
  FaClock,
  FaUser,
  FaBox,
} from "react-icons/fa";

const AdminOrders = () => {
  const [orders, setOrders] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState("");

  const userInfo = JSON.parse(localStorage.getItem("userInfo"));
  const API_URL = "http://localhost:5000/api/orders";

  // 1. Fetch all orders (Admin logic is handled in the controller)
  const fetchAllOrders = async () => {
    try {
      const config = {
        headers: { Authorization: `Bearer ${userInfo?.token}` },
      };
      const { data } = await axios.get(API_URL, config);
      setOrders(data);
      setLoading(false);
    } catch (err) {
      setError("Failed to load orders. Please check your connection.");
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchAllOrders();
  }, []);

  // 2. Update Order Status (Pending -> Shipped -> Delivered)
  const handleStatusUpdate = async (orderId, newStatus) => {
    try {
      const config = {
        headers: { Authorization: `Bearer ${userInfo.token}` },
      };
      await axios.put(
        `${API_URL}/${orderId}/status`,
        { status: newStatus },
        config
      );

      // Refresh list to show updated status
      fetchAllOrders();
    } catch (err) {
      alert("Status update failed.");
    }
  };

  const getStatusIcon = (status) => {
    switch (status) {
      case "Pending":
        return <FaClock className="status-icon pending" />;
      case "Shipped":
        return <FaTruck className="status-icon shipped" />;
      case "Delivered":
        return <FaCheckCircle className="status-icon delivered" />;
      default:
        return null;
    }
  };

  return (
    <div className="admin-layout">
      <AdminSidebar />
      <main className="admin-content">
        <h1 className="page-title">
          <FaClipboardList /> Order Management
        </h1>

        {/* ORDER STATS SUMMARY */}
        <div className="orders-stats-grid">
          <div className="stat-card">
            <h3>{orders.length}</h3>
            <p>Total Orders</p>
          </div>
          <div className="stat-card">
            <h3>{orders.filter((o) => o.status === "Pending").length}</h3>
            <p>Pending Orders</p>
          </div>
          <div className="stat-card">
            <h3>{orders.filter((o) => o.status === "Delivered").length}</h3>
            <p>Successful Deliveries</p>
          </div>
        </div>

        {/* ORDERS LIST */}
        <div className="card">
          <h3>Recent Incoming Orders</h3>
          {loading ? (
            <p>Loading orders...</p>
          ) : error ? (
            <p className="error-text">{error}</p>
          ) : (
            <table className="admin-table">
              <thead>
                <tr>
                  <th>Order ID</th>
                  <th>Customer</th>
                  <th>Items</th>
                  <th>Total Amount</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {orders.map((order) => (
                  <tr key={order._id}>
                    <td className="order-id">#{order._id.slice(-6)}</td>
                    <td>
                      <div className="customer-info">
                        <FaUser className="user-icon" />
                        <span>{order.customer?.name || "Guest"}</span>
                      </div>
                    </td>
                    <td>
                      {order.items.map((item, index) => (
                        <div key={index} className="order-item-desc">
                          <FaBox className="box-icon" /> {item.product?.name} (
                          {item.quantity} Bags)
                        </div>
                      ))}
                    </td>
                    <td className="amount-cell">
                      Rs. {order.totalAmount.toLocaleString()}
                    </td>
                    <td>
                      <span
                        className={`status-badge ${order.status.toLowerCase()}`}
                      >
                        {getStatusIcon(order.status)} {order.status}
                      </span>
                    </td>
                    <td>
                      <select
                        className="status-select"
                        value={order.status}
                        onChange={(e) =>
                          handleStatusUpdate(order._id, e.target.value)
                        }
                      >
                        <option value="Pending">Pending</option>
                        <option value="Processing">Processing</option>
                        <option value="Shipped">Shipped</option>
                        <option value="Delivered">Delivered</option>
                        <option value="Cancelled">Cancelled</option>
                      </select>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          )}
        </div>
      </main>
    </div>
  );
};

export default AdminOrders;


// ==========================================
// FILE: src\pages\AdminReports.css
// ==========================================

.reports-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
}

.download-pdf-btn {
  background: #3e5235;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 10px;
}

/* Filter Card */
.filter-card {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
  padding: 15px 25px !important;
}

.filter-section {
  display: flex;
  gap: 20px;
}

.filter-item {
  display: flex;
  align-items: center;
  gap: 10px;
}

.filter-icon {
  color: #8c734b;
}

.report-select {
  padding: 8px 12px;
  border-radius: 6px;
  border: 1px solid #ddd;
  background: white;
  font-size: 14px;
}

.report-timestamp {
  font-size: 12px;
  color: #999;
}

/* CSS Bar Chart */
.bar-chart-vertical {
  display: flex;
  justify-content: space-around;
  align-items: flex-end;
  height: 250px;
  margin-top: 30px;
  border-bottom: 2px solid #eee;
  padding-bottom: 10px;
}

.bar-group {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex: 1;
}

.bar-wrapper {
  width: 50px;
  height: 200px;
  background: #f4f4f4;
  border-radius: 5px 5px 0 0;
  display: flex;
  align-items: flex-end;
}

.bar {
  width: 100%;
  border-radius: 5px 5px 0 0;
  display: flex;
  justify-content: center;
  position: relative;
  transition: all 0.6s ease;
}

.bar.olive {
  background: #3e5235;
}
.bar.gold {
  background: #8c734b;
}
.bar.orange {
  background: #f57c00;
}

.bar-value {
  position: absolute;
  top: -25px;
  font-weight: bold;
  font-size: 14px;
  color: #333;
}

.bar-label {
  margin-top: 15px;
  font-size: 12px;
  font-weight: 600;
  color: #666;
}

/* Table Styling */
.report-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
}

.report-table th {
  text-align: left;
  padding: 12px;
  border-bottom: 2px solid #eee;
  font-size: 13px;
  color: #888;
}

.report-table td {
  padding: 15px 12px;
  border-bottom: 1px solid #f9f9f9;
  font-size: 14px;
}

.score-badge {
  padding: 4px 10px;
  border-radius: 15px;
  font-size: 12px;
  font-weight: bold;
}

.score-badge.high {
  background: #e8f5e9;
  color: #2e7d32;
}
.score-badge.med {
  background: #fff3e0;
  color: #ef6c00;
}

/* Insight Card */
.insight-card {
  border-top: 4px solid #1976d2;
  padding: 25px !important;
}

.insight-header {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-bottom: 20px;
}

.ai-icon-circle {
  width: 50px;
  height: 50px;
  background: #e3f2fd;
  color: #1976d2;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
}

.insight-text {
  font-size: 18px;
  color: #333;
  margin-bottom: 15px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.trend-up {
  color: #2e7d32;
}

.insight-action-box {
  background: #f8f9fa;
  border-left: 4px solid #1976d2;
  padding: 15px;
  font-size: 14px;
  color: #555;
  line-height: 1.6;
}


// ==========================================
// FILE: src\pages\AdminReports.jsx
// ==========================================

import React, { useState, useEffect } from "react";
import axios from "axios";
import AdminSidebar from "../components/AdminSidebar";
import "./AdminReports.css";
import {
  FaChartBar,
  FaCalendarAlt,
  FaDownload,
  FaDatabase,
  FaClipboardCheck,
  FaLightbulb,
  FaArrowUp,
  FaArrowDown,
  FaFilter,
  FaSyncAlt,
} from "react-icons/fa";

const AdminReports = () => {
  // State for dynamic AI insights
  const [insight, setInsight] = useState({
    forecast: "Analyzing market trends...",
    recommendation: "Fetching latest data...",
    growth: 0,
  });
  const [loading, setLoading] = useState(true);

  // Fetch real-time analytics from backend
  const fetchMarketInsights = async () => {
    try {
      setLoading(true);
      const userInfo = JSON.parse(localStorage.getItem("userInfo"));
      const config = {
        headers: { Authorization: `Bearer ${userInfo?.token}` },
      };

      const { data } = await axios.get(
        "http://localhost:5000/api/analytics/market-insights",
        config
      );
      setInsight(data);
      setLoading(false);
    } catch (err) {
      console.error("Failed to fetch real-time market insights", err);
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchMarketInsights();
  }, []);

  return (
    <div className="admin-layout">
      <AdminSidebar />
      <main className="admin-content">
        <div className="reports-header">
          <h1 className="page-title">
            <FaChartBar /> Business Intelligence & Reports
          </h1>
          <div className="report-actions">
            <button
              className="refresh-report-btn"
              onClick={fetchMarketInsights}
            >
              <FaSyncAlt /> Refresh Data
            </button>
            <button className="download-pdf-btn">
              <FaDownload /> Export PDF
            </button>
          </div>
        </div>

        {/* ANALYTICS FILTER BAR */}
        <div className="card filter-card">
          <div className="filter-section">
            <div className="filter-item">
              <FaCalendarAlt className="filter-icon" />
              <select className="report-select">
                <option>Last 30 Days</option>
                <option>Last 90 Days</option>
                <option>Financial Year 2025-26</option>
              </select>
            </div>
            <div className="filter-item">
              <FaFilter className="filter-icon" />
              <select className="report-select">
                <option>All Product Categories</option>
                <option>Basmati (Export)</option>
                <option>Sella (Local)</option>
              </select>
            </div>
          </div>
          <div className="report-timestamp">
            Data last synced: {new Date().toLocaleTimeString()}
          </div>
        </div>

        {/* MAIN DATA GRID */}
        <div className="dashboard-grid reports-grid">
          {/* PROFITABILITY CHART (CSS-BASED) */}
          <div className="card chart-container">
            <h3>
              <FaDatabase /> Product Profitability Margin
            </h3>
            <p className="subtitle">
              Comparison based on current inventory turnover.
            </p>

            <div className="bar-chart-vertical">
              <div className="bar-group">
                <div className="bar-wrapper">
                  <div className="bar olive" style={{ height: "88%" }}>
                    <span className="bar-value">22%</span>
                  </div>
                </div>
                <span className="bar-label">Basmati</span>
              </div>
              <div className="bar-group">
                <div className="bar-wrapper">
                  <div className="bar gold" style={{ height: "72%" }}>
                    <span className="bar-value">18%</span>
                  </div>
                </div>
                <span className="bar-label">Super Kernel</span>
              </div>
              <div className="bar-group">
                <div className="bar-wrapper">
                  <div className="bar orange" style={{ height: "48%" }}>
                    <span className="bar-value">12%</span>
                  </div>
                </div>
                <span className="bar-label">Economy</span>
              </div>
            </div>
          </div>

          {/* TOP SUPPLIERS TABLE */}
          <div className="card table-container">
            <h3>
              <FaClipboardCheck /> High-Performance Suppliers
            </h3>
            <table className="report-table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Supplier Entity</th>
                  <th>Quality Score</th>
                  <th>Volume (Tons)</th>
                </tr>
              </thead>
              <tbody>
                <tr className="top-rank">
                  <td>1</td>
                  <td>
                    <strong>Gujranwala Agri</strong>
                  </td>
                  <td>
                    <span className="score-badge high">9.5</span>
                  </td>
                  <td>480</td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>
                    <strong>Nasir Khan Farms</strong>
                  </td>
                  <td>
                    <span className="score-badge high">9.2</span>
                  </td>
                  <td>720</td>
                </tr>
                <tr>
                  <td>3</td>
                  <td>
                    <strong>Multan Growers</strong>
                  </td>
                  <td>
                    <span className="score-badge med">8.8</span>
                  </td>
                  <td>290</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        {/* PREDICTIVE AI INSIGHT (CONNECTED TO BACKEND) */}
        <div className="card insight-card">
          <div className="insight-header">
            <div className="ai-icon-circle">
              <FaLightbulb />
            </div>
            <div>
              <h3>Predictive Strategic Insight</h3>
              <p>Powered by Real-Time Sales Volume Analysis</p>
            </div>
          </div>

          <div className="insight-body">
            {loading ? (
              <div className="loading-insight">
                Recalculating market trends...
              </div>
            ) : (
              <>
                <p className="insight-text">
                  {insight.growth >= 0 ? (
                    <FaArrowUp className="trend-up" />
                  ) : (
                    <FaArrowDown
                      className="trend-down"
                      style={{ color: "#d32f2f" }}
                    />
                  )}
                  Forecast: <strong>{insight.forecast}</strong>
                </p>
                <div className="insight-action-box">
                  <strong>Strategy Recommendation:</strong>{" "}
                  {insight.recommendation}
                </div>
              </>
            )}
          </div>
        </div>
      </main>
    </div>
  );
};

export default AdminReports;


// ==========================================
// FILE: src\pages\AdminSales.css
// ==========================================

.sales-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.refresh-btn {
  background: #f4f4f4;
  border: 1px solid #ddd;
  padding: 8px 15px;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  transition: all 0.3s;
}

.refresh-btn:hover {
  background: #eee;
  color: #3e5235;
}

.table-title-area {
  margin-bottom: 20px;
}
.table-title-area p {
  font-size: 13px;
  color: #777;
  margin-top: 5px;
}

.order-id {
  font-family: monospace;
  font-weight: bold;
  color: #8c734b;
  font-size: 15px;
}

.cust-info {
  display: flex;
  flex-direction: column;
}
.cust-info span {
  font-size: 11px;
  color: #888;
  text-transform: uppercase;
}

.price-bold {
  font-weight: 800;
  color: #3e5235;
}

.action-button-group {
  display: flex;
  gap: 10px;
}

.ship-btn {
  background: #3e5235;
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 12px;
}

.ship-btn:hover {
  background: #2c3e26;
}

.invoice-btn {
  background: white;
  color: #555;
  border: 1px solid #ddd;
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 12px;
}

.invoice-btn:hover {
  border-color: #8c734b;
  color: #8c734b;
}

.loading-spinner-box {
  text-align: center;
  padding: 50px;
  font-weight: bold;
  color: #3e5235;
}

/* Status Classes */
.status.pending {
  background: #fff3e0;
  color: #ef6c00;
}
.status.processing {
  background: #e3f2fd;
  color: #1976d2;
}
.status.success {
  background: #e8f5e9;
  color: #2e7d32;
}
.status.error {
  background: #ffebee;
  color: #c62828;
}


// ==========================================
// FILE: src\pages\AdminSales.jsx
// ==========================================

import React, { useState, useEffect } from "react";
import axios from "axios";
import AdminSidebar from "../components/AdminSidebar";
import "./AdminSales.css";
import {
  FaChartLine,
  FaCheck,
  FaTimes,
  FaShippingFast,
  FaFileInvoice,
  FaSyncAlt,
} from "react-icons/fa";

const AdminSales = () => {
  const [orders, setOrders] = useState([]);
  const [loading, setLoading] = useState(true);
  const [stats, setStats] = useState({
    totalRevenue: 0,
    avgMargin: "19.2%",
    pendingShips: 0,
  });

  const userInfo = JSON.parse(localStorage.getItem("userInfo"));
  const config = { headers: { Authorization: `Bearer ${userInfo?.token}` } };

  const fetchOrders = async () => {
    try {
      setLoading(true);
      const { data } = await axios.get(
        "http://localhost:5000/api/orders",
        config
      );
      setOrders(data);

      // Calculate basic stats from real data
      const revenue = data.reduce((acc, curr) => acc + curr.totalAmount, 0);
      const pending = data.filter(
        (o) => o.status === "Processing" || o.status === "Pending"
      ).length;

      setStats((prev) => ({
        ...prev,
        totalRevenue: revenue,
        pendingShips: pending,
      }));
      setLoading(false);
    } catch (err) {
      console.error("Error fetching sales data", err);
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchOrders();
  }, []);

  const updateStatus = async (id, newStatus) => {
    try {
      await axios.put(
        `http://localhost:5000/api/orders/${id}/status`,
        { status: newStatus },
        config
      );
      fetchOrders(); // Refresh data
      alert(`Order ${id.slice(-6)} updated to ${newStatus}`);
    } catch (err) {
      alert("Failed to update status");
    }
  };

  const getStatusClass = (status) => {
    switch (status) {
      case "Shipped":
        return "status processing";
      case "Delivered":
        return "status success";
      case "Pending":
        return "status pending";
      case "Processing":
        return "status pending";
      case "Cancelled":
        return "status error";
      default:
        return "status";
    }
  };

  return (
    <div className="admin-layout">
      <AdminSidebar />
      <main className="admin-content">
        <div className="sales-header">
          <h1 className="page-title">
            <FaChartLine /> Sales & Order Fulfillment
          </h1>
          <button className="refresh-btn" onClick={fetchOrders}>
            <FaSyncAlt /> Refresh Ledger
          </button>
        </div>

        {/* 1. KEY PERFORMANCE INDICATORS */}
        <div
          className="dashboard-grid inventory-stats"
          style={{ marginBottom: "30px" }}
        >
          <div
            className="card stat-card"
            style={{ borderLeft: "4px solid #3e5235" }}
          >
            <p>Total Revenue (Accumulated)</p>
            <h2>Rs. {stats.totalRevenue.toLocaleString()}</h2>
          </div>
          <div
            className="card stat-card"
            style={{ borderLeft: "4px solid #8c734b" }}
          >
            <p>Target Margin</p>
            <h2 style={{ color: "#8c734b" }}>{stats.avgMargin}</h2>
          </div>
          <div
            className="card stat-card"
            style={{ borderLeft: "4px solid #1976d2" }}
          >
            <p>Awaiting Action</p>
            <h2 style={{ color: "#1976d2" }}>{stats.pendingShips}</h2>
          </div>
        </div>

        {/* 2. SALES TABLE */}
        <div className="card sales-table-card">
          <div className="table-title-area">
            <h3>Recent Sales Ledger</h3>
            <p>Real-time order tracking from customer portal</p>
          </div>

          {loading ? (
            <div className="loading-spinner-box">Loading Ledger...</div>
          ) : (
            <table className="admin-table">
              <thead>
                <tr>
                  <th>Order Ref</th>
                  <th>Date</th>
                  <th>Customer / Company</th>
                  <th>Total Amount</th>
                  <th>Status</th>
                  <th>Fulfillment Action</th>
                </tr>
              </thead>
              <tbody>
                {orders.length > 0 ? (
                  orders.map((order) => (
                    <tr key={order._id}>
                      <td className="order-id">
                        #{order._id.slice(-6).toUpperCase()}
                      </td>
                      <td>{new Date(order.createdAt).toLocaleDateString()}</td>
                      <td>
                        <div className="cust-info">
                          <strong>{order.customer?.name}</strong>
                          <span>
                            {order.customer?.companyName || "Retail Client"}
                          </span>
                        </div>
                      </td>
                      <td className="price-bold">
                        Rs. {order.totalAmount.toLocaleString()}
                      </td>
                      <td>
                        <span className={getStatusClass(order.status)}>
                          {order.status}
                        </span>
                      </td>
                      <td>
                        <div className="action-button-group">
                          {order.status === "Pending" ||
                          order.status === "Processing" ? (
                            <button
                              className="ship-btn"
                              onClick={() => updateStatus(order._id, "Shipped")}
                            >
                              <FaShippingFast /> Dispatch
                            </button>
                          ) : (
                            <button className="invoice-btn">
                              <FaFileInvoice /> Invoice
                            </button>
                          )}
                        </div>
                      </td>
                    </tr>
                  ))
                ) : (
                  <tr>
                    <td colSpan="6" style={{ textAlign: "center" }}>
                      No sales recorded yet.
                    </td>
                  </tr>
                )}
              </tbody>
            </table>
          )}
        </div>
      </main>
    </div>
  );
};

export default AdminSales;


// ==========================================
// FILE: src\pages\AdminSuppliers.css
// ==========================================

.admin-table td {
  vertical-align: middle;
}

.status-badge {
  padding: 5px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: bold;
}

.action-btn.track {
  display: flex;
  align-items: center;
  gap: 5px;
  background: #f4f4f4;
  border: 1px solid #ddd;
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.3s;
}

.action-btn.track:hover {
  background: #3e5235;
  color: white;
}

.error-text {
  color: #d32f2f;
  text-align: center;
  font-weight: bold;
}


// ==========================================
// FILE: src\pages\AdminSuppliers.jsx
// ==========================================

import React, { useState, useEffect } from "react";
import axios from "axios";
import AdminSidebar from "../components/AdminSidebar";
import "./AdminSuppliers.css"; // Ensure you create this or keep AdminDashboard.css
import {
  FaTruck,
  FaFileContract,
  FaChartBar,
  FaUserEdit,
  FaMoneyBillAlt,
  FaUserTie,
  FaPhoneAlt,
  FaMapMarkerAlt,
} from "react-icons/fa";

const AdminSuppliers = () => {
  const [suppliers, setSuppliers] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState("");

  const userInfo = JSON.parse(localStorage.getItem("userInfo"));
  const config = {
    headers: { Authorization: `Bearer ${userInfo?.token}` },
  };

  // 1. Fetch real suppliers from the backend
  useEffect(() => {
    const fetchSuppliers = async () => {
      try {
        // We call our auth endpoint to get users and filter by role
        const { data } = await axios.get(
          "http://localhost:5000/api/auth/users",
          config
        );
        const supplierList = data.filter((user) => user.role === "Supplier");
        setSuppliers(supplierList);
        setLoading(false);
      } catch (err) {
        setError("Failed to fetch supplier data.");
        setLoading(false);
      }
    };
    fetchSuppliers();
  }, []);

  // Helper for performance status (since this isn't in DB yet, we randomize for UI)
  const getStatusClass = (id) => {
    const statuses = ["status success", "status pending", "status success"];
    return statuses[id % 3];
  };

  return (
    <div className="admin-layout">
      <AdminSidebar />
      <main className="admin-content">
        <h1 className="page-title">
          <FaTruck /> Supplier Management
        </h1>

        {/* STATS OVERVIEW */}
        <div
          className="dashboard-grid inventory-stats"
          style={{ marginBottom: "30px" }}
        >
          <div
            className="card stat-card"
            style={{ borderLeft: "4px solid #3e5235" }}
          >
            <p>Total Active Suppliers</p>
            <h2>{suppliers.length}</h2>
          </div>
          <div
            className="card stat-card"
            style={{ borderLeft: "4px solid #f57c00" }}
          >
            <p>Verification Pending</p>
            <h2 style={{ color: "#f57c00" }}>0</h2>
          </div>
          <div
            className="card stat-card"
            style={{ borderLeft: "4px solid #1976d2" }}
          >
            <p>Region Coverage</p>
            <h2 style={{ color: "#1976d2" }}>Punjab</h2>
          </div>
        </div>

        {/* SUPPLIER TABLE */}
        <div className="card">
          <h3>Supplier Roster and Contact Details</h3>
          {loading ? (
            <p>Loading suppliers...</p>
          ) : error ? (
            <p className="error-text">{error}</p>
          ) : (
            <table className="admin-table">
              <thead>
                <tr>
                  <th>Mill / Company</th>
                  <th>Contact Person</th>
                  <th>Contact Details</th>
                  <th>Location</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                {suppliers.length > 0 ? (
                  suppliers.map((sup, index) => (
                    <tr key={sup._id}>
                      <td style={{ fontWeight: "bold", color: "#3e5235" }}>
                        {sup.companyName || "Independent Farmer"}
                      </td>
                      <td>
                        <FaUserTie
                          style={{ marginRight: "8px", color: "#8c734b" }}
                        />
                        {sup.name}
                      </td>
                      <td>
                        <div style={{ fontSize: "13px" }}>
                          <FaPhoneAlt style={{ marginRight: "5px" }} />{" "}
                          {sup.phone || "No Phone"}
                        </div>
                        <div style={{ fontSize: "11px", color: "#777" }}>
                          {sup.email}
                        </div>
                      </td>
                      <td>
                        <FaMapMarkerAlt
                          style={{ marginRight: "5px", color: "#d32f2f" }}
                        />
                        {sup.address || "Gujranwala"}
                      </td>
                      <td>
                        <span className={getStatusClass(index)}>Verified</span>
                      </td>
                      <td>
                        <button className="action-btn track">
                          <FaUserEdit /> Profile
                        </button>
                      </td>
                    </tr>
                  ))
                ) : (
                  <tr>
                    <td
                      colSpan="6"
                      style={{ textAlign: "center", padding: "20px" }}
                    >
                      No suppliers registered in the system yet.
                    </td>
                  </tr>
                )}
              </tbody>
            </table>
          )}
        </div>
      </main>
    </div>
  );
};

export default AdminSuppliers;


// ==========================================
// FILE: src\pages\Contact.css
// ==========================================

/* Shared Hero Style */

.contact-hero {
  background: linear-gradient(rgba(62, 82, 53, 0.9), rgba(62, 82, 53, 0.9)),
    url("../assets/hero1.png");
  background-size: cover;
  padding: 100px 10%;
  text-align: center;
  color: white;
}

.contact-hero h1 {
  font-size: 42px;
  margin-bottom: 10px;
}

.contact-hero p {
  color: #8c734b;
  font-weight: bold;
}

/* Contact Specifics */
.contact-container {
  padding: 80px 10%;
  display: grid;
  grid-template-columns: 1fr 2.5fr;
  gap: 50px;
}
.info-card {
  background: white;
  padding: 25px;
  border-radius: 10px;
  text-align: center;
  margin-bottom: 20px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
}
.i-icon {
  font-size: 24px;
  color: #8c734b;
  margin-bottom: 10px;
}
.contact-form-wrapper {
  padding: 40px !important;
}
.input-row {
  display: flex;
  gap: 20px;
  margin-bottom: 20px;
}
.input-row input {
  flex: 1;
}
.contact-main-form input,
.contact-main-form textarea {
  width: 100%;
  padding: 12px;
  border: 1px solid #ddd;
  border-radius: 6px;
  margin-bottom: 20px;
  background: #fafafa;
}
.submit-btn {
  background: #3e5235;
  color: white;
  border: none;
  padding: 15px 30px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
  display: flex;
  align-items: center;
  gap: 10px;
}

@media (max-width: 768px) {
  .contact-container {
    grid-template-columns: 1fr;
  }
  .input-row {
    flex-direction: column;
  }
}


// ==========================================
// FILE: src\pages\Contact.jsx
// ==========================================

import React from "react";
import "./Contact.css";
import {
  FaPhoneAlt,
  FaEnvelope,
  FaMapMarkerAlt,
  FaPaperPlane,
  FaClock,
} from "react-icons/fa";

const Contact = () => {
  return (
    <div className="contact-page">
      <header className="contact-hero">
        <h1>Connect with GrainBridge</h1>
        <p>We are ready to support your retail or wholesale needs.</p>
      </header>

      <div className="contact-container">
        <div className="contact-details-grid">
          <div className="info-card">
            <FaPhoneAlt className="i-icon" />
            <h4>Call Us</h4>
            <p>+92 300 1234567</p>
          </div>
          <div className="info-card">
            <FaEnvelope className="i-icon" />
            <h4>Email Us</h4>
            <p>support@grainbridge.com</p>
          </div>
          <div className="info-card">
            <FaMapMarkerAlt className="i-icon" />
            <h4>Visit Us</h4>
            <p>Industrial Area, Gujranwala, Pakistan</p>
          </div>
          <div className="info-card">
            <FaClock className="i-icon" />
            <h4>Hours</h4>
            <p>Mon - Sat: 9:00 AM - 6:00 PM</p>
          </div>
        </div>

        <div className="contact-form-wrapper card">
          <h3>Send a Message</h3>
          <form className="contact-main-form">
            <div className="input-row">
              <input type="text" placeholder="Your Name" required />
              <input type="email" placeholder="Email Address" required />
            </div>
            <input type="text" placeholder="Subject" required />
            <textarea
              rows="6"
              placeholder="Tell us about your requirements..."
              required
            ></textarea>
            <button type="submit" className="submit-btn">
              <FaPaperPlane /> Send Message
            </button>
          </form>
        </div>
      </div>
    </div>
  );
};

export default Contact;


// ==========================================
// FILE: src\pages\CustomerDashboard.css
// ==========================================

/* --- LAYOUT --- */
.customer-layout {
  display: flex;
  min-height: 100vh;
  background-color: #f8f9fa;
  font-family: "Inter", sans-serif;
}

.customer-content {
  flex: 1;
  padding: 30px;
  position: relative;
}

/* --- HEADER --- */
.dashboard-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
}

.page-title {
  font-size: 2rem;
  color: #2c3e50;
  margin-bottom: 5px;
}
.subtitle {
  color: #7f8c8d;
}

.header-actions {
  display: flex;
  gap: 20px;
  align-items: center;
}

.view-orders-btn {
  background: white;
  border: 1px solid #ddd;
  padding: 10px 15px;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  color: #555;
  font-weight: 500;
}

.cart-trigger {
  position: relative;
  font-size: 1.8rem;
  color: #3e5235;
  cursor: pointer;
  transition: transform 0.2s;
}
.cart-trigger:hover {
  transform: scale(1.1);
}

.badge {
  position: absolute;
  top: -5px;
  right: -8px;
  background: #e74c3c;
  color: white;
  font-size: 0.75rem;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}

/* --- PRODUCT GRID --- */
.product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 25px;
}

.product-card {
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  overflow: hidden;
  transition: transform 0.2s;
  border: 1px solid #eee;
}

.product-card:hover {
  transform: translateY(-5px);
}

.card-image {
  height: 140px;
  background: #f1f3f5;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.product-icon {
  font-size: 4rem;
  color: #adb5bd;
}

.category-badge {
  position: absolute;
  top: 10px;
  right: 10px;
  background: rgba(255, 255, 255, 0.9);
  padding: 4px 10px;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 600;
  color: #555;
}

.card-details {
  padding: 20px;
}
.card-details h3 {
  font-size: 1.1rem;
  margin-bottom: 5px;
  color: #333;
}

.stock-status {
  font-size: 0.85rem;
  margin-bottom: 15px;
}
.in-stock {
  color: #27ae60;
}
.out-stock {
  color: #e74c3c;
}

.price-row {
  display: flex;
  align-items: baseline;
  gap: 5px;
  margin-bottom: 15px;
}
.price {
  font-size: 1.4rem;
  font-weight: 700;
  color: #3e5235;
}
.unit {
  color: #999;
  font-size: 0.9rem;
}

.add-to-cart-btn {
  width: 100%;
  background: #3e5235;
  color: white;
  border: none;
  padding: 12px;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}
.add-to-cart-btn:hover {
  background: #2d3e26;
}
.add-to-cart-btn:disabled {
  background: #ccc;
  cursor: not-allowed;
}

/* --- CART SIDEBAR --- */
.cart-sidebar {
  position: fixed;
  top: 0;
  right: -400px; /* Hidden by default */
  width: 400px;
  height: 100vh;
  background: white;
  box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
  z-index: 1000;
  transition: right 0.3s ease-in-out;
  display: flex;
  flex-direction: column;
}

.cart-sidebar.open {
  right: 0;
}

.cart-header {
  padding: 20px;
  border-bottom: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #f8f9fa;
}

.close-cart {
  background: none;
  border: none;
  font-size: 1.2rem;
  cursor: pointer;
  color: #777;
}

.cart-body {
  flex: 1;
  padding: 20px;
  overflow-y: auto;
}

.cart-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
  padding-bottom: 15px;
  border-bottom: 1px solid #f1f1f1;
}

.item-total {
  font-weight: bold;
  color: #333;
  margin-right: 15px;
}
.remove-btn {
  color: #e74c3c;
  background: none;
  border: none;
  cursor: pointer;
  text-decoration: underline;
  font-size: 0.85rem;
}

.cart-footer {
  padding: 25px;
  border-top: 2px solid #eee;
  background: white;
}
.cart-total {
  display: flex;
  justify-content: space-between;
  font-size: 1.2rem;
  font-weight: 800;
  margin-bottom: 15px;
}

.checkout-btn {
  width: 100%;
  background: #e67e22;
  color: white;
  border: none;
  padding: 15px;
  border-radius: 8px;
  font-size: 1.1rem;
  font-weight: bold;
  cursor: pointer;
}
.checkout-btn:hover {
  background: #d35400;
}

.cart-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.4);
  z-index: 900;
}


// ==========================================
// FILE: src\pages\CustomerDashboard.jsx
// ==========================================

import React, { useState, useEffect } from "react";
import axios from "axios";
import { useNavigate } from "react-router-dom";
import CustomerSidebar from "../components/CustomerSidebar";
import "./CustomerDashboard.css";
import {
  FaShoppingCart,
  FaTimes,
  FaBoxOpen,
  FaSearch,
  FaHistory,
} from "react-icons/fa";

const CustomerDashboard = () => {
  const navigate = useNavigate();
  const [products, setProducts] = useState([]);
  const [loading, setLoading] = useState(true);
  const [userInfo, setUserInfo] = useState(null);

  // --- CART STATE ---
  const [cart, setCart] = useState([]);
  const [isCartOpen, setIsCartOpen] = useState(false);

  // 1. INITIAL LOAD (Auth & Products)
  useEffect(() => {
    const initData = async () => {
      const user = JSON.parse(localStorage.getItem("userInfo"));
      if (!user) {
        navigate("/");
        return;
      }
      setUserInfo(user);

      try {
        const config = { headers: { Authorization: `Bearer ${user.token}` } };
        // Fetch ALL inventory items
        const { data } = await axios.get(
          "http://localhost:5000/api/inventory",
          config,
        );

        // Handle different response structures (array vs object)
        const items = Array.isArray(data) ? data : data.items || [];
        setProducts(items);
        setLoading(false);
      } catch (err) {
        console.error("Error fetching market data", err);
        setLoading(false);
      }
    };
    initData();
  }, [navigate]);

  // 2. CART ACTIONS
  const addToCart = (product) => {
    const existItem = cart.find((x) => x._id === product._id);
    if (existItem) {
      setCart(
        cart.map((x) =>
          x._id === product._id ? { ...existItem, qty: existItem.qty + 1 } : x,
        ),
      );
    } else {
      setCart([...cart, { ...product, qty: 1 }]);
      setIsCartOpen(true); // Auto-open cart on add
    }
  };

  const removeFromCart = (id) => {
    setCart(cart.filter((x) => x._id !== id));
  };

  const calculateTotal = () => {
    return cart.reduce(
      (acc, item) => acc + item.qty * (item.pricePerBag || 5000),
      0,
    );
  };

  // 3. CHECKOUT HANDLER (Connects to Backend)
  const handleCheckout = async () => {
    if (cart.length === 0) return;

    try {
      const config = { headers: { Authorization: `Bearer ${userInfo.token}` } };

      const orderPayload = {
        items: cart.map((item) => ({
          product: item._id,
          quantity: item.qty,
          priceAtOrder: item.pricePerBag || 5000,
        })),
        totalAmount: calculateTotal(),
        shippingAddress: userInfo.address || "Default Address",
        status: "Pending",
      };

      await axios.post(
        "http://localhost:5000/api/orders",
        orderPayload,
        config,
      );

      alert(" Order Placed Successfully! The Admin has been notified.");
      setCart([]);
      setIsCartOpen(false);
      // Optional: Refresh order history here
    } catch (error) {
      console.error("Checkout Failed", error);
      alert("Order failed. Please try again.");
    }
  };

  return (
    <div className="customer-layout">
      <CustomerSidebar />

      <main className="customer-content">
        {/* TOP HEADER */}
        <div className="dashboard-header">
          <div>
            <h1 className="page-title">GrainBridge Market</h1>
            <p className="subtitle">
              Welcome, {userInfo?.name}. Select your stock.
            </p>
          </div>

          <div className="header-actions">
            <button className="view-orders-btn">
              <FaHistory /> Order History
            </button>
            <div className="cart-trigger" onClick={() => setIsCartOpen(true)}>
              <FaShoppingCart />
              {cart.length > 0 && (
                <span className="badge">
                  {cart.reduce((a, c) => a + c.qty, 0)}
                </span>
              )}
            </div>
          </div>
        </div>

        {/* MAIN PRODUCT GRID */}
        {loading ? (
          <div className="loading-state">Loading fresh harvest...</div>
        ) : (
          <div className="product-grid">
            {products.map((product) => (
              <div key={product._id} className="product-card">
                <div className="card-image">
                  <FaBoxOpen className="product-icon" />
                  <span className="category-badge">{product.category}</span>
                </div>
                <div className="card-details">
                  <h3>{product.name}</h3>
                  <p className="stock-status">
                    {product.quantity > 0 ? (
                      <span className="in-stock">
                        In Stock: {product.quantity} Bags
                      </span>
                    ) : (
                      <span className="out-stock">Out of Stock</span>
                    )}
                  </p>
                  <div className="price-row">
                    <span className="price">
                      Rs. {product.pricePerBag || 5000}
                    </span>
                    <span className="unit">/ 50kg</span>
                  </div>
                  <button
                    className="add-to-cart-btn"
                    onClick={() => addToCart(product)}
                    disabled={product.quantity <= 0}
                  >
                    {product.quantity > 0 ? "Add to Cart" : "Sold Out"}
                  </button>
                </div>
              </div>
            ))}
          </div>
        )}
      </main>

      {/* SHOPPING CART SIDEBAR */}
      <div className={`cart-sidebar ${isCartOpen ? "open" : ""}`}>
        <div className="cart-header">
          <h2>Your Cart ({cart.length})</h2>
          <button className="close-cart" onClick={() => setIsCartOpen(false)}>
            <FaTimes />
          </button>
        </div>

        <div className="cart-body">
          {cart.length === 0 ? (
            <div className="empty-cart-msg">
              Your cart is empty. Start shopping!
            </div>
          ) : (
            cart.map((item) => (
              <div key={item._id} className="cart-item">
                <div className="item-info">
                  <h4>{item.name}</h4>
                  <p>
                    Rs. {item.pricePerBag || 5000} x {item.qty}
                  </p>
                </div>
                <div className="item-actions">
                  <span className="item-total">
                    Rs.{" "}
                    {(item.qty * (item.pricePerBag || 5000)).toLocaleString()}
                  </span>
                  <button
                    className="remove-btn"
                    onClick={() => removeFromCart(item._id)}
                  >
                    Remove
                  </button>
                </div>
              </div>
            ))
          )}
        </div>

        {cart.length > 0 && (
          <div className="cart-footer">
            <div className="cart-total">
              <span>Total:</span>
              <span>Rs. {calculateTotal().toLocaleString()}</span>
            </div>
            <button className="checkout-btn" onClick={handleCheckout}>
              Confirm Order
            </button>
          </div>
        )}
      </div>

      {/* OVERLAY BACKDROP */}
      {isCartOpen && (
        <div
          className="cart-backdrop"
          onClick={() => setIsCartOpen(false)}
        ></div>
      )}
    </div>
  );
};

export default CustomerDashboard;


// ==========================================
// FILE: src\pages\CustomerHistory.css
// ==========================================

.history-container {
  margin-top: 20px;
}

.empty-history {
  text-align: center;
  padding: 50px 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 15px;
}

.shop-now-btn {
  background-color: #3e5235;
  color: white;
  border: none;
  padding: 10px 25px;
  border-radius: 25px;
  font-weight: bold;
  cursor: pointer;
}

/* Order History Card */
.order-history-card {
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  margin-bottom: 20px;
  overflow: hidden;
  border: 1px solid #eee;
}

.order-card-header {
  background: #fcfdfc;
  padding: 15px 20px;
  border-bottom: 1px solid #f0f0f0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.order-main-info {
  display: flex;
  gap: 25px;
  font-size: 14px;
  color: #666;
}

.order-main-info span {
  display: flex;
  align-items: center;
  gap: 8px;
}

.status-badge {
  padding: 5px 15px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: bold;
  text-transform: uppercase;
}

.status-badge.pending {
  background: #fff3e0;
  color: #ef6c00;
}
.status-badge.processing {
  background: #e3f2fd;
  color: #1976d2;
}
.status-badge.shipped {
  background: #f3e5f5;
  color: #7b1fa2;
}
.status-badge.delivered {
  background: #e8f5e9;
  color: #2e7d32;
}
.status-badge.cancelled {
  background: #ffebee;
  color: #c62828;
}

.order-card-body {
  padding: 20px;
}

.history-item-row {
  display: grid;
  grid-template-columns: 2fr 1fr 1.5fr;
  padding: 10px 0;
  border-bottom: 1px dashed #eee;
}

.history-item-row:last-child {
  border-bottom: none;
}

.item-name {
  font-weight: 600;
  color: #333;
}

.item-qty {
  color: #777;
}

.item-price {
  text-align: right;
  color: #8c734b;
  font-weight: 500;
}

.order-footer {
  margin-top: 20px;
  padding-top: 15px;
  border-top: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
}

.total-box p {
  font-size: 12px;
  color: #999;
  margin-bottom: 2px;
}

.total-box h3 {
  color: #3e5235;
  font-size: 22px;
}

.details-btn {
  background: none;
  border: 1px solid #ddd;
  padding: 8px 15px;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: all 0.2s;
}

.details-btn:hover {
  background: #f9f9f9;
  border-color: #8c734b;
  color: #8c734b;
}

@media (max-width: 600px) {
  .order-card-header,
  .order-footer {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  .history-item-row {
    grid-template-columns: 1fr;
    gap: 5px;
  }
  .item-price {
    text-align: left;
  }
}


// ==========================================
// FILE: src\pages\CustomerHistory.jsx
// ==========================================

import React, { useState, useEffect } from "react";
import axios from "axios";
import CustomerSidebar from "../components/CustomerSidebar";
import "./CustomerHistory.css";
import {
  FaHistory,
  FaCalendarAlt,
  FaHashtag,
  FaRupeeSign,
  FaBox,
  FaInfoCircle,
} from "react-icons/fa";

const CustomerHistory = () => {
  const [orders, setOrders] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState("");

  const userInfo = JSON.parse(localStorage.getItem("userInfo"));
  const API_URL = "http://localhost:5000/api/orders";

  useEffect(() => {
    const fetchMyOrders = async () => {
      try {
        const config = {
          headers: { Authorization: `Bearer ${userInfo?.token}` },
        };
        // The backend controller automatically filters orders for the logged-in customer
        const { data } = await axios.get(API_URL, config);
        setOrders(data);
        setLoading(false);
      } catch (err) {
        setError(
          "Could not retrieve your order history. Please try again later."
        );
        setLoading(false);
      }
    };

    fetchMyOrders();
  }, [userInfo?.token]);

  // Helper to format date
  const formatDate = (dateString) => {
    const options = { year: "numeric", month: "long", day: "numeric" };
    return new Date(dateString).toLocaleDateString(undefined, options);
  };

  return (
    <div className="customer-layout">
      <CustomerSidebar />
      <main className="customer-content">
        <h1 className="page-title">
          <FaHistory /> Order History
        </h1>

        <div className="history-container">
          {loading ? (
            <div className="loading-state">Loading your rice purchases...</div>
          ) : error ? (
            <div className="error-message">{error}</div>
          ) : orders.length === 0 ? (
            <div className="card empty-history">
              <FaBox size={50} color="#ddd" />
              <h3>No Orders Found</h3>
              <p>
                You haven't placed any orders yet. Visit our product range to
                get started!
              </p>
              <button
                className="shop-now-btn"
                onClick={() => (window.location.href = "/products")}
              >
                Browse Products
              </button>
            </div>
          ) : (
            <div className="orders-list">
              {orders.map((order) => (
                <div key={order._id} className="order-history-card">
                  <div className="order-card-header">
                    <div className="order-main-info">
                      <span>
                        <FaHashtag /> ID: {order._id.slice(-8).toUpperCase()}
                      </span>
                      <span>
                        <FaCalendarAlt /> Ordered on:{" "}
                        {formatDate(order.createdAt)}
                      </span>
                    </div>
                    <span
                      className={`status-badge ${order.status.toLowerCase()}`}
                    >
                      {order.status}
                    </span>
                  </div>

                  <div className="order-card-body">
                    <div className="items-summary">
                      {order.items.map((item, idx) => (
                        <div key={idx} className="history-item-row">
                          <span className="item-name">
                            {item.product?.name || "Premium Rice"}
                          </span>
                          <span className="item-qty">{item.quantity} Bags</span>
                          <span className="item-price">
                            Rs. {item.priceAtOrder} / bag
                          </span>
                        </div>
                      ))}
                    </div>

                    <div className="order-footer">
                      <div className="total-box">
                        <p>Total Amount</p>
                        <h3>Rs. {order.totalAmount.toLocaleString()}</h3>
                      </div>
                      <button className="details-btn">
                        <FaInfoCircle /> View Details
                      </button>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          )}
        </div>
      </main>
    </div>
  );
};

export default CustomerHistory;


// ==========================================
// FILE: src\pages\CustomerProfile.css
// ==========================================

.profile-card {
  padding: 30px;
  max-width: 900px;
}

.profile-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
  border-bottom: 2px solid #f1f1f1;
  padding-bottom: 20px;
}

.role-tag {
  background: #8c734b;
  color: white;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 12px;
  text-transform: uppercase;
}

.profile-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

.full-width {
  grid-column: span 2;
}

.input-field-group label {
  display: block;
  margin-bottom: 8px;
  font-weight: 600;
  color: #555;
  font-size: 14px;
}

.input-with-icon {
  position: relative;
  display: flex;
  align-items: center;
}

.input-with-icon svg {
  position: absolute;
  left: 12px;
  color: #8c734b;
}

.input-with-icon input,
.input-with-icon textarea {
  width: 100%;
  padding: 12px 12px 12px 40px;
  border: 1px solid #ddd;
  border-radius: 6px;
  font-size: 15px;
  transition: all 0.3s;
}

.input-with-icon input:focus,
.input-with-icon textarea:focus {
  border-color: #3e5235;
  outline: none;
  box-shadow: 0 0 5px rgba(62, 82, 53, 0.2);
}

.disabled-input {
  background-color: #f8f8f8;
  color: #777;
  cursor: not-allowed;
}

.edit-btn,
.save-btn {
  padding: 10px 20px;
  border-radius: 6px;
  border: none;
  font-weight: bold;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: 0.3s;
}

.edit-btn {
  background: #eee;
  color: #333;
}
.edit-btn:hover {
  background: #ddd;
}

.save-btn {
  background: #3e5235;
  color: white;
}
.save-btn:hover {
  background: #2c3e26;
}

.profile-alert {
  padding: 15px;
  border-radius: 6px;
  margin-bottom: 20px;
  font-weight: 500;
}

.profile-alert.success {
  background: #e8f5e9;
  color: #2e7d32;
}
.profile-alert.error {
  background: #ffebee;
  color: #c62828;
}

@media (max-width: 600px) {
  .profile-grid {
    grid-template-columns: 1fr;
  }
  .full-width {
    grid-column: span 1;
  }
}
.profile-top-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.header-actions {
  display: flex;
  gap: 10px;
}

.cancel-btn {
  background: #fdfdfd;
  color: #d32f2f;
  border: 1px solid #d32f2f;
  padding: 10px 20px;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: bold;
}

.cancel-btn:hover {
  background: #fff5f5;
}

.profile-alert {
  padding: 10px 20px;
  border-radius: 6px;
  font-size: 14px;
  animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}


// ==========================================
// FILE: src\pages\CustomerProfile.jsx
// ==========================================

import React, { useState, useEffect } from "react";
import axios from "axios";
import CustomerSidebar from "../components/CustomerSidebar";
import "./CustomerProfile.css";
import {
  FaUserCircle,
  FaEdit,
  FaSave,
  FaMapMarkerAlt,
  FaPhone,
  FaEnvelope,
  FaBuilding,
  FaTimes,
} from "react-icons/fa";

// --- 1. MOVE COMPONENT OUTSIDE TO FIX FOCUS BUG ---
const InputField = ({
  label,
  name,
  value,
  disabled,
  icon,
  type = "text",
  onChange,
}) => (
  <div className="input-field-group">
    <label>{label}</label>
    <div className="input-with-icon">
      {icon}
      <input
        type={type}
        name={name}
        value={value}
        onChange={onChange}
        disabled={disabled}
        className={disabled ? "disabled-input" : ""}
      />
    </div>
  </div>
);

const CustomerProfile = () => {
  const [isEditing, setIsEditing] = useState(false);
  const [loading, setLoading] = useState(false);
  const [message, setMessage] = useState({ type: "", text: "" });

  const [profile, setProfile] = useState({
    name: "",
    email: "",
    phone: "",
    address: "",
    companyName: "",
    role: "",
  });

  const userInfo = JSON.parse(localStorage.getItem("userInfo"));

  useEffect(() => {
    if (userInfo) {
      setProfile({
        name: userInfo.name || "",
        email: userInfo.email || "",
        phone: userInfo.phone || "",
        address: userInfo.address || "",
        companyName: userInfo.companyName || "",
        role: userInfo.role || "",
      });
    }
  }, []);

  const handleChange = (e) => {
    const { name, value } = e.target;
    setProfile((prev) => ({ ...prev, [name]: value }));
  };

  const handleSave = async () => {
    setLoading(true);
    setMessage({ type: "", text: "" });

    try {
      const config = {
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${userInfo.token}`,
        },
      };

      const { data } = await axios.put(
        "http://localhost:5000/api/auth/profile",
        profile,
        config
      );

      // Keep token in the new object if backend doesn't return it
      const updatedInfo = { ...data, token: userInfo.token };
      localStorage.setItem("userInfo", JSON.stringify(updatedInfo));

      setIsEditing(false);
      setMessage({ type: "success", text: "Profile updated successfully!" });
    } catch (error) {
      setMessage({
        type: "error",
        text:
          error.response?.data?.message || "Update failed. Please try again.",
      });
    } finally {
      setLoading(false);
    }
  };

  const handleCancel = () => {
    // Reset to what is in localStorage
    if (userInfo) {
      setProfile({
        name: userInfo.name || "",
        email: userInfo.email || "",
        phone: userInfo.phone || "",
        address: userInfo.address || "",
        companyName: userInfo.companyName || "",
        role: userInfo.role || "",
      });
    }
    setIsEditing(false);
  };

  return (
    <div className="customer-layout">
      <CustomerSidebar />
      <main className="customer-content">
        <div className="profile-top-header">
          <h1 className="page-title">
            <FaUserCircle /> My Profile
          </h1>
          {message.text && (
            <div className={`profile-alert ${message.type}`}>
              {message.text}
            </div>
          )}
        </div>

        <div className="card profile-card">
          <div className="profile-header">
            <div className="header-text">
              <h3>Account Settings</h3>
              <p>
                Registered Role:{" "}
                <span className="role-tag">{profile.role}</span>
              </p>
            </div>

            <div className="header-actions">
              {isEditing ? (
                <>
                  <button className="cancel-btn" onClick={handleCancel}>
                    <FaTimes /> Cancel
                  </button>
                  <button
                    className="save-btn"
                    onClick={handleSave}
                    disabled={loading}
                  >
                    <FaSave /> {loading ? "Saving..." : "Save Changes"}
                  </button>
                </>
              ) : (
                <button className="edit-btn" onClick={() => setIsEditing(true)}>
                  <FaEdit /> Edit Profile
                </button>
              )}
            </div>
          </div>

          <div className="profile-grid">
            <InputField
              label="Full Name"
              name="name"
              value={profile.name}
              icon={<FaUserCircle />}
              onChange={handleChange}
              disabled={!isEditing}
            />
            <InputField
              label="Business Name"
              name="companyName"
              value={profile.companyName}
              icon={<FaBuilding />}
              onChange={handleChange}
              disabled={!isEditing}
            />
            <InputField
              label="Email Address"
              name="email"
              value={profile.email}
              icon={<FaEnvelope />}
              disabled={true} // Email should stay read-only
            />
            <InputField
              label="Phone Number"
              name="phone"
              value={profile.phone}
              icon={<FaPhone />}
              onChange={handleChange}
              disabled={!isEditing}
            />

            <div className="input-field-group full-width">
              <label>Default Shipping Address</label>
              <div className="input-with-icon">
                <FaMapMarkerAlt />
                <textarea
                  name="address"
                  value={profile.address}
                  onChange={handleChange}
                  disabled={!isEditing}
                  rows="3"
                  className={!isEditing ? "disabled-input" : ""}
                  placeholder="Complete address for rice deliveries..."
                />
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  );
};

export default CustomerProfile;


// ==========================================
// FILE: src\pages\CustomerTracking.jsx
// ==========================================

import React from "react";
import CustomerSidebar from "../components/CustomerSidebar";
import "./CustomerDashboard.css";
import {
  FaSearch,
  FaTruck,
  FaCheck,
  FaWarehouse,
  FaMapMarkerAlt,
} from "react-icons/fa";

const CustomerTracking = () => {
  return (
    <div className="customer-layout">
      <CustomerSidebar />
      <main className="customer-content">
        <h1 className="page-title">
          <FaTruck /> Track Your Shipment
        </h1>

        {/* Search Bar */}
        <div
          className="card"
          style={{
            marginBottom: "30px",
            display: "flex",
            gap: "15px",
            padding: "20px",
          }}
        >
          <input
            type="text"
            placeholder="Enter Order ID (e.g., #11276)"
            style={{
              flex: 1,
              padding: "12px",
              borderRadius: "6px",
              border: "1px solid #ccc",
            }}
          />
          <button className="trace-btn">
            <FaSearch /> Track
          </button>
        </div>

        {/* Tracking Result Card */}
        <div className="card">
          <div
            style={{
              borderBottom: "1px solid #eee",
              paddingBottom: "15px",
              marginBottom: "20px",
            }}
          >
            <h3>Order #11276</h3>
            <p style={{ color: "#666" }}>
              Expected Delivery: <strong>Tomorrow, Nov 02</strong>
            </p>
          </div>

          {/* Visual Timeline */}
          <div className="tracking-timeline">
            <div className="timeline-item completed">
              <div className="icon-box">
                <FaCheck />
              </div>
              <div className="text-box">
                <h4>Order Placed</h4>
                <p>2025-10-15 09:30 AM</p>
              </div>
            </div>

            <div className="timeline-item completed">
              <div className="icon-box">
                <FaWarehouse />
              </div>
              <div className="text-box">
                <h4>Packed & Quality Checked</h4>
                <p>2025-10-16 02:00 PM</p>
              </div>
            </div>

            <div className="timeline-item active">
              <div className="icon-box">
                <FaTruck />
              </div>
              <div className="text-box">
                <h4>In Transit</h4>
                <p>Your order is on the way to Lahore via GT Road.</p>
              </div>
            </div>

            <div className="timeline-item">
              <div className="icon-box">
                <FaMapMarkerAlt />
              </div>
              <div className="text-box">
                <h4>Delivered</h4>
                <p>Estimated: 2025-11-02</p>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  );
};

export default CustomerTracking;


// ==========================================
// FILE: src\pages\Home.css
// ==========================================

/* =========================
   Global Container
   ========================= */
.home-container {
  width: 100%;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  background-color: #fcfcfc; /* Very light grey background */
}

/* =========================
   1. Hero Section (Slider)
   ========================= */
.hero-section {
  height: 550px; /* Taller height for premium look */
  background-size: cover;
  background-position: center;
  position: relative;

  /* Smooth Fade Transition for the Background Image */
  transition: background-image 1s ease-in-out;
}

.hero-overlay {
  background: rgba(0, 0, 0, 0.4); /* Dark overlay to make text pop */
  height: 100%;
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.hero-content {
  text-align: center;
  color: white;
  text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.8);
  max-width: 800px;
  padding: 0 20px;
}

.hero-content h1 {
  font-size: 48px;
  margin-bottom: 15px;
  font-weight: 700;
  letter-spacing: 1px;
}

.hero-content p {
  font-size: 24px;
  font-weight: 400;
  color: #f0f0f0;
}

/* Slider Dots (Indicators) */
.slider-dots {
  margin-top: 40px;
  display: flex;
  justify-content: center;
  gap: 12px;
}

.dot {
  height: 14px;
  width: 14px;
  background-color: rgba(255, 255, 255, 0.4);
  border: 1px solid rgba(255, 255, 255, 0.6);
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.3s ease;
}

.dot.active {
  background-color: #d4af37; /* Gold Active Dot */
  border-color: #d4af37;
  transform: scale(1.3);
}

/* =========================
   2. Main Layout (2 Columns)
   ========================= */
.content-container {
  display: flex;
  max-width: 1200px;
  margin: 0 auto;
  padding: 60px 20px;
  gap: 40px;
}

.left-column {
  flex: 7; /* Takes up 70% width */
}

.right-column {
  flex: 3; /* Takes up 30% width */
}

/* Section Common Styles */
.section-block {
  margin-bottom: 50px;
}

.section-title {
  font-size: 28px;
  border-bottom: 3px solid #e0e0e0;
  padding-bottom: 15px;
  margin-bottom: 25px;
  color: #2c3e50;
  font-weight: 600;
  position: relative;
}

/* Add a green accent line under the title */
.section-title::after {
  content: "";
  position: absolute;
  bottom: -3px;
  left: 0;
  width: 80px;
  height: 3px;
  background-color: #4a6741;
}

/* =========================
   Left Column Widgets
   ========================= */

/* Virtual Mill Tour */
.video-wrapper {
  width: 100%;
  height: 350px;
  background-color: #222;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  position: relative;
}

.video-placeholder {
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: white;
  background: linear-gradient(135deg, #3e5235 0%, #2c3e50 100%);
  cursor: pointer;
  transition: transform 0.3s ease;
}

.video-placeholder:hover {
  transform: scale(1.02);
}

.play-icon {
  font-size: 60px;
  margin-bottom: 15px;
  color: #d4af37;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
}

/* Product Grid */
.product-grid {
  display: flex;
  justify-content: space-between;
  gap: 25px;
}

.product-card {
  flex: 1;
  border: 1px solid #e0e0e0;
  padding: 20px;
  border-radius: 12px;
  background: #fff;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  text-align: left;
}

.product-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
}

.product-img {
  height: 200px;
  margin-bottom: 15px;
  border-radius: 8px;
  background-size: cover;
  background-position: center;
}

/* Simulated Image Colors */
.img-basmati {
  background-color: #d4af37;
}
.img-jasmine {
  background-color: #f5f5f5;
  border: 1px solid #ddd;
}
.img-brown {
  background-color: #8d6e63;
}

.product-card h3 {
  font-size: 20px;
  margin: 10px 0;
  color: #2c3e50;
}

.price {
  color: #8c734b; /* Brown/Gold Price */
  font-weight: 800;
  font-size: 20px;
  margin-bottom: 5px;
}

.trace-tag {
  color: #555;
  font-size: 14px;
  display: flex;
  align-items: center;
  gap: 6px;
  background-color: #f0f0f0;
  padding: 5px 10px;
  border-radius: 20px;
  width: fit-content;
}

/* =========================
   Right Column Widgets
   ========================= */

/* Latest News */
.news-card {
  background-color: #ffffff;
  padding: 25px;
  border-radius: 12px;
  border: 1px solid #e0e0e0;
  border-left: 6px solid #4a6741; /* Green accent bar */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.news-card h3 {
  font-size: 18px;
  line-height: 1.4;
  margin-bottom: 15px;
  color: #333;
}

.news-card p {
  font-size: 14px;
  color: #666;
  line-height: 1.6;
  margin-bottom: 20px;
}

.read-more-btn {
  background-color: #8c734b;
  color: white;
  border: none;
  padding: 10px 20px;
  cursor: pointer;
  border-radius: 6px;
  font-weight: 600;
  transition: background-color 0.2s;
}

.read-more-btn:hover {
  background-color: #7a6340;
}

/* Live Market Ticker */
.ticker-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  background: white;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid #e0e0e0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.ticker-table th {
  text-align: left;
  background-color: #f9f9f9;
  padding: 15px;
  font-weight: 700;
  color: #444;
  border-bottom: 2px solid #e0e0e0;
}

.ticker-table td {
  padding: 15px;
  border-bottom: 1px solid #f0f0f0;
  color: #555;
  font-size: 14px;
}

.ticker-table tr:last-child td {
  border-bottom: none;
}

.price-up {
  color: #4a6741; /* Green */
  font-weight: 700;
}

.price-down {
  color: #d32f2f; /* Red */
  font-weight: 700;
}

/* =========================
   Responsive Mobile
   ========================= */
@media (max-width: 900px) {
  .content-container {
    flex-direction: column;
  }

  .left-column,
  .right-column {
    flex: 1;
    width: 100%;
  }

  .product-grid {
    flex-direction: column;
  }

  .hero-content h1 {
    font-size: 32px;
  }
}
/* ... Previous CSS ... */

/* UPDATED PRODUCT CARD STYLES */
.product-card {
  flex: 1;
  border: 1px solid #e0e0e0;
  padding: 15px; /* Reduced padding slightly */
  border-radius: 12px;
  background: #fff;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  display: flex;
  flex-direction: column;
}

/* New Class for Real Images */
.product-img-real {
  width: 100%;
  height: 200px; /* Fixed height for uniformity */
  object-fit: cover; /* Ensures image fills box without stretching */
  border-radius: 8px;
  margin-bottom: 12px;
  border: 1px solid #f0f0f0;
}

/* Remove the old .product-img background colors logic if you want clean code */

.price {
  color: #8c734b;
  font-weight: 800;
  font-size: 22px; /* Slightly larger */
  margin-bottom: 5px;
}

.unit {
  font-size: 14px;
  color: #777;
  font-weight: normal;
}

/* ... Rest of CSS ... */

.contact-section-home {
  padding: 60px 20px;
  background-color: #f8f9fa;
  text-align: center;
}

.contact-grid-home {
  display: flex;
  justify-content: center;
  gap: 30px;
  flex-wrap: wrap;
  margin-top: 30px;
}

.contact-info-card {
  background: white;
  padding: 30px;
  border-radius: 10px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
  width: 250px;
}

.contact-icon {
  font-size: 30px;
  color: #3e5235;
  margin-bottom: 15px;
}

.section-desc {
  color: #666;
  margin-bottom: 20px;
  line-height: 1.6;
}


// ==========================================
// FILE: src\pages\Home.jsx
// ==========================================

import React, { useState, useEffect } from "react";
import "./Home.css";
import {
  FaMapMarkerAlt,
  FaPlayCircle,
  FaEnvelope,
  FaPhoneAlt,
} from "react-icons/fa";

// Import Hero Images
import hero1 from "../assets/hero1.png";
import hero2 from "../assets/hero2.png";
import hero3 from "../assets/hero3.png";

// Import Product Images
import prodBasmati from "../assets/basmati.png";
import prodJasmine from "../assets/jasmine.png";
import prodBrown from "../assets/brown.png";

const Home = () => {
  const heroImages = [hero1, hero2, hero3];
  const [currentImage, setCurrentImage] = useState(0);

  useEffect(() => {
    const slideInterval = setInterval(() => {
      setCurrentImage((prev) => (prev + 1) % heroImages.length);
    }, 5000);
    return () => clearInterval(slideInterval);
  }, [heroImages.length]);

  return (
    <div className="home-container">
         {/* Hero Section */}  {" "}
      <section
        className="hero-section"
        style={{ backgroundImage: `url(${heroImages[currentImage]})` }}
      >
           {" "}
        <div className="hero-overlay">
              {" "}
          <div className="hero-content">
                 {" "}
            <h1>GrainBridge - Premium Rice, Traced from Farm to Table</h1>  
               <p>Bridging quality from our mill to your home</p>     {" "}
            <div className="slider-dots">
                    {" "}
              {heroImages.map((_, index) => (
                <span
                  key={index}
                  className={`dot ${index === currentImage ? "active" : ""}`}
                  onClick={() => setCurrentImage(index)}
                ></span>
              ))}
                   {" "}
            </div>
                {" "}
          </div>
             {" "}
        </div>
          {" "}
      </section>
        {" "}
      <div className="content-container">
           {" "}
        <div className="left-column">
               {/* 1. OUR PROCESS SECTION (Added ID for Navigation) */} 
            {" "}
          <section className="section-block" id="process">
                 {" "}
            <h2 className="section-title">Our Process & Virtual Tour</h2>   
             {" "}
            <p className="section-desc">
                     From harvesting in the fertile fields to high-tech
              milling,        discover how GrainBridge ensures every
              grain meets international        standards.      {" "}
            </p>
                 {" "}
            <div className="video-wrapper">
                    {" "}
              <div className="video-placeholder">
                        <FaPlayCircle className="play-icon" />    
                   <p>Watch Virtual Mill Tour</p>      {" "}
              </div>
                   {" "}
            </div>
                {" "}
          </section>
               {/* Featured Products */}    {" "}
          <section className="section-block">
                  <h2 className="section-title">Featured Products</h2> 
               {" "}
            <div className="product-grid">
                    {" "}
              <div className="product-card">
                       {" "}
                <img
                  src={prodBasmati}
                  alt="Premium Basmati"
                  className="product-img-real"
                />
                        <h3>Premium Basmati</h3>       {" "}
                <p className="price">
                           Rs. 450<span className="unit">/kg</span> 
                       {" "}
                </p>
                       {" "}
                <p className="trace-tag">
                           <FaMapMarkerAlt /> Traceable        {" "}
                </p>
                      {" "}
              </div>
                    {" "}
              <div className="product-card">
                       {" "}
                <img
                  src={prodJasmine}
                  alt="Jasmine Rice"
                  className="product-img-real"
                />
                        <h3>Super Kernel / Jasmine</h3>       {" "}
                <p className="price">
                           Rs. 380<span className="unit">/kg</span> 
                       {" "}
                </p>
                       {" "}
                <p className="trace-tag">
                           <FaMapMarkerAlt /> Traceable        {" "}
                </p>
                      {" "}
              </div>
                    {" "}
              <div className="product-card">
                       {" "}
                <img
                  src={prodBrown}
                  alt="Brown Rice"
                  className="product-img-real"
                />
                        <h3>Organic Brown Rice</h3>       {" "}
                <p className="price">
                           Rs. 520<span className="unit">/kg</span> 
                       {" "}
                </p>
                       {" "}
                <p className="trace-tag">
                           <FaMapMarkerAlt /> Traceable        {" "}
                </p>
                      {" "}
              </div>
                   {" "}
            </div>
                {" "}
          </section>
             {" "}
        </div>
           {" "}
        <div className="right-column">
               {/* Latest News */}    {" "}
          <section className="section-block news-block">
                  <h2 className="section-title">Latest News</h2>    
            {" "}
            <div className="news-card">
                     <h3>New Traceability System Live!</h3>      {" "}
              <p>
                        We now track every grain from harvest to
                packaging to ensure         100% purity.       {" "}
              </p>
                     <button className="read-more-btn">Read More</button>
                   {" "}
            </div>
                {" "}
          </section>
               {/* Market Ticker */}    {" "}
          <section className="section-block ticker-block">
                  <h2 className="section-title">Live Market Rates</h2> 
               {" "}
            <table className="ticker-table">
                    {" "}
              <thead>
                       {" "}
                <tr>
                           <th>Rice Type</th>        {" "}
                  <th>Price (40kg)</th>         <th>Trend</th>    
                    {" "}
                </tr>
                      {" "}
              </thead>
                    {" "}
              <tbody>
                       {" "}
                <tr>
                           <td>Super Basmati</td>        {" "}
                  <td>Rs. 12,500</td>        {" "}
                  <td className="price-up"></td>       {" "}
                </tr>
                       {" "}
                <tr>
                           <td>Kainat 1121</td>        {" "}
                  <td>Rs. 11,800</td>        {" "}
                  <td className="price-up"></td>       {" "}
                </tr>
                       {" "}
                <tr>
                           <td>Irri-6</td>        {" "}
                  <td>Rs. 6,200</td>        {" "}
                  <td className="price-down"></td>       {" "}
                </tr>
                      {" "}
              </tbody>
                   {" "}
            </table>
                {" "}
          </section>
             {" "}
        </div>
          {" "}
      </div>
         {/* 2. CONTACT SECTION (Added ID for Navigation) */}  {" "}
      <section className="contact-section-home" id="contact">
           {" "}
        <div className="contact-content-wrapper">
               <h2 className="section-title">Get In Touch</h2>    {" "}
          <div className="contact-grid-home">
                 {" "}
            <div className="contact-info-card">
                     <FaPhoneAlt className="contact-icon" />      {" "}
              <h3>Call Us</h3>       <p>+92 300 1234567</p>     {" "}
            </div>
                 {" "}
            <div className="contact-info-card">
                     <FaEnvelope className="contact-icon" />      {" "}
              <h3>Email Us</h3>       <p>info@grainbridge.com</p>   
               {" "}
            </div>
                 {" "}
            <div className="contact-info-card">
                     <FaMapMarkerAlt className="contact-icon" />    
                <h3>Visit Us</h3>      {" "}
              <p>Rice Industrial Zone, Punjab, Pakistan</p>     {" "}
            </div>
                {" "}
          </div>
             {" "}
        </div>
          {" "}
      </section>
       {" "}
    </div>
  );
};

export default Home;


// ==========================================
// FILE: src\pages\Login.css
// ==========================================

.login-page-wrapper {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  background-color: #f4f6f8;
  padding: 20px;
}

.login-card {
  background: white;
  padding: 40px;
  border-radius: 12px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  width: 100%;
  max-width: 400px;
}

.login-card h2 {
  text-align: center;
  color: #3e5235;
  margin-bottom: 25px;
  font-size: 28px;
}

.role-selector {
  display: flex;
  background: #f0f0f0;
  border-radius: 8px;
  padding: 5px;
  margin-bottom: 10px;
}

.role-selector button {
  flex: 1;
  padding: 10px;
  border: none;
  background: transparent;
  cursor: pointer;
  font-weight: 600;
  border-radius: 6px;
  color: #666;
  transition: all 0.3s ease;
}

.role-selector button.active {
  background: white;
  color: #3e5235;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.login-prompt-text {
  text-align: center;
  font-size: 14px;
  color: #666;
  margin-bottom: 20px;
}

.login-form-group {
  margin-bottom: 20px;
}

.login-form-group label {
  display: block;
  margin-bottom: 8px;
  font-weight: 600;
  color: #444;
}

.login-form-group input {
  width: 100%;
  padding: 12px;
  border: 1px solid #ddd;
  border-radius: 6px;
  font-size: 16px;
  box-sizing: border-box; /* Fix for padding breaking layout */
}

.login-submit-btn {
  width: 100%;
  padding: 14px;
  background-color: #3e5235;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.3s;
}

.login-error-box {
  background-color: #ffebee;
  color: #d32f2f;
  padding: 12px;
  border-radius: 6px;
  margin-bottom: 20px;
  text-align: center;
  font-size: 14px;
  border: 1px solid #ffcdd2;
}

.login-footer-link {
  text-align: center;
  margin-top: 25px;
  color: #777;
  font-size: 14px;
}

.login-footer-link span {
  color: #8c734b;
  cursor: pointer;
  font-weight: bold;
}


// ==========================================
// FILE: src\pages\Login.jsx
// ==========================================

import React, { useState } from "react";
import { useNavigate } from "react-router-dom";
import axios from "axios";
import "./Login.css";

const API_BASE_URL = "http://localhost:5000";

const Login = () => {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [role, setRole] = useState("Admin");
  const [error, setError] = useState("");
  const navigate = useNavigate();

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError("");

    try {
      const { data } = await axios.post(`${API_BASE_URL}/api/auth/login`, {
        email,
        password,
      });

      // --- ROLE VALIDATION LOGIC ---
      // Compare the toggle selected in UI (role) with the database result (data.role)
      if (data.role !== role) {
        setError(
          `Access Denied: You are registered as a ${data.role}, not an ${role}.`
        );
        return; // Halt the login process
      }

      // Store persistent user info in localStorage
      localStorage.setItem("userInfo", JSON.stringify(data));

      // Navigate based on verified role
      if (data.role === "Admin") navigate("/admin/dashboard");
      else if (data.role === "Customer") navigate("/customer/dashboard");
      else navigate("/supplier/dashboard");
    } catch (apiError) {
      const errorMessage =
        apiError.response?.data?.message ||
        "Login failed. Check server connection.";
      setError(errorMessage);
    }
  };

  return (
    <div className="login-page-wrapper">
      <div className="login-card">
        <h2>ERP Login</h2>

        <div className="role-selector">
          <button
            className={role === "Admin" ? "active" : ""}
            onClick={() => setRole("Admin")}
            type="button"
          >
            Admin
          </button>
          <button
            className={role === "Customer" ? "active" : ""}
            onClick={() => setRole("Customer")}
            type="button"
          >
            Customer
          </button>
          <button
            className={role === "Supplier" ? "active" : ""}
            onClick={() => setRole("Supplier")}
            type="button"
          >
            Supplier
          </button>
        </div>

        <p className="login-prompt-text">
          Log in as <strong>{role}</strong>
        </p>

        {error && <div className="login-error-box">{error}</div>}

        <form onSubmit={handleSubmit}>
          <div className="login-form-group">
            <label>Email Address</label>
            <input
              type="email"
              placeholder="Enter email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              required
            />
          </div>
          <div className="login-form-group">
            <label>Password</label>
            <input
              type="password"
              placeholder="Enter password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              required
            />
          </div>
          <button type="submit" className="login-submit-btn">
            Login
          </button>
        </form>

        <div className="login-footer-link">
          Don't have an account?{" "}
          <span onClick={() => navigate("/register")}>Register</span>
        </div>
      </div>
    </div>
  );
};

export default Login;


// ==========================================
// FILE: src\pages\OurProcess.css
// ==========================================

/* Shared Hero Style */
.process-hero {
  background: linear-gradient(rgba(62, 82, 53, 0.9), rgba(62, 82, 53, 0.9)),
    url("../assets/hero1.png");
  background-size: cover;
  padding: 100px 10%;
  text-align: center;
  color: white;
}

.process-hero h1 {
  font-size: 42px;
  margin-bottom: 10px;
}
.process-hero p {
  color: #8c734b;
  font-weight: bold;
}

/* Process Grid */
.process-content {
  padding: 80px 10%;
  background: #f9f9f9;
}
.process-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 30px;
}
.process-card {
  background: white;
  padding: 40px;
  border-radius: 12px;
  position: relative;
  border-bottom: 4px solid #8c734b;
}
.process-index {
  position: absolute;
  top: 20px;
  right: 20px;
  font-weight: 800;
  color: #eee;
  font-size: 30px;
}
.process-icon-box {
  font-size: 40px;
  color: #3e5235;
  margin-bottom: 20px;
}


// ==========================================
// FILE: src\pages\OurProcess.jsx
// ==========================================

import React from "react";
import "./OurProcess.css";
import {
  FaSeedling,
  FaWater,
  FaIndustry,
  FaMicroscope,
  FaBoxOpen,
  FaGlobe,
} from "react-icons/fa";

const OurProcess = () => {
  const steps = [
    {
      icon: <FaSeedling />,
      title: "Ethical Sourcing",
      desc: "We partner with local farmers in the heart of Punjab, selecting only the finest long-grain paddy.",
    },
    {
      icon: <FaWater />,
      title: "Hygienic Cleaning",
      desc: "Multi-stage cleaning removes all impurities while maintaining the grain's natural moisture balance.",
    },
    {
      icon: <FaIndustry />,
      title: "Precision Milling",
      desc: "Our high-tech Japanese machinery de-husks and polishes rice without breaking the fragile grains.",
    },
    {
      icon: <FaMicroscope />,
      title: "AI Quality Check",
      desc: "Every batch is scanned by AI vision systems to ensure 99% purity and uniform length.",
    },
    {
      icon: <FaBoxOpen />,
      title: "Eco-Packaging",
      desc: "Rice is packed in moisture-resistant, food-grade materials to preserve aroma for months.",
    },
    {
      icon: <FaGlobe />,
      title: "Global Distribution",
      desc: "Our logistics network ensures fresh rice reaches your kitchen, whether you are local or abroad.",
    },
  ];

  return (
    <div className="process-page">
      <header className="process-hero">
        <h1>Our Farm-to-Table Journey</h1>
        <p>Advanced technology meets traditional agricultural expertise.</p>
      </header>

      <section className="process-content">
        <div className="process-grid">
          {steps.map((step, index) => (
            <div key={index} className="process-card">
              <div className="process-index">{index + 1}</div>
              <div className="process-icon-box">{step.icon}</div>
              <h3>{step.title}</h3>
              <p>{step.desc}</p>
            </div>
          ))}
        </div>
      </section>
    </div>
  );
};

export default OurProcess;


// ==========================================
// FILE: src\pages\PortalSettings.jsx
// ==========================================

import React, { useState } from "react";
import AdminSidebar from "../components/AdminSidebar";
import CustomerSidebar from "../components/CustomerSidebar";
import SupplierSidebar from "../components/SupplierSidebar";
import "./AdminDashboard.css";
import "./CustomerDashboard.css";
import { FaCog, FaLock, FaBell } from "react-icons/fa";

const PortalSettings = ({ role }) => {
  const [currentPassword, setCurrentPassword] = useState("");
  const [newPassword, setNewPassword] = useState("");
  const [confirmPassword, setConfirmPassword] = useState("");
  const [notifications, setNotifications] = useState(true);

  const handleSubmitPassword = (e) => {
    e.preventDefault();
    if (newPassword !== confirmPassword) {
      alert("New passwords do not match!");
      return;
    }
    alert(`Password changed successfully for ${role}!`);
    setCurrentPassword("");
    setNewPassword("");
    setConfirmPassword("");
    // In a real app: Send change request
  };

  const renderSidebar = () => {
    if (role === "admin") return <AdminSidebar />;
    if (role === "supplier") return <SupplierSidebar />;
    return <CustomerSidebar />;
  };

  return (
    <div className={`${role}-layout`}>
      {renderSidebar()}
      <main className={`${role}-content`}>
        <h1 className="page-title">
          <FaCog /> {role.charAt(0).toUpperCase() + role.slice(1)} Settings
        </h1>

        {/* Change Password Card */}
        <div
          className="card"
          style={{ maxWidth: "600px", marginBottom: "30px" }}
        >
          <h3>
            <FaLock /> Change Password
          </h3>
          <form onSubmit={handleSubmitPassword}>
            <div className="input-field-group">
              <label>Current Password</label>
              <input
                type="password"
                value={currentPassword}
                onChange={(e) => setCurrentPassword(e.target.value)}
                required
              />
            </div>
            <div className="input-field-group">
              <label>New Password</label>
              <input
                type="password"
                value={newPassword}
                onChange={(e) => setNewPassword(e.target.value)}
                required
              />
            </div>
            <div className="input-field-group">
              <label>Confirm New Password</label>
              <input
                type="password"
                value={confirmPassword}
                onChange={(e) => setConfirmPassword(e.target.value)}
                required
              />
            </div>
            <button
              type="submit"
              className={
                role === "admin" ? "action-btn track" : "quick-reorder-btn"
              }
            >
              Update Password
            </button>
          </form>
        </div>

        {/* Notification Settings Card */}
        <div className="card" style={{ maxWidth: "600px" }}>
          <h3>
            <FaBell /> Notification Preferences
          </h3>
          <div
            style={{
              display: "flex",
              justifyContent: "space-between",
              alignItems: "center",
              padding: "15px 0",
              borderBottom: "1px solid #eee",
            }}
          >
            <p>Email/SMS Alerts for new orders/payments:</p>
            <label className="switch">
              <input
                type="checkbox"
                checked={notifications}
                onChange={() => setNotifications(!notifications)}
              />
              <span className="slider round"></span>
            </label>
          </div>
          <p style={{ fontSize: "14px", color: "#888", marginTop: "15px" }}>
            Note: Transactional emails (invoices, receipts) cannot be disabled.
          </p>
        </div>
      </main>
    </div>
  );
};

// Export specialized components for routing
export const AdminSettings = () => <PortalSettings role="admin" />;
export const CustomerSettings = () => <PortalSettings role="customer" />;
export const SupplierSettings = () => <PortalSettings role="supplier" />;


// ==========================================
// FILE: src\pages\Products.css
// ==========================================

.products-page {
  background-color: #f4f4f4;
  min-height: 100vh;
}

.products-header {
  background-color: #3e5235;
  color: white;
  text-align: center;
  padding: 40px 20px;
}

.products-container {
  display: flex;
  max-width: 1200px;
  margin: 40px auto;
  padding: 0 20px;
  gap: 30px;
}

/* Sidebar Filter */
.filter-bar {
  flex: 1;
  background: white;
  padding: 20px;
  border-radius: 8px;
  height: fit-content;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

.filter-bar h3 {
  margin-bottom: 15px;
  color: #333;
  border-bottom: 2px solid #eee;
  padding-bottom: 10px;
}

.filter-bar button {
  display: block;
  width: 100%;
  padding: 10px;
  margin-bottom: 5px;
  text-align: left;
  background: none;
  border: none;
  cursor: pointer;
  font-size: 16px;
  border-radius: 4px;
}

.filter-bar button:hover,
.filter-bar button.active {
  background-color: #f0f8ff;
  color: #3e5235;
  font-weight: bold;
}

/* Product Grid */
.product-list {
  flex: 3;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 20px;
}

.shop-card {
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s;
}

.shop-card:hover {
  transform: translateY(-5px);
}

.shop-card img {
  width: 100%;
  height: 200px;
  object-fit: cover;
}

.shop-card-body {
  padding: 15px;
}

.category-badge {
  background-color: #e8f5e9;
  color: #2e7d32;
  font-size: 12px;
  padding: 3px 8px;
  border-radius: 4px;
}

.shop-card h3 {
  font-size: 18px;
  margin: 10px 0 5px;
  color: #333;
}

.description {
  color: #777;
  font-size: 14px;
  margin-bottom: 15px;
}

.shop-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 10px;
  border-top: 1px solid #eee;
  padding-top: 10px;
}

.shop-price {
  font-size: 18px;
  font-weight: bold;
  color: #8c734b;
}

.add-btn {
  background-color: #3e5235;
  color: white;
  border: none;
  padding: 8px 15px;
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
}

.add-btn:hover {
  background-color: #2c3e50;
}

/* Mobile */
@media (max-width: 768px) {
  .products-container {
    flex-direction: column;
  }
}


// ==========================================
// FILE: src\pages\Products.jsx
// ==========================================

import React, { useState, useEffect } from "react";
import axios from "axios";
import "./Products.css";
import { FaShoppingCart, FaFilter, FaExclamationCircle } from "react-icons/fa";

// Import Images
import prodBasmati from "../assets/basmati.png";
import prodBrown from "../assets/brown.png";
import prodIrri6 from "../assets/irri-6.png";
import prodKainat from "../assets/kainat.png";

const Products = () => {
  const [dbProducts, setDbProducts] = useState([]);
  const [loading, setLoading] = useState(true);
  const [filter, setFilter] = useState("All");
  const [quantities, setQuantities] = useState({});

  const userInfo = JSON.parse(localStorage.getItem("userInfo"));

  useEffect(() => {
    const fetchProducts = async () => {
      try {
        const config = {
          headers: { Authorization: `Bearer ${userInfo?.token}` },
        };
        const { data } = await axios.get(
          "http://localhost:5000/api/products",
          config
        );
        setDbProducts(data);
        setLoading(false);
      } catch (err) {
        console.error("Error fetching products", err);
        setLoading(false);
      }
    };
    fetchProducts();
  }, [userInfo?.token]);

  // Helper to match DB products with local assets
  const getImage = (category) => {
    switch (category) {
      case "Basmati":
        return prodBasmati;
      case "Healthy":
        return prodBrown;
      case "Economy":
        return prodIrri6;
      default:
        return prodKainat;
    }
  };

  const filteredProducts =
    filter === "All"
      ? dbProducts
      : dbProducts.filter((p) => p.category === filter);

  const handleOrder = async (product) => {
    const qty = parseInt(quantities[product._id] || 1);
    try {
      const config = { headers: { Authorization: `Bearer ${userInfo.token}` } };
      const orderData = {
        items: [
          {
            product: product._id,
            quantity: qty,
            priceAtOrder: product.pricePerBag,
          },
        ],
        totalAmount: product.pricePerBag * qty,
        shippingAddress: userInfo.address || "Check Profile for Address",
      };
      await axios.post("http://localhost:5000/api/orders", orderData, config);
      alert("Order placed successfully!");
      window.location.reload();
    } catch (err) {
      alert(err.response?.data?.message || "Order failed.");
    }
  };

  return (
    <div className="products-page">
      <div className="products-header">
        <h1>Our Product Range</h1>
        <p>Directly from the Rice Mill to your doorstep</p>
      </div>

      <div className="products-container">
        <div className="filter-bar">
          <h3>
            <FaFilter /> Categories
          </h3>
          {["All", "Basmati", "Healthy", "Economy"].map((cat) => (
            <button
              key={cat}
              className={filter === cat ? "active" : ""}
              onClick={() => setFilter(cat)}
            >
              {cat}
            </button>
          ))}
        </div>

        <div className="product-list">
          {loading ? (
            <p>Loading Products...</p>
          ) : filteredProducts.length === 0 ? (
            <div className="empty-state">
              <FaExclamationCircle size={50} color="#ccc" />
              <h3>No products found!</h3>
              <p>
                Please log in as <b>Admin</b> and add products to the Inventory
                to see them here.
              </p>
            </div>
          ) : (
            filteredProducts.map((product) => (
              <div key={product._id} className="shop-card">
                <img src={getImage(product.category)} alt={product.name} />
                <div className="shop-card-body">
                  <span className="category-badge">{product.category}</span>
                  <h3>{product.name}</h3>
                  <p className="stock-info">
                    Stock: {product.currentStock} Bags
                  </p>
                  <div className="qty-input-group">
                    <label>Qty:</label>
                    <input
                      type="number"
                      min="1"
                      defaultValue="1"
                      onChange={(e) =>
                        setQuantities({
                          ...quantities,
                          [product._id]: e.target.value,
                        })
                      }
                    />
                  </div>
                  <div className="shop-footer">
                    <span className="shop-price">
                      Rs. {product.pricePerBag}
                    </span>
                    <button
                      className="add-btn"
                      onClick={() => handleOrder(product)}
                      disabled={product.currentStock <= 0}
                    >
                      <FaShoppingCart />{" "}
                      {product.currentStock > 0 ? "Order" : "Out of Stock"}
                    </button>
                  </div>
                </div>
              </div>
            ))
          )}
        </div>
      </div>
    </div>
  );
};

export default Products;


// ==========================================
// FILE: src\pages\Register.css
// ==========================================

.register-container {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  background-color: #f4f6f8;
  padding: 20px;
}

.register-box {
  background: white;
  padding: 40px;
  border-radius: 12px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  width: 100%;
  max-width: 500px;
}

.register-box h2 {
  text-align: center;
  margin-bottom: 25px;
  color: #3e5235;
}

.input-group {
  margin-bottom: 15px;
}

.input-group label {
  display: block;
  margin-bottom: 5px;
  font-weight: 600;
  color: #555;
}

.input-group input,
.input-group select,
.input-group textarea {
  width: 100%;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 6px;
  font-size: 16px;
}

.register-button {
  width: 100%;
  padding: 12px;
  background-color: #3e5235;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 18px;
  font-weight: bold;
  cursor: pointer;
  margin-top: 10px;
}

.register-button:disabled {
  background-color: #ccc;
}

.error-message {
  background-color: #ffebee;
  color: #d32f2f;
  padding: 10px;
  border-radius: 6px;
  margin-bottom: 20px;
  text-align: center;
}

.footer-text {
  text-align: center;
  margin-top: 20px;
  color: #777;
}

.footer-text span {
  color: #8c734b;
  cursor: pointer;
  font-weight: bold;
}
.qty-input-group {
  margin: 10px 0;
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 14px;
}

.qty-input-group input {
  width: 60px;
  padding: 5px;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.stock-info {
  font-size: 12px;
  color: #2e7d32;
  font-weight: bold;
  margin-top: 5px;
}

.add-btn:disabled {
  background-color: #ccc;
  cursor: not-allowed;
}


// ==========================================
// FILE: src\pages\Register.jsx
// ==========================================

import React, { useState } from "react";
import { useNavigate } from "react-router-dom";
import axios from "axios";
import "./Register.css";

const API_BASE_URL = "http://localhost:5000";

const Register = () => {
  const [formData, setFormData] = useState({
    name: "",
    email: "",
    password: "",
    role: "Customer",
    companyName: "",
    phone: "",
    address: "",
  });

  const [error, setError] = useState("");
  const [loading, setLoading] = useState(false);
  const [isRegistered, setIsRegistered] = useState(false); // Success state
  const navigate = useNavigate();

  const { name, email, password, role, companyName, phone, address } = formData;

  const handleChange = (e) => {
    setFormData({ ...formData, [e.target.name]: e.target.value });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError("");
    setLoading(true);

    try {
      await axios.post(`${API_BASE_URL}/api/auth/register`, formData);

      // --- PREVENT AUTO-LOGIN ---
      // We do not store "userInfo" or navigate automatically anymore.
      setIsRegistered(true);

      // Auto-redirect to login after 4 seconds
      setTimeout(() => navigate("/login"), 4000);
    } catch (err) {
      setError(
        err.response?.data?.message || "Registration failed. Please try again."
      );
    } finally {
      setLoading(false);
    }
  };

  // SUCCESS VIEW
  if (isRegistered) {
    return (
      <div className="register-container">
        <div className="register-box" style={{ textAlign: "center" }}>
          <h2 style={{ color: "#3e5235" }}>Account Created!</h2>
          <p>
            Registration was successful. You are being redirected to the login
            page to sign in.
          </p>
          <button
            className="register-button"
            onClick={() => navigate("/login")}
            style={{ marginTop: "20px" }}
          >
            Go to Login
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="register-container">
      <div className="register-box">
        <h2>Create Account</h2>
        {error && <div className="error-message">{error}</div>}

        <form onSubmit={handleSubmit}>
          <div className="input-group">
            <label>I am a:</label>
            <select name="role" value={role} onChange={handleChange}>
              <option value="Customer">Customer</option>
              <option value="Supplier">Supplier</option>
              <option value="Admin">Admin</option>
            </select>
          </div>

          <div className="input-group">
            <label>Full Name</label>
            <input
              type="text"
              name="name"
              value={name}
              onChange={handleChange}
              required
            />
          </div>

          <div className="input-group">
            <label>Email Address</label>
            <input
              type="email"
              name="email"
              value={email}
              onChange={handleChange}
              required
            />
          </div>

          <div className="input-group">
            <label>Password</label>
            <input
              type="password"
              name="password"
              value={password}
              onChange={handleChange}
              required
            />
          </div>

          {role !== "Admin" && (
            <>
              <div className="input-group">
                <label>Company Name</label>
                <input
                  type="text"
                  name="companyName"
                  value={companyName}
                  onChange={handleChange}
                  required
                />
              </div>
              <div className="input-group">
                <label>Phone Number</label>
                <input
                  type="text"
                  name="phone"
                  value={phone}
                  onChange={handleChange}
                />
              </div>
              <div className="input-group">
                <label>Business Address</label>
                <textarea
                  name="address"
                  value={address}
                  onChange={handleChange}
                ></textarea>
              </div>
            </>
          )}

          <button type="submit" className="register-button" disabled={loading}>
            {loading ? "Registering..." : "Register"}
          </button>
        </form>

        <p className="footer-text">
          Already have an account?{" "}
          <span onClick={() => navigate("/login")}>Login</span>
        </p>
      </div>
    </div>
  );
};

export default Register;


// ==========================================
// FILE: src\pages\SupplierAIQuality.css
// ==========================================

.ai-container {
  display: grid;
  grid-template-columns: 1fr 1.5fr;
  gap: 25px;
  margin-top: 20px;
}

.upload-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.clear-link {
  background: none;
  border: none;
  color: #d32f2f;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 14px;
}

.drop-zone {
  border: 2px dashed #ddd;
  border-radius: 12px;
  height: 250px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #fafafa;
  transition: all 0.3s;
  overflow: hidden;
}

.drop-zone.has-preview {
  border-style: solid;
  border-color: #3e5235;
}

.upload-placeholder {
  text-align: center;
  cursor: pointer;
  padding: 40px;
}

.up-icon {
  font-size: 40px;
  color: #8c734b;
  margin-bottom: 10px;
}

.preview-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.analyze-btn {
  width: 100%;
  margin-top: 20px;
  background: #3e5235;
  color: white;
  border: none;
  padding: 15px;
  border-radius: 8px;
  font-weight: bold;
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.analyze-btn:disabled {
  background: #ccc;
}

/* Results Section */
.result-header-box {
  padding: 20px;
  border-radius: 8px;
  color: white;
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.grade-circle {
  width: 50px;
  height: 50px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 18px;
  border: 2px solid white;
}

.metrics-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
  margin-bottom: 20px;
}

.metric-item {
  background: #f8f9fa;
  padding: 15px;
  border-radius: 8px;
  text-align: center;
  border: 1px solid #eee;
}

.metric-item .label {
  font-size: 10px;
  color: #888;
  display: block;
}
.metric-item .val {
  font-size: 20px;
  font-weight: bold;
  color: #3e5235;
}

.recommendation-box {
  background: #fcfcfc;
  border: 1px solid #e0e0e0;
  padding: 15px;
  border-radius: 8px;
  margin-bottom: 20px;
}

.recommendation-box h5 {
  margin: 0 0 10px 0;
  color: #8c734b;
}

.download-report {
  width: 100%;
  background: none;
  border: 1px solid #3e5235;
  color: #3e5235;
  padding: 10px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
}

.processing-state {
  text-align: center;
  padding: 60px 20px;
}

.loader-bar {
  width: 100%;
  height: 4px;
  background: #eee;
  position: relative;
  overflow: hidden;
  margin-bottom: 20px;
}

.loader-bar::after {
  content: "";
  position: absolute;
  left: -50%;
  width: 50%;
  height: 100%;
  background: #8c734b;
  animation: loading 1.5s infinite;
}

@keyframes loading {
  0% {
    left: -50%;
  }
  100% {
    left: 100%;
  }
}

.spin {
  animation: spin 2s linear infinite;
}
@keyframes spin {
  100% {
    transform: rotate(360deg);
  }
}


// ==========================================
// FILE: src\pages\SupplierAIQuality.jsx
// ==========================================

import React, { useState, useEffect } from "react";
import SupplierSidebar from "../components/SupplierSidebar";
import "./SupplierAIQuality.css";
import {
  FaCamera,
  FaUpload,
  FaTimesCircle,
  FaCheckCircle,
  FaChartPie,
  FaSeedling,
  FaExclamationTriangle,
  FaMicroscope,
  FaRobot,
} from "react-icons/fa";

const SupplierAIQuality = () => {
  const [selectedFile, setSelectedFile] = useState(null);
  const [preview, setPreview] = useState(null);
  const [analysisResult, setAnalysisResult] = useState(null);
  const [loading, setLoading] = useState(false);
  const [processingStep, setProcessingStep] = useState("");

  // Clean up preview URL to prevent memory leaks
  useEffect(() => {
    if (!selectedFile) {
      setPreview(null);
      return;
    }
    const objectUrl = URL.createObjectURL(selectedFile);
    setPreview(objectUrl);
    return () => URL.revokeObjectURL(objectUrl);
  }, [selectedFile]);

  const handleFileChange = (event) => {
    const file = event.target.files[0];
    if (file && file.type.startsWith("image/")) {
      setSelectedFile(file);
      setAnalysisResult(null);
    } else {
      alert("Please upload a high-quality image of the grain sample.");
    }
  };

  const handleAnalyze = () => {
    if (!selectedFile) return;

    setLoading(true);
    setAnalysisResult(null);

    // Simulated AI Processing Steps
    const steps = [
      "Normalizing Image...",
      "Detecting Grain Boundaries...",
      "Analyzing Color Spectrums...",
      "Calculating Average Length...",
      "Finalizing Quality Grade...",
    ];

    steps.forEach((step, index) => {
      setTimeout(() => {
        setProcessingStep(step);
      }, (index + 1) * 600);
    });

    // Final result calculation
    setTimeout(() => {
      setLoading(false);
      const isGrain =
        selectedFile.name.toLowerCase().includes("grain") ||
        selectedFile.name.toLowerCase().includes("rice");

      if (isGrain) {
        setAnalysisResult({
          type: "Grain Quality Report",
          variety: "Super Kernel Basmati (Predicted)",
          score: 9.4,
          metrics: {
            purity: "99.2%",
            moisture: "12.5%",
            broken: "1.2%",
            chalky: "0.8%",
          },
          recommendation:
            "Premium Export Grade. Minimum price per maund: Rs. 8,500.",
          status: "success",
          color: "#3e5235",
        });
      } else {
        setAnalysisResult({
          type: "Crop Health Diagnostic",
          disease: "Bacterial Leaf Blight",
          severity: "Low (Early Stage)",
          score: 6.2,
          recommendation:
            "Immediate application of Copper-based bactericide recommended. Isolate affected patch.",
          status: "warning",
          color: "#8c734b",
        });
      }
    }, 4000);
  };

  return (
    <div className="supplier-layout">
      <SupplierSidebar />
      <main className="supplier-content">
        <h1 className="page-title">
          <FaRobot /> AI Grain & Crop Analyzer
        </h1>
        <p className="subtitle">
          Predictive quality grading using computer vision technology.
        </p>

        <div className="ai-container">
          {/* LEFT: UPLOAD SECTION */}
          <div className="card upload-section">
            <div className="upload-header">
              <h3>
                <FaCamera /> Sample Input
              </h3>
              {selectedFile && (
                <button
                  className="clear-link"
                  onClick={() => setSelectedFile(null)}
                >
                  <FaTimesCircle /> Reset
                </button>
              )}
            </div>

            <div className={`drop-zone ${preview ? "has-preview" : ""}`}>
              {preview ? (
                <img src={preview} alt="Sample" className="preview-img" />
              ) : (
                <label htmlFor="file-upload" className="upload-placeholder">
                  <FaUpload className="up-icon" />
                  <p>Drop sample image here or click to browse</p>
                  <span>Supported: JPG, PNG (Min 2MB for accuracy)</span>
                </label>
              )}
              <input
                type="file"
                id="file-upload"
                hidden
                onChange={handleFileChange}
              />
            </div>

            <button
              className="analyze-btn"
              onClick={handleAnalyze}
              disabled={!selectedFile || loading}
            >
              {loading ? (
                <>
                  <FaMicroscope className="spin" /> Processing...
                </>
              ) : (
                "Start AI Inspection"
              )}
            </button>
          </div>

          {/* RIGHT: RESULTS SECTION */}
          <div className="card results-section">
            <h3>
              <FaChartPie /> Analysis Dashboard
            </h3>

            {!analysisResult && !loading && (
              <div className="empty-results">
                <FaMicroscope className="ghost-icon" />
                <p>Awaiting high-resolution sample for processing...</p>
              </div>
            )}

            {loading && (
              <div className="processing-state">
                <div className="loader-bar"></div>
                <p className="step-text">{processingStep}</p>
                <span className="ai-notice">
                  Neural networks are analyzing pixel data...
                </span>
              </div>
            )}

            {analysisResult && (
              <div className="result-fade-in">
                <div
                  className="result-header-box"
                  style={{ backgroundColor: analysisResult.color }}
                >
                  <h4>{analysisResult.type}</h4>
                  <div className="grade-circle">{analysisResult.score}</div>
                </div>

                <div className="metrics-grid">
                  {analysisResult.metrics ? (
                    Object.entries(analysisResult.metrics).map(
                      ([key, value]) => (
                        <div className="metric-item" key={key}>
                          <span className="label">{key.toUpperCase()}</span>
                          <span className="val">{value}</span>
                        </div>
                      )
                    )
                  ) : (
                    <div className="metric-item full">
                      <span className="label">DIAGNOSIS</span>
                      <span className="val">{analysisResult.disease}</span>
                    </div>
                  )}
                </div>

                <div className="recommendation-box">
                  <h5>
                    <FaSeedling /> Expert Recommendation:
                  </h5>
                  <p>{analysisResult.recommendation}</p>
                </div>

                <button className="download-report">
                  Download Lab Certificate (PDF)
                </button>
              </div>
            )}
          </div>
        </div>
      </main>
    </div>
  );
};

export default SupplierAIQuality;


// ==========================================
// FILE: src\pages\SupplierDashboard.css
// ==========================================

/* Layout Wrapper */
.supplier-layout {
  display: flex;
  background-color: #fcfcfc;
  min-height: calc(100vh - 80px);
}

.supplier-content {
  flex: 1;
  padding: 30px;
}

.page-title {
  margin-bottom: 30px;
  color: #3e5235;
  font-size: 30px;
}

/* STATS ROW */
.stats-row {
  display: flex;
  gap: 25px;
  margin-bottom: 30px;
}

.stat-card {
  flex: 1;
  background: white;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
  display: flex;
  align-items: center;
  gap: 20px;
}

.stat-icon {
  font-size: 35px;
}

.stat-icon.calendar {
  color: #f57c00;
}
.stat-icon.money {
  color: #2e7d32;
}
.stat-icon.check {
  color: #1976d2;
}

.stat-info p {
  color: #777;
  font-size: 14px;
  margin-bottom: 3px;
}

.stat-info h2 {
  font-size: 32px;
  margin: 0;
  color: #333;
}

/* MAIN CONTENT GRID */
.dashboard-grid {
  display: flex;
  gap: 25px;
}

.card {
  background: white;
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  flex: 1;
}

.card h3 {
  font-size: 20px;
  margin-bottom: 15px;
  color: #2c3e50;
  border-bottom: 1px solid #eee;
  padding-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
}

/* Demand Widget */
.demand-card {
  border-left: 6px solid #3e5235;
}

.demand-qty {
  font-size: 16px;
  font-weight: 500;
  margin-bottom: 10px;
  color: #555;
}

.demand-rate {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 25px;
  color: #8c734b;
}

.confirm-btn {
  background-color: #3e5235;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: background-color 0.2s;
}

.confirm-btn:hover {
  background-color: #2c3e50;
}

/* Payment Table */
.supplier-table {
  width: 100%;
  border-collapse: collapse;
}

.supplier-table th {
  text-align: left;
  color: #777;
  font-size: 13px;
  padding: 10px 0;
  border-bottom: 2px solid #eee;
}

.supplier-table td {
  padding: 12px 0;
  font-size: 14px;
  border-bottom: 1px solid #f9f9f9;
}

/* --- Generic Form Input Styles --- */
.input-field-group {
  margin-bottom: 20px;
}

.input-field-group label {
  display: block;
  font-size: 14px;
  color: #555;
  margin-bottom: 5px;
  font-weight: 600;
}

.input-with-icon {
  display: flex;
  align-items: center;
  border: 1px solid #ddd;
  border-radius: 6px;
  padding: 5px 10px;
  background: #fff;
}

.input-with-icon svg {
  margin-right: 10px;
  color: #8c734b;
}

.input-with-icon input,
.input-with-icon textarea {
  flex-grow: 1;
  border: none;
  padding: 8px 0;
  outline: none;
  font-size: 15px;
  background: transparent;
}

.profile-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-top: 20px;
}

.full-width {
  grid-column: span 2;
}

/* --- Toggle Switch CSS --- */
.switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 28px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: 0.4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: 0.4s;
}

input:checked + .slider {
  background-color: #3e5235;
}

input:focus + .slider {
  box-shadow: 0 0 1px #3e5235;
}

input:checked + .slider:before {
  transform: translateX(22px);
}

/* Rounded sliders */
.slider.round {
  border-radius: 28px;
}

.slider.round:before {
  border-radius: 50%;
}

/* --- AI Image Upload Styles --- */

.upload-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.upload-label {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 20px;
  border: 2px dashed #8c734b;
  border-radius: 10px;
  color: #8c734b;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s;
  width: 100%;
  margin-bottom: 15px;
}

.upload-label:hover {
  background-color: #fff8e1;
}

.file-preview {
  margin-top: 15px;
  border: 1px solid #ddd;
  padding: 10px;
  border-radius: 8px;
  background: #f9f9f9;
  width: 100%;
}

.file-preview p {
  font-size: 14px;
  margin: 5px 0;
  font-weight: 500;
}

.clear-btn {
  background: none;
  border: none;
  color: #d32f2f;
  font-size: 14px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
  margin: 5px auto 0;
}

/* --- Analysis Results Styles --- */

.results-card {
  background-color: #f7fff7;
}

.result-box {
  border-radius: 8px;
  background: white;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

.result-box h4 {
  padding-bottom: 10px;
  margin-bottom: 10px;
  border-bottom: 1px solid #eee;
}

/* =========================
   MOBILE RESPONSIVENESS FIXES
   ========================= */
@media (max-width: 900px) {
  .supplier-layout {
    flex-direction: column;
  }

  .stats-row,
  .dashboard-grid {
    flex-direction: column;
  }

  .supplier-content {
    padding-top: 60px;
    padding-left: 10px;
    padding-right: 10px;
  }

  .card {
    overflow-x: auto;
  }
  .supplier-table {
    min-width: 600px;
  }
}


// ==========================================
// FILE: src\pages\SupplierDashboard.jsx
// ==========================================

import React from "react";
import SupplierSidebar from "../components/SupplierSidebar";
import "./SupplierDashboard.css";
import {
  FaCalendarAlt,
  FaMoneyBillAlt,
  FaClipboardCheck,
  FaLeaf,
  FaTractor,
  FaSeedling,
} from "react-icons/fa";

const SupplierDashboard = () => {
  return (
    <div className="supplier-layout">
      <SupplierSidebar />

      <main className="supplier-content">
        <h1 className="page-title">Welcome, Farmer Nasir Khan!</h1>

        {/* STATS ROW */}
        <div className="stats-row">
          <div className="stat-card">
            <FaCalendarAlt className="stat-icon calendar" />
            <div className="stat-info">
              <p>Next Harvest Due</p>
              <h2>25 Nov 2025</h2>
            </div>
          </div>
          <div className="stat-card">
            <FaMoneyBillAlt className="stat-icon money" />
            <div className="stat-info">
              <p>Last Payment (Amount)</p>
              <h2>Rs. 85,000</h2>
            </div>
          </div>
          <div className="stat-card">
            <FaClipboardCheck className="stat-icon check" />
            <div className="stat-info">
              <p>Quality Score (Last Batch)</p>
              <h2>9.5/10</h2>
            </div>
          </div>
        </div>

        {/* MAIN CONTENT GRID */}
        <div className="dashboard-grid">
          {/* Widget 1: Current GrainBridge Demand */}
          <div className="card demand-card">
            <h3>
              <FaLeaf /> Current Demand: Super Kernel Rice
            </h3>
            <p className="demand-qty">Required Quantity: 1,500 Bags</p>
            <p className="demand-rate">
              Current Purchase Rate: **Rs. 11,800/40kg**
            </p>
            <button className="confirm-btn">
              <FaTractor /> Confirm Your Harvest
            </button>
          </div>

          {/* Widget 2: Recent Payment Details */}
          <div className="card payment-card">
            <h3>Recent Payment Details</h3>
            <table className="supplier-table">
              <thead>
                <tr>
                  <th>Batch ID</th>
                  <th>Date</th>
                  <th>Weight (kg)</th>
                  <th>Amount (PKR)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>PBK-1020-004</td>
                  <td>2025-10-25</td>
                  <td>3,400 kg</td>
                  <td>Rs. 85,000</td>
                </tr>
                <tr>
                  <td>PBK-1010-003</td>
                  <td>2025-09-15</td>
                  <td>2,500 kg</td>
                  <td>Rs. 62,500</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </main>
    </div>
  );
};

export default SupplierDashboard;


// ==========================================
// FILE: src\pages\SupplierDemand.css
// ==========================================

.demand-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.live-tag {
  background: #fff3e0;
  color: #ef6c00;
  padding: 5px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: bold;
  display: flex;
  align-items: center;
  gap: 8px;
}

.dot {
  height: 8px;
  width: 8px;
  background-color: #ef6c00;
  border-radius: 50%;
  display: inline-block;
  animation: blink 1s infinite;
}

@keyframes blink {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 0.3;
  }
  100% {
    opacity: 1;
  }
}

.demand-subtitle {
  color: #666;
  margin-bottom: 30px;
}

.demand-container {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.demand-card {
  background: white;
  border-radius: 12px;
  padding: 25px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
  border-left: 6px solid #ccc;
  transition: transform 0.2s;
}

.demand-card:hover {
  transform: translateX(5px);
}

.demand-card.high {
  border-left-color: #d32f2f;
}
.demand-card.medium {
  border-left-color: #f57c00;
}
.demand-card.low {
  border-left-color: #3e5235;
}

.demand-info {
  display: grid;
  grid-template-columns: 1.5fr 1fr 1.5fr 1fr;
  align-items: center;
  gap: 20px;
}

.urgency-tag {
  font-size: 12px;
  font-weight: bold;
  padding: 4px 10px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 5px;
  width: fit-content;
  margin-top: 5px;
}

.urgency-tag.high {
  background: #ffebee;
  color: #c62828;
}
.urgency-tag.medium {
  background: #fff3e0;
  color: #ef6c00;
}
.urgency-tag.low {
  background: #e8f5e9;
  color: #2e7d32;
}

.rate-text {
  color: #8c734b;
  margin: 0;
}

.fulfillment-labels {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
  margin-bottom: 8px;
  color: #555;
}

.progress-bar-bg {
  background: #f0f0f0;
  height: 10px;
  border-radius: 5px;
  overflow: hidden;
}

.progress-bar-fill {
  height: 100%;
  background: #3e5235;
  border-radius: 5px;
}

.remaining-text {
  font-size: 11px;
  color: #999;
  margin-top: 5px;
}

.commit-btn {
  background: #3e5235;
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  justify-content: center;
}

.commit-btn:hover {
  background: #2c3e26;
}

.demand-footer-note {
  margin-top: 30px;
  display: flex;
  align-items: center;
  gap: 15px;
  color: #666;
  font-size: 14px;
  background: #f9f9f9;
}

@media (max-width: 992px) {
  .demand-info {
    grid-template-columns: 1fr 1fr;
  }
}

@media (max-width: 600px) {
  .demand-info {
    grid-template-columns: 1fr;
    text-align: center;
  }
  .urgency-tag {
    margin: 5px auto;
  }
}


// ==========================================
// FILE: src\pages\SupplierDemand.jsx
// ==========================================

import React, { useState } from "react";
import SupplierSidebar from "../components/SupplierSidebar";
import "./SupplierDemand.css";
import {
  FaLeaf,
  FaTruck,
  FaChartLine,
  FaExclamationCircle,
  FaCheckDouble,
} from "react-icons/fa";

const SupplierDemand = () => {
  const [demands, setDemands] = useState([
    {
      id: 1,
      crop: "Super Kernel Basmati",
      urgency: "High",
      required: 1500,
      fulfilled: 900,
      rate: 11800,
      progress: 60,
    },
    {
      id: 2,
      crop: "Kainat 1121",
      urgency: "Medium",
      required: 800,
      fulfilled: 240,
      rate: 12500,
      progress: 30,
    },
    {
      id: 3,
      crop: "Irri-6 (Coarse)",
      urgency: "Low",
      required: 2000,
      fulfilled: 200,
      rate: 6200,
      progress: 10,
    },
  ]);

  const handleCommit = (cropName) => {
    const amount = prompt(`How many bags of ${cropName} can you supply?`);
    if (amount && !isNaN(amount)) {
      alert(
        `Commitment received for ${amount} bags of ${cropName}. Our procurement team will contact you shortly.`
      );
    }
  };

  return (
    <div className="supplier-layout">
      <SupplierSidebar />
      <main className="supplier-content">
        <div className="demand-header">
          <h1 className="page-title">
            <FaLeaf /> Current Mill Demand
          </h1>
          <div className="live-tag">
            <span className="dot"></span> LIVE RATES
          </div>
        </div>

        <p className="demand-subtitle">
          The mill is actively sourcing the following varieties. Commit your
          stock to lock in current market premiums.
        </p>

        <div className="demand-container">
          {demands.map((item) => (
            <div
              key={item.id}
              className={`demand-card ${item.urgency.toLowerCase()}`}
            >
              <div className="demand-info">
                <div className="crop-details">
                  <h3>{item.crop}</h3>
                  <span className={`urgency-tag ${item.urgency.toLowerCase()}`}>
                    {item.urgency === "High" && <FaExclamationCircle />}
                    {item.urgency} Urgency
                  </span>
                </div>

                <div className="pricing-details">
                  <p>Buying Rate (40kg)</p>
                  <h2 className="rate-text">
                    Rs. {item.rate.toLocaleString()}
                  </h2>
                </div>

                <div className="fulfillment-details">
                  <div className="fulfillment-labels">
                    <span>{item.progress}% Fulfilled</span>
                    <span>Target: {item.required} Bags</span>
                  </div>
                  <div className="progress-bar-bg">
                    <div
                      className="progress-bar-fill"
                      style={{ width: `${item.progress}%` }}
                    ></div>
                  </div>
                  <p className="remaining-text">
                    Remaining: {item.required - item.fulfilled} Bags
                  </p>
                </div>

                <div className="demand-actions">
                  <button
                    className="commit-btn"
                    onClick={() => handleCommit(item.crop)}
                  >
                    <FaTruck /> Commit Supply
                  </button>
                </div>
              </div>
            </div>
          ))}
        </div>

        <div className="demand-footer-note card">
          <FaCheckDouble />
          <p>
            Note: Prices are subject to quality inspection at the mill gate. AI
            Quality Pre-Scan is recommended before dispatch.
          </p>
        </div>
      </main>
    </div>
  );
};

export default SupplierDemand;


// ==========================================
// FILE: src\pages\SupplierMarketRates.css
// ==========================================

.market-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 25px;
}

.last-update {
  font-size: 13px;
  color: #888;
  display: flex;
  align-items: center;
  gap: 8px;
}

.market-insight-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 30px;
}

.insight-card {
  display: flex;
  align-items: flex-start;
  gap: 15px;
  padding: 20px !important;
  border-left: 4px solid #3e5235;
}

.insight-icon {
  font-size: 24px;
  color: #8c734b;
  margin-top: 3px;
}

.insight-card h4 {
  margin: 0 0 5px 0;
  color: #3e5235;
}
.insight-card p {
  margin: 0;
  font-size: 14px;
  color: #666;
}

/* CSS Bar Chart */
.trend-chart-section {
  margin-bottom: 30px;
}

.bar-chart-container {
  display: flex;
  justify-content: space-around;
  align-items: flex-end;
  height: 200px;
  margin-top: 40px;
  padding-bottom: 20px;
  border-bottom: 1px solid #eee;
}

.bar-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 60px;
}

.bar-fill {
  width: 100%;
  background: linear-gradient(180deg, #3e5235, #8c734b);
  border-radius: 4px 4px 0 0;
  position: relative;
  transition: height 1s ease;
}

.bar-label {
  position: absolute;
  top: -25px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 11px;
  font-weight: bold;
  white-space: nowrap;
}

.month-label {
  margin-top: 10px;
  font-size: 12px;
  color: #999;
}

/* Table Styling */
.market-table {
  width: 100%;
  border-collapse: collapse;
}
.market-table th {
  text-align: left;
  padding: 15px;
  color: #888;
  font-size: 13px;
  border-bottom: 2px solid #eee;
}
.market-table td {
  padding: 15px;
  border-bottom: 1px solid #f9f9f9;
}

.variety-name {
  font-weight: bold;
  color: #333;
}
.rate-now {
  font-weight: bold;
  color: #3e5235;
}
.rate-prev {
  color: #999;
}

.change-cell.up {
  color: #2e7d32;
  font-weight: bold;
}
.change-cell.down {
  color: #d32f2f;
  font-weight: bold;
}
.change-cell.stable {
  color: #666;
}

.sentiment-tag {
  padding: 4px 10px;
  border-radius: 15px;
  font-size: 11px;
  font-weight: bold;
}

.sentiment-tag.up {
  background: #e8f5e9;
  color: #2e7d32;
}
.sentiment-tag.down {
  background: #ffebee;
  color: #c62828;
}
.sentiment-tag.stable {
  background: #f5f5f5;
  color: #666;
}


// ==========================================
// FILE: src\pages\SupplierMarketRates.jsx
// ==========================================

import React, { useState } from "react";
import SupplierSidebar from "../components/SupplierSidebar";
import "./SupplierMarketRates.css";
import {
  FaChartLine,
  FaArrowUp,
  FaArrowDown,
  FaInfoCircle,
  FaCalendarAlt,
  FaGlobeAmericas,
} from "react-icons/fa";

const SupplierMarketRates = () => {
  // Mock data for price trends
  const marketData = [
    {
      id: 1,
      variety: "Super Kernel Basmati",
      current: 12500,
      previous: 11800,
      change: "+5.9%",
      trend: "up",
    },
    {
      id: 2,
      variety: "Kainat 1121 (Steam)",
      current: 14200,
      previous: 14500,
      change: "-2.1%",
      trend: "down",
    },
    {
      id: 3,
      variety: "Irri-6 (Coarse)",
      current: 6400,
      previous: 6200,
      change: "+3.2%",
      trend: "up",
    },
    {
      id: 4,
      variety: "C-9 (Hybrid)",
      current: 7100,
      previous: 7100,
      change: "0.0%",
      trend: "stable",
    },
  ];

  return (
    <div className="supplier-layout">
      <SupplierSidebar />
      <main className="supplier-content">
        <div className="market-header">
          <h1 className="page-title">
            <FaChartLine /> Market Trends & Pricing
          </h1>
          <div className="last-update">
            <FaCalendarAlt /> Last Update: Jan 21, 2026
          </div>
        </div>

        {/* 1. MARKET INSIGHT CARDS */}
        <div className="market-insight-grid">
          <div className="card insight-card export">
            <FaGlobeAmericas className="insight-icon" />
            <div>
              <h4>Export Demand</h4>
              <p>
                Strong demand from GCC countries is driving Basmati prices up.
              </p>
            </div>
          </div>
          <div className="card insight-card tip">
            <FaInfoCircle className="insight-icon" />
            <div>
              <h4>Supplier Pro-Tip</h4>
              <p>
                Consider holding Irri-6 stock; prices expected to peak in 3
                weeks.
              </p>
            </div>
          </div>
        </div>

        {/* 2. PRICE TREND CHART (CSS BARS) */}
        <div className="card trend-chart-section">
          <h3>6-Month Price Index (Basmati 1121)</h3>
          <div className="bar-chart-container">
            {[45, 55, 65, 60, 80, 95].map((height, i) => (
              <div key={i} className="bar-wrapper">
                <div className="bar-fill" style={{ height: `${height}%` }}>
                  <span className="bar-label">
                    Rs.{(height * 150).toLocaleString()}
                  </span>
                </div>
                <span className="month-label">
                  {["Aug", "Sep", "Oct", "Nov", "Dec", "Jan"][i]}
                </span>
              </div>
            ))}
          </div>
        </div>

        {/* 3. CURRENT MARKET RATES TABLE */}
        <div className="card">
          <h3>Current Mandi Rates (Per 40kg)</h3>
          <table className="market-table">
            <thead>
              <tr>
                <th>Rice Variety</th>
                <th>Current Rate</th>
                <th>Previous Rate</th>
                <th>Change</th>
                <th>Market Sentiment</th>
              </tr>
            </thead>
            <tbody>
              {marketData.map((item) => (
                <tr key={item.id}>
                  <td className="variety-name">{item.variety}</td>
                  <td className="rate-now">
                    Rs. {item.current.toLocaleString()}
                  </td>
                  <td className="rate-prev">
                    Rs. {item.previous.toLocaleString()}
                  </td>
                  <td className={`change-cell ${item.trend}`}>
                    {item.trend === "up" ? (
                      <FaArrowUp />
                    ) : item.trend === "down" ? (
                      <FaArrowDown />
                    ) : (
                      ""
                    )}{" "}
                    {item.change}
                  </td>
                  <td>
                    <span className={`sentiment-tag ${item.trend}`}>
                      {item.trend === "up"
                        ? "Bullish"
                        : item.trend === "down"
                        ? "Bearish"
                        : "Stable"}
                    </span>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </main>
    </div>
  );
};

export default SupplierMarketRates;


// ==========================================
// FILE: src\pages\SupplierPayments.css
// ==========================================

.payment-stats {
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)) !important;
  margin-bottom: 25px;
}

.stat-card.earned {
  border-left: 5px solid #3e5235;
}
.stat-card.pending {
  border-left: 5px solid #8c734b;
}

.stat-icon {
  font-size: 30px;
  color: #3e5235;
  margin-right: 15px;
}

.table-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.filter-group {
  display: flex;
  gap: 10px;
}

.filter-group button {
  padding: 6px 15px;
  border: 1px solid #ddd;
  background: white;
  border-radius: 20px;
  cursor: pointer;
  font-size: 13px;
  transition: all 0.3s;
}

.filter-group button.active {
  background: #3e5235;
  color: white;
  border-color: #3e5235;
}

.batch-ref {
  font-family: "Courier New", Courier, monospace;
  font-weight: bold;
  color: #666;
}

.amount-cell {
  font-weight: bold;
  color: #3e5235;
}

.status-pill {
  padding: 5px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: bold;
  display: flex;
  align-items: center;
  gap: 5px;
  width: fit-content;
}

.status-pill.paid {
  background: #e8f5e9;
  color: #2e7d32;
}
.status-pill.processing {
  background: #fff3e0;
  color: #ef6c00;
}

.download-btn {
  background: none;
  border: 1px solid #ddd;
  padding: 5px 10px;
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 12px;
}

.download-btn:hover {
  background: #f5f5f5;
  border-color: #8c734b;
  color: #8c734b;
}


// ==========================================
// FILE: src\pages\SupplierPayments.jsx
// ==========================================

import React, { useState } from "react";
import SupplierSidebar from "../components/SupplierSidebar";
import "./SupplierPayments.css";
import {
  FaFileInvoiceDollar,
  FaDownload,
  FaCheckCircle,
  FaClock,
  FaWallet,
  FaHourglassHalf,
  FaHistory,
} from "react-icons/fa";

const SupplierPayments = () => {
  const [filter, setFilter] = useState("All");

  // Mock data - In the future, this will be: const [payments, setPayments] = useState([]);
  const payments = [
    {
      id: "PAY-8821",
      date: "2026-01-15",
      batch: "PBK-1020-004",
      weight: "3,400 kg",
      amount: 85000,
      status: "Paid",
    },
    {
      id: "PAY-8819",
      date: "2026-01-10",
      batch: "PBK-1010-003",
      weight: "2,500 kg",
      amount: 62500,
      status: "Paid",
    },
    {
      id: "PAY-8815",
      date: "2025-12-28",
      batch: "PBK-0925-001",
      weight: "5,000 kg",
      amount: 125000,
      status: "Processing",
    },
    {
      id: "PAY-8812",
      date: "2025-12-15",
      batch: "SKB-1215-009",
      weight: "1,200 kg",
      amount: 48000,
      status: "Paid",
    },
  ];

  const filteredPayments =
    filter === "All" ? payments : payments.filter((p) => p.status === filter);

  // Calculate Totals
  const totalEarned = payments
    .filter((p) => p.status === "Paid")
    .reduce((acc, curr) => acc + curr.amount, 0);
  const totalPending = payments
    .filter((p) => p.status === "Processing")
    .reduce((acc, curr) => acc + curr.amount, 0);

  return (
    <div className="supplier-layout">
      <SupplierSidebar />
      <main className="supplier-content">
        <h1 className="page-title">
          <FaFileInvoiceDollar /> Financial Ledger
        </h1>

        {/* 1. FINANCIAL STATS CARDS */}
        <div className="dashboard-grid payment-stats">
          <div className="card stat-card earned">
            <div className="stat-icon">
              <FaWallet />
            </div>
            <div className="stat-info">
              <p>Total Paid Out</p>
              <h2>Rs. {totalEarned.toLocaleString()}</h2>
            </div>
          </div>
          <div className="card stat-card pending">
            <div className="stat-icon">
              <FaHourglassHalf />
            </div>
            <div className="stat-info">
              <p>Pending Clearance</p>
              <h2>Rs. {totalPending.toLocaleString()}</h2>
            </div>
          </div>
        </div>

        {/* 2. FILTER & TABLE SECTION */}
        <div className="card payment-table-card">
          <div className="table-header">
            <h3>
              <FaHistory /> Transaction History
            </h3>
            <div className="filter-group">
              {["All", "Paid", "Processing"].map((cat) => (
                <button
                  key={cat}
                  className={filter === cat ? "active" : ""}
                  onClick={() => setFilter(cat)}
                >
                  {cat}
                </button>
              ))}
            </div>
          </div>

          <table className="admin-table supplier-table">
            <thead>
              <tr>
                <th>Invoice ID</th>
                <th>Date</th>
                <th>Batch Reference</th>
                <th>Net Weight</th>
                <th>Total (PKR)</th>
                <th>Status</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              {filteredPayments.map((pay) => (
                <tr key={pay.id}>
                  <td>
                    <strong>{pay.id}</strong>
                  </td>
                  <td>{pay.date}</td>
                  <td className="batch-ref">{pay.batch}</td>
                  <td>{pay.weight}</td>
                  <td className="amount-cell">
                    Rs. {pay.amount.toLocaleString()}
                  </td>
                  <td>
                    <span className={`status-pill ${pay.status.toLowerCase()}`}>
                      {pay.status === "Paid" ? <FaCheckCircle /> : <FaClock />}{" "}
                      {pay.status}
                    </span>
                  </td>
                  <td>
                    <button className="download-btn">
                      <FaDownload /> Receipt
                    </button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </main>
    </div>
  );
};

export default SupplierPayments;


// ==========================================
// FILE: src\pages\SupplierProfile.jsx
// ==========================================

import React, { useState } from "react";
import SupplierSidebar from "../components/SupplierSidebar";
import "./SupplierDashboard.css"; // Reusing dashboard styles
// FIX: FaBank has been correctly replaced with FaUniversity in the import
import {
  FaUserCircle,
  FaEdit,
  FaSave,
  FaTractor,
  FaUniversity,
  FaPhone,
} from "react-icons/fa";

const SupplierProfile = () => {
  const [isEditing, setIsEditing] = useState(false);
  const [profile, setProfile] = useState({
    name: "Nasir Khan Farms",
    growerId: "GWR-732",
    phone: "+92 300 987 6543",
    landArea: "12 Acres (Basmati)",
    bankName: "HBL (Habib Bank Ltd)",
    accountNumber: "0987-1234-5678-001",
    cnic: "35201-XXXXXXX-X",
  });

  const handleChange = (e) => {
    setProfile({ ...profile, [e.target.name]: e.target.value });
  };

  const handleSave = () => {
    setIsEditing(false);
    alert("Profile saved successfully! Bank details are encrypted.");
  };

  const InputField = ({ label, name, value, disabled = !isEditing, icon }) => (
    <div className="input-field-group">
      <label>{label}</label>
      <div className="input-with-icon">
        {icon}
        <input
          type="text"
          name={name}
          value={value}
          onChange={handleChange}
          disabled={disabled}
        />
      </div>
    </div>
  );

  return (
    <div className="supplier-layout">
      <SupplierSidebar />
      <main className="supplier-content">
        <h1 className="page-title">
          <FaTractor /> My Farmer Profile
        </h1>

        <div className="card profile-card">
          <div className="profile-header">
            <h3>Grower & Land Details</h3>
            {isEditing ? (
              <button className="confirm-btn" onClick={handleSave}>
                <FaSave /> Save Changes
              </button>
            ) : (
              <button
                className="confirm-btn"
                onClick={() => setIsEditing(true)}
              >
                <FaEdit /> Edit
              </button>
            )}
          </div>

          <div className="profile-grid">
            <InputField
              label="Farm Name"
              name="name"
              value={profile.name}
              icon={<FaUserCircle />}
            />
            <InputField
              label="Grower ID"
              name="growerId"
              value={profile.growerId}
              disabled
              icon={<FaTractor />}
            />
            <InputField
              label="Land Area/Crops"
              name="landArea"
              value={profile.landArea}
              icon={<FaEdit />}
            />
            <InputField
              label="CNIC (Encrypted)"
              name="cnic"
              value={profile.cnic}
              disabled
              icon={<FaUserCircle />}
            />
          </div>

          <h3
            style={{
              marginTop: "30px",
              borderTop: "1px solid #eee",
              paddingTop: "20px",
            }}
          >
            Payment Information
          </h3>
          <div className="profile-grid">
            {/* FIX: Ensure FaUniversity is used here */}
            <InputField
              label="Bank Name"
              name="bankName"
              value={profile.bankName}
              icon={<FaUniversity />}
            />

            {/* FIX: Ensure FaUniversity is used here */}
            <InputField
              label="Account Number"
              name="accountNumber"
              value={profile.accountNumber}
              icon={<FaUniversity />}
            />

            <InputField
              label="Phone (for alerts)"
              name="phone"
              value={profile.phone}
              icon={<FaPhone />}
            />
          </div>
        </div>
      </main>
    </div>
  );
};

export default SupplierProfile;


// ==========================================
// FILE: src\pages\SupplierQuality.jsx
// ==========================================

import React from "react";
import SupplierSidebar from "../components/SupplierSidebar";
import "./SupplierDashboard.css";
import { FaFlask, FaExclamationTriangle, FaCheckDouble } from "react-icons/fa";

const SupplierQuality = () => {
  return (
    <div className="supplier-layout">
      <SupplierSidebar />
      <main className="supplier-content">
        <h1 className="page-title">
          <FaFlask /> Lab Quality Reports
        </h1>

        {/* Detailed Report Card */}
        <div className="card">
          <div
            style={{
              display: "flex",
              justifyContent: "space-between",
              borderBottom: "1px solid #eee",
              paddingBottom: "15px",
              marginBottom: "15px",
            }}
          >
            <div>
              <h3>Batch #PBK-1020-004</h3>
              <p style={{ color: "#666" }}>
                Delivered on: 25 Oct 2025 | Variety: Super Kernel
              </p>
            </div>
            <div style={{ textAlign: "right" }}>
              <h2 style={{ color: "#3e5235" }}>Grade A</h2>
              <span className="status delivered">Passed Inspection</span>
            </div>
          </div>

          <div className="dashboard-grid">
            <div
              style={{
                flex: 1,
                textAlign: "center",
                borderRight: "1px solid #eee",
              }}
            >
              <h4 style={{ color: "#555" }}>Moisture Content</h4>
              <h2 style={{ color: "#2e7d32" }}>11.5%</h2>
              <p style={{ fontSize: "12px", color: "#999" }}>
                Ideal Range: 10-12%
              </p>
            </div>
            <div
              style={{
                flex: 1,
                textAlign: "center",
                borderRight: "1px solid #eee",
              }}
            >
              <h4 style={{ color: "#555" }}>Broken Grain</h4>
              <h2 style={{ color: "#f57c00" }}>4.2%</h2>
              <p style={{ fontSize: "12px", color: "#999" }}>
                Acceptable: &lt; 5%
              </p>
            </div>
            <div style={{ flex: 1, textAlign: "center" }}>
              <h4 style={{ color: "#555" }}>Purity Level</h4>
              <h2 style={{ color: "#2e7d32" }}>98%</h2>
              <p style={{ fontSize: "12px", color: "#999" }}>Excellent</p>
            </div>
          </div>

          <div
            style={{
              background: "#f9f9f9",
              padding: "15px",
              marginTop: "20px",
              borderRadius: "8px",
              borderLeft: "4px solid #8c734b",
            }}
          >
            <strong>
              <FaCheckDouble /> Lab Note:
            </strong>{" "}
            This batch meets Export Quality standards. A bonus of Rs. 50/40kg
            has been applied to your payment.
          </div>
        </div>

        {/* Second Report (Failed/Lower Grade Example) */}
        <div className="card" style={{ marginTop: "25px" }}>
          <div
            style={{
              display: "flex",
              justifyContent: "space-between",
              borderBottom: "1px solid #eee",
              paddingBottom: "15px",
              marginBottom: "15px",
            }}
          >
            <div>
              <h3>Batch #PBK-0925-001</h3>
              <p style={{ color: "#666" }}>
                Delivered on: 28 Sep 2025 | Variety: Irri-6
              </p>
            </div>
            <div style={{ textAlign: "right" }}>
              <h2 style={{ color: "#f57c00" }}>Grade B</h2>
              <span className="status processing">Standard Quality</span>
            </div>
          </div>
          <div style={{ padding: "10px", color: "#666" }}>
            <FaExclamationTriangle style={{ color: "#f57c00" }} />{" "}
            <em>
              Moisture content was slightly high (14%). Drying deduction
              applied.
            </em>
          </div>
        </div>
      </main>
    </div>
  );
};

export default SupplierQuality;


// ==========================================
// FILE: src\pages\Traceability.css
// ==========================================

.trace-container {
  max-width: 800px;
}

.trace-search-section {
  padding: 30px;
  background: white;
  border-radius: 12px;
  margin-bottom: 25px;
}

.trace-form {
  display: flex;
  gap: 10px;
  margin-top: 20px;
}

.search-input-wrapper {
  flex: 1;
}

.search-input-wrapper input {
  width: 100%;
  padding: 12px 15px;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  font-size: 16px;
  transition: all 0.3s ease;
}

.search-input-wrapper input:focus {
  border-color: #8c734b;
  outline: none;
  box-shadow: 0 0 8px rgba(140, 115, 75, 0.2);
}

.trace-submit-btn {
  background: #3e5235;
  color: white;
  border: none;
  padding: 0 25px;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.3s;
}

.trace-submit-btn:hover {
  background: #2c3e26;
}

/* Loading Spinner */
.trace-loading {
  text-align: center;
  padding: 40px;
}

.spinner {
  width: 40px;
  height: 40px;
  border: 4px solid #f3f3f3;
  border-top: 4px solid #8c734b;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 15px;
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* Result Card */
.result-header {
  display: flex;
  align-items: center;
  gap: 15px;
  margin-bottom: 25px;
  padding-bottom: 15px;
  border-bottom: 1px solid #eee;
}

.verified-icon {
  font-size: 40px;
  color: #2e7d32;
}

.batch-display span {
  font-weight: bold;
  color: #8c734b;
}

.trace-steps {
  display: flex;
  flex-direction: column;
}

.step-item {
  display: flex;
  gap: 20px;
  position: relative;
  padding-bottom: 30px;
}

/* Timeline Vertical Line */
.step-item::after {
  content: "";
  position: absolute;
  left: 17px;
  top: 35px;
  bottom: 0;
  width: 2px;
  background: #e0e0e0;
}

.step-item:last-child::after {
  display: none;
}

.step-icon {
  width: 36px;
  height: 36px;
  background: #f1f8ef;
  color: #3e5235;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;
}

.step-details h4 {
  margin: 0 0 5px 0;
  color: #3e5235;
}

.step-details p {
  margin: 2px 0;
  font-size: 14px;
  color: #666;
}

.status-success {
  color: #2e7d32;
  font-weight: bold;
}

/* Error UI */
.trace-error {
  text-align: center;
  padding: 40px;
}

.error-icon {
  font-size: 50px;
  color: #d32f2f;
  margin-bottom: 15px;
}

.fade-in {
  animation: fadeIn 0.4s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@media (max-width: 600px) {
  .trace-form {
    flex-direction: column;
  }
  .trace-submit-btn {
    padding: 12px;
  }
}


// ==========================================
// FILE: src\pages\Traceability.jsx
// ==========================================

import React, { useState } from "react";
import CustomerSidebar from "../components/CustomerSidebar";
import "./Traceability.css";
import {
  FaSearch,
  FaMapMarkerAlt,
  FaSeedling,
  FaIndustry,
  FaCheckCircle,
  FaExclamationTriangle,
} from "react-icons/fa";

const Traceability = () => {
  const [batchCode, setBatchCode] = useState("");
  const [result, setResult] = useState(null);
  const [loading, setLoading] = useState(false);

  // Data to verify search is working
  const traceDatabase = {
    "PBK-1121-089": {
      farmer: "Nasir Khan",
      location: "Gujranwala, Punjab",
      milledDate: "January 10, 2026",
      qualityScore: "9.8/10",
      variety: "Basmati 1121 (Export)",
      status: "Verified Authentic",
    },
  };

  const handleTrace = (e) => {
    e.preventDefault();
    console.log("Trace button clicked for code:", batchCode); // DEBUG LOG

    if (!batchCode.trim()) return;

    setLoading(true);
    setResult(null);

    // Simulate API delay
    setTimeout(() => {
      const code = batchCode.toUpperCase().trim();
      const foundData = traceDatabase[code];

      if (foundData) {
        setResult({ success: true, ...foundData });
      } else {
        setResult({ success: false });
      }
      setLoading(false);
    }, 600);
  };

  return (
    <div className="customer-layout">
      <CustomerSidebar />
      <main className="customer-content">
        <h1 className="page-title">
          <FaMapMarkerAlt /> Traceability Check
        </h1>

        <div className="trace-search-section card">
          <h3>Verify Batch Origin</h3>
          <p>
            Transparency is our priority. Enter your batch code to see the
            farm-to-mill journey.
          </p>

          <form onSubmit={handleTrace} className="trace-form">
            <div className="search-input-wrapper">
              <FaSearch className="search-icon" />
              <input
                type="text"
                placeholder="Enter Code (e.g. PBK-1121-089)"
                value={batchCode}
                onChange={(e) => setBatchCode(e.target.value)}
                required
              />
            </div>
            <button
              type="submit"
              className="trace-submit-btn"
              disabled={loading}
            >
              {loading ? "Searching..." : "Trace Now"}
            </button>
          </form>
        </div>

        {/* LOADING INDICATOR */}
        {loading && <div className="loading-spinner">Verifying records...</div>}

        {/* RESULT SECTION */}
        {result && result.success && (
          <div className="trace-result-container fade-in card">
            <div className="result-header">
              <FaCheckCircle className="verified-icon" />
              <div>
                <h2>Verified Authentic</h2>
                <p>Batch: {batchCode.toUpperCase()}</p>
              </div>
            </div>
            <div className="trace-details">
              <div className="detail-item">
                <FaSeedling /> <strong>Farmer:</strong> {result.farmer}
              </div>
              <div className="detail-item">
                <FaMapMarkerAlt /> <strong>Region:</strong> {result.location}
              </div>
              <div className="detail-item">
                <FaIndustry /> <strong>Milled:</strong> {result.milledDate}
              </div>
              <div className="detail-item">
                <FaCheckCircle /> <strong>Quality:</strong>{" "}
                {result.qualityScore}
              </div>
            </div>
          </div>
        )}

        {result && !result.success && (
          <div className="trace-error card fade-in">
            <FaExclamationTriangle className="error-icon" />
            <h3>Code Not Found</h3>
            <p>
              We couldn't find records for "{batchCode}". Please check the code
              on the bag.
            </p>
          </div>
        )}
      </main>
    </div>
  );
};

export default Traceability;


// ==========================================
// FILE: vite.config.js
// ==========================================

import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
})
